<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AccumulationDistributionLine - I ant I Investigates</title>
    <meta name="description" content="AccumulationDistributionLine - Technical Indicator">
    <meta name="keywords" content="AccumulationDistributionLine, technical indicator, stock analysis">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iantinvestigates.com/indicators/accumulationdistributionline.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="AccumulationDistributionLine - I ant I Investigates">
    <meta property="og:description" content="AccumulationDistributionLine - Technical Indicator">
    <meta property="og:url" content="https://iantinvestigates.com/indicators/accumulationdistributionline.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://iantinvestigates.com/assets/images/ogp/accumulationdistributionline.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AccumulationDistributionLine">
    <meta name="twitter:description" content="AccumulationDistributionLine - Technical Indicator">
    <meta name="twitter:image" content="https://iantinvestigates.com/assets/images/ogp/accumulationdistributionline.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">AccumulationDistributionLine</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">AccumulationDistributionLine</h1>
                <p class="text-lg text-slate-600 leading-relaxed">The A/D Line tracks cumulative "smart money" flow by measuring whether volume is flowing into (accumulation) or out of (distribution) a security based on where price closes within its daily range.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="フローチャート操作エリア。矢印キーで移動、+/-でズーム、Rでリセット">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive OHLCV Data"/];
B["Capture Daily Trading Range"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
C["Assess Close Location Within Range"];
D{"Close Near High?"};
E{"Close Near Low?"};
F["Buyers Dominated Session"];
G["Sellers Dominated Session"];
H["Neutral Session"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
I["Amplify by Volume Conviction"];
J["Calculate Money Flow Impact"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
K["Accumulate Running Total"];
L["Track Institutional Flow Direction"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
M{"ADL Rising?"};
N["Smart Money Accumulating"];
O["Smart Money Distributing"];
P[/"Generate A/D Line Value"/];
end;
A --> B;
B --> C;
C --> D;
D -->|Yes| F;
D -->|No| E;
E -->|Yes| G;
E -->|No| H;
F --> I;
G --> I;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Yes| N;
M -->|No| O;
N --> P;
O --> P;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/AccumulationDistributionLine.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="accumulationdistributionline-a/d-line">AccumulationDistributionLine (A/D Line)</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Accumulation/Distribution Line  </p>
<p class="mb-4">Abbreviation: A/D Line, ADL  </p>
<p class="mb-4">Category: Volume  </p>
<p class="mb-4">Creator: Marc Chaikin (1980s)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: The A/D Line tracks cumulative "smart money" flow by measuring whether volume is flowing into (accumulation) or out of (distribution) a security based on where price closes within its daily range.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">$$CLV = \frac{(Close - Low) - (High - Close)}{High - Low}$$</p>

<p class="mb-4">$$A/D_t = A/D_{t-1} + (CLV \times Volume)$$</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Formula</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Range = High - Low$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate daily trading range</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">$CLV = \frac{(Close - Low) - (High - Close)}{High - Low}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close Location Value (-1 to +1)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">$MoneyFlowVolume = CLV \times Volume$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volume-weighted directional flow</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">$A/D = Previous\ A/D + MoneyFlowVolume$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cumulative running total</td></tr>
</table></div>

<h3 id="clv-interpretation">CLV Interpretation</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">CLV Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close Location</td><td class="px-4 py-2 border-b border-[#2a2e39]">Meaning</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">+1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">At the High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Maximum buying pressure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">+0.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Upper half of range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish close</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">0.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Midpoint of range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Neutral</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">-0.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Lower half of range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish close</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">-1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">At the Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Maximum selling pressure</td></tr>
</table></div>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of the A/D Line as a bank account balance for institutional money. Each day, money flows in (deposits) or out (withdrawals) based on how convincingly buyers or sellers controlled the close. If price closes near the high with heavy volume, that's a big deposit. The cumulative balance reveals whether "smart money" is quietly accumulating shares or distributing them.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">None (Cumulative)</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D is a running total from chart start</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">20 or 50 SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Apply to A/D for crossover signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Lookback</td><td class="px-4 py-2 border-b border-[#2a2e39]">10-20 bars</td><td class="px-4 py-2 border-b border-[#2a2e39]">Compare A/D slope to price slope</td></tr>
</table></div>

<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">5-min to 1-hour</td><td class="px-4 py-2 border-b border-[#2a2e39]">High volume sensitivity</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td><td class="px-4 py-2 border-b border-[#2a2e39]">Best for divergence analysis</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily/Weekly</td><td class="px-4 py-2 border-b border-[#2a2e39]">Long-term accumulation patterns</td></tr>
</table></div>

<h3 id="data-requirements">Data Requirements</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Input</td><td class="px-4 py-2 border-b border-[#2a2e39]">Required?</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">For range calculation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">For range calculation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Close</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">For CLV calculation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Critical for money flow</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D should rise with price uptrends; falling A/D in uptrend warns of weakness</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Reveals when price and volume disagree (smart money vs. public)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal Hunting</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish divergence often precedes significant bottoms</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gappy Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D ignores overnight gaps; a 10% gap-down with a "high close" still shows accumulation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low-Float Stocks</td><td class="px-4 py-2 border-b border-[#2a2e39]">Erratic volume distorts the cumulative line</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">No Threshold Levels</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded indicator makes interpretation subjective</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Equities — Designed for stock analysis</p>
<p class="mb-4">- ETFs — Volume patterns are clean</p>
<p class="mb-4">- Forex — No centralized volume data (use tick volume as proxy)</p>
<p class="mb-4">- Crypto — Exchange-specific volume can be misleading</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price makes Lower Low, A/D makes Higher Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Buy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price makes Higher High, A/D makes Lower High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Sell</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">A/D > Signal SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D crosses above its moving average</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">A/D < Signal SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D crosses below its moving average</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">A/D Trend Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D makes new high with price new high</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend continuation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
</table></div>

<h3 id="primary-buy-signal-divergence">Primary Buy Signal (Divergence)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Price makes Lower Low (vs. prior swing low)
AND A/D Line makes Higher Low (vs. prior swing low)
THEN → BUY (Bullish Divergence - Smart money accumulating)
</code></pre>

<h3 id="primary-sell-signal-divergence">Primary Sell Signal (Divergence)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Price makes Higher High (vs. prior swing high)
AND A/D Line makes Lower High (vs. prior swing high)
THEN → SELL (Bearish Divergence - Smart money distributing)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">A/D Line excels as a confirmation tool rather than a standalone entry trigger. Use it to validate breakouts and trend health.</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">A/D Confirms Breakout</td><td class="px-4 py-2 border-b border-[#2a2e39]">Only trade price breakouts if A/D is also making new highs</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Warning</td><td class="px-4 py-2 border-b border-[#2a2e39]">Reduce position if A/D diverges from price</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume Support</td><td class="px-4 py-2 border-b border-[#2a2e39]">Enter only if A/D slope matches desired direction</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">On-Balance Volume (OBV)</td><td class="px-4 py-2 border-b border-[#2a2e39]">OBV accounts for gaps; A/D handles intraday location. Use both to validate volume signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Money Flow Index (MFI)</td><td class="px-4 py-2 border-b border-[#2a2e39]">MFI is oscillator (0-100), A/D is cumulative. Combine for short and long-term volume views</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Breakouts</td><td class="px-4 py-2 border-b border-[#2a2e39]">Confirm resistance breaks with A/D also breaking its corresponding level</td></tr>
</table></div>

<h3 id="example-combined-strategy">Example Combined Strategy</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ENTRY CONDITIONS:
&nbsp;&nbsp;Price breaks above 20-day high          // Breakout trigger
&nbsp;&nbsp;A/D Line &gt; A/D Line 20-bar max         // Volume confirms breakout
&nbsp;&nbsp;Volume &gt; 1.5 × SMA(Volume, 20)         // Above-average participation

ACTION: BUY on confirmed breakout with volume support
AVOID: Breakouts where A/D is flat or falling
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Calculation Start</td><td class="px-4 py-2 border-b border-[#2a2e39]">First bar (cumulative from start)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Reliability</td><td class="px-4 py-2 border-b border-[#2a2e39]">Improves with more data history</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Recognition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Requires 5-10 bars minimum to identify</td></tr>
</table></div>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. The Gap Trap  </p>
<p class="mb-4">   A stock gaps down 15% at open but closes near the high of that reduced range. A/D shows accumulation (+CLV), but the stock actually dropped 15%. The formula ignores gaps.</p>

<p class="mb-4">2. Volume Spikes  </p>
<p class="mb-4">   A single day with 10× normal volume can dominate the A/D calculation, creating false signals that persist.</p>

<p class="mb-4">3. Flat A/D in Trending Market  </p>
<p class="mb-4">   Sometimes price trends while A/D moves sideways. This isn't necessarily divergence—it may simply mean volume is steady.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- Pair with OBV: OBV uses previous close comparison, catching gaps A/D misses</p>
<p class="mb-4">- Normalize Volume: Consider dividing by average volume to reduce spike influence</p>
<p class="mb-4">- Ignore Gap Days: Some traders "blank" A/D signals on days with >2% gaps</p>
<p class="mb-4">- Confirm with Price Action: Divergences need price confirmation (breakout/breakdown)</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-"shadow-chart"-concept">The "Shadow Chart" Concept</h3>

<p class="mb-4">In a healthy trend, the A/D Line should look like a "shadow" of the price chart—rising when price rises, hitting new highs together. When they stop looking alike, pay attention. This visual divergence is often more reliable than mathematical calculations.</p>

<h3 id="hidden-accumulation-detection">Hidden Accumulation Detection</h3>

<p class="mb-4">When price moves sideways (flat range) but A/D steadily climbs, institutions are accumulating without moving price. They're using limit orders to absorb supply. This often precedes explosive breakouts. Look for:</p>
<p class="mb-4">- Price: Flat to slightly declining</p>
<p class="mb-4">- A/D: Steadily rising</p>
<p class="mb-4">- Volume: Above average</p>

<h3 id="distribution-into-strength">Distribution Into Strength</h3>

<p class="mb-4">The opposite pattern—price making new highs while A/D lags—indicates distribution. "Smart money" is selling into retail enthusiasm. This is the classic topping pattern that precedes significant declines.</p>

<h3 id="professional-screening-technique">Professional Screening Technique</h3>

<p class="mb-4">Screen for stocks where:</p>
<p class="mb-4">1. Price is down over 10 days</p>
<p class="mb-4">2. A/D is up over the same 10 days</p>
<p class="mb-4">3. Volume is above average</p>

<p class="mb-4">This identifies "stealth accumulation"—heavy buying disguised by falling prices.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"The A/D Line reveals what smart money is doing while everyone else watches price—rising A/D with falling price means institutions are quietly loading the boat."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">Traditional volume analysis (like On-Balance Volume) is binary: if price closes up, *all* volume is bullish; if down, *all* is bearish. But this ignores where price actually closed within the day's range.</p>

<p class="mb-4">Marc Chaikin's insight: Close location matters.</p>

<p class="mb-4">Consider two scenarios with identical volume:</p>
<p class="mb-4">1. Stock opens at $100, trades $98-$105, closes at $104 (near high)</p>
<p class="mb-4">2. Stock opens at $100, trades $98-$105, closes at $99 (near low)</p>

<p class="mb-4">Both have the same range, but scenario 1 shows buyers winning (accumulation) while scenario 2 shows sellers winning (distribution). The A/D Line captures this using the Close Location Value.</p>

<p class="mb-4">Simple Rule: Closes near the high = Volume is bullish. Closes near the low = Volume is bearish.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="why-divergence-works">Why Divergence Works</h3>

<p class="mb-4">When price makes a new low but A/D makes a higher low:</p>
<p class="mb-4">- Public is selling (pushing price down)</p>
<p class="mb-4">- Institutions are buying (supporting A/D)</p>
<p class="mb-4">- Institutions usually win</p>

<p class="mb-4">Studies show:</p>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Next 20-Day Return</td><td class="px-4 py-2 border-b border-[#2a2e39]">Win Rate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">+4.2% average</td><td class="px-4 py-2 border-b border-[#2a2e39]">62%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">No Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">+1.1% average</td><td class="px-4 py-2 border-b border-[#2a2e39]">52%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">-2.8% average</td><td class="px-4 py-2 border-b border-[#2a2e39]">58% (shorts)</td></tr>
</table></div>

<h3 id="the-"smart-money"-edge">The "Smart Money" Edge</h3>

<p class="mb-4">Institutional traders accumulate positions slowly to avoid moving price. Their activity shows in A/D (closing near highs on volume) before it shows in price (which they're deliberately suppressing). A/D mathematically captures this pattern.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"a/d-divergence-reversal"">Strategy Name: "A/D Divergence Reversal"</h3>

<p class="mb-4">Concept: Buy when smart money accumulation diverges from price weakness; sell when distribution diverges from price strength.</p>

<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. Identify swing highs/lows in price (5-bar minimum)</p>
<p class="mb-4">2. Compare corresponding A/D swing highs/lows</p>

<p class="mb-4">Entry Trigger (Long):</p>
<p class="mb-4">- Price makes lower low than previous swing low</p>
<p class="mb-4">- A/D makes higher low than previous swing low</p>
<p class="mb-4">- Confirmation: Price closes above previous bar's high</p>

<p class="mb-4">Position Sizing:</p>
<p class="mb-4">- Full size if volume on divergence is above average</p>
<p class="mb-4">- Half size if volume is below average</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Stop Loss: Below the divergence swing low</p>
<p class="mb-4">2. Take Profit: When A/D makes new high (momentum confirmed)</p>
<p class="mb-4">3. Trail: Use 10-bar trailing stop after initial profit</p>

<p class="mb-4">Example:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Price: Jan Low = $45, Feb Low = $43 (Lower Low)
A/D:   Jan Low = 100K, Feb Low = 120K (Higher Low)

→ Bullish Divergence detected
→ Wait for price to close above prior bar high
→ Enter long with stop at $42.50
→ Exit when A/D hits new 20-day high
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap Trap</td><td class="px-4 py-2 border-b border-[#2a2e39]">Large gaps distort CLV meaning</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ignore signals on >2% gap days</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume Spike Distortion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single high-volume day dominates line</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use volume-normalized version</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Illiquid Stocks</td><td class="px-4 py-2 border-b border-[#2a2e39]">Erratic volume creates noisy A/D</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stick to stocks with >500K daily volume</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trends Override</td><td class="px-4 py-2 border-b border-[#2a2e39]">In strong trends, divergence can persist</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use tight stops; respect trend</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">1. Seeing Divergences Everywhere  </p>
<p class="mb-4">   Not every wiggle is divergence. Look for clear swing points, not minor fluctuations.</p>

<p class="mb-4">2. Expecting Immediate Reversal  </p>
<p class="mb-4">   Divergence indicates future weakness, not immediate reversal. Price can continue trending for weeks.</p>

<p class="mb-4">3. Ignoring Price Action  </p>
<p class="mb-4">   A/D is a secondary indicator. Always confirm with price patterns before trading.</p>

<h3 id="common-misinterpretations">Common Misinterpretations</h3>

<p class="mb-4">- "A/D at new high = buy" → It's unbounded; absolute levels mean nothing</p>
<p class="mb-4">- "Falling A/D = sell immediately" → Context matters; check for divergence first</p>
<p class="mb-4">- "A/D works for forex" → Forex has no true volume; tick volume is an imperfect proxy</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Marc Chaikin developed the A/D Line in the early 1980s while working as a market analyst. Chaikin felt that On-Balance Volume was too simplistic and created the Close Location Value formula to better capture intraday buying/selling pressure. He later developed related indicators including Chaikin Money Flow and the Chaikin Oscillator.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Chaikin Money Flow (CMF)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child — Oscillator version of A/D (bounded, time-limited)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Chaikin Oscillator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child — MACD applied to A/D Line</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">On-Balance Volume (OBV)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Predecessor — Binary volume approach that A/D improved</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Money Flow Index (MFI)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cousin — Similar concept but oscillator with RSI math</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *Technical Analysis of Stocks & Commodities* — Original Chaikin articles</p>
<p class="mb-4">2. *Technical Analysis: The Complete Resource* — Kirkpatrick & Dahlquist</p>
<p class="mb-4">3. StockCharts.com ChartSchool — A/D Line documentation</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">CMF</td><td class="px-4 py-2 border-b border-[#2a2e39]">MFI</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cumulative</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cumulative</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oscillator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oscillator</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">-1 to +1</td><td class="px-4 py-2 border-b border-[#2a2e39]">0 to 100</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Handles Gaps</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Close Location</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period Setting</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td><td class="px-4 py-2 border-b border-[#2a2e39]">20/21 default</td><td class="px-4 py-2 border-b border-[#2a2e39]">14 default</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Long-term accumulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short-term flow</td><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought/Oversold</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- A/D Line — Long-term accumulation/distribution tracking, divergence analysis</p>
<p class="mb-4">- OBV — Simpler volume trend, handles gaps better</p>
<p class="mb-4">- CMF — Short-term money flow oscillator with clear -1/+1 bounds</p>
<p class="mb-4">- MFI — Volume-weighted RSI for overbought/oversold conditions</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">A/D Behavior</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price Behavior</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rising</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rising</td><td class="px-4 py-2 border-b border-[#2a2e39]">Healthy uptrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hold longs</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rising</td><td class="px-4 py-2 border-b border-[#2a2e39]">Falling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare to buy</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rising</td><td class="px-4 py-2 border-b border-[#2a2e39]">Flat</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hidden accumulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Watch for breakout</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Falling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rising</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare to sell</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Falling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Falling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Healthy downtrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hold shorts or avoid</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Flat</td><td class="px-4 py-2 border-b border-[#2a2e39]">Any</td><td class="px-4 py-2 border-b border-[#2a2e39]">No institutional activity</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wait for direction</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="bullish-divergence-detection">Bullish Divergence Detection</h4>

<p class="mb-4">When price makes a lower low compared to a previous swing low but the A/D Line makes a higher low, this indicates that institutional money is accumulating shares even as price falls. This bullish divergence suggests smart money is buying into weakness, often preceding significant price reversals to the upside.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def ad_bullish_divergence(price, ad_values, lookback=10):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Detect bullish divergence: Price LL, A/D HL&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;# Find price swing lows
&nbsp;&nbsp;&nbsp;&nbsp;price_low_1 = min(price[-lookback:-lookback//2])
&nbsp;&nbsp;&nbsp;&nbsp;price_low_2 = min(price[-lookback//2:])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;# Find A/D swing lows at same time indices
&nbsp;&nbsp;&nbsp;&nbsp;ad_low_1 = min(ad_values[-lookback:-lookback//2])
&nbsp;&nbsp;&nbsp;&nbsp;ad_low_2 = min(ad_values[-lookback//2:])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;price_lower_low = price_low_2 &lt; price_low_1
&nbsp;&nbsp;&nbsp;&nbsp;ad_higher_low = ad_low_2 &gt; ad_low_1
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return price_lower_low and ad_higher_low
</code></pre>

<h4 id="bearish-divergence-detection">Bearish Divergence Detection</h4>

<p class="mb-4">When price makes a higher high compared to a previous swing high but the A/D Line makes a lower high, this indicates distribution—smart money is selling into strength. This bearish divergence often appears at market tops and warns of an impending downward reversal as institutional buyers have stopped supporting higher prices.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def ad_bearish_divergence(price, ad_values, lookback=10):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Detect bearish divergence: Price HH, A/D LH&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;price_high_1 = max(price[-lookback:-lookback//2])
&nbsp;&nbsp;&nbsp;&nbsp;price_high_2 = max(price[-lookback//2:])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ad_high_1 = max(ad_values[-lookback:-lookback//2])
&nbsp;&nbsp;&nbsp;&nbsp;ad_high_2 = max(ad_values[-lookback//2:])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;price_higher_high = price_high_2 &gt; price_high_1
&nbsp;&nbsp;&nbsp;&nbsp;ad_lower_high = ad_high_2 &lt; ad_high_1
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return price_higher_high and ad_lower_high
</code></pre>

<h4 id="signal-line-crossover">Signal Line Crossover</h4>

<p class="mb-4">When the A/D Line crosses above its simple moving average, it signals a shift from distribution to accumulation—bullish for price. Conversely, when A/D crosses below its SMA, it indicates a transition to distribution, warning of potential price weakness. This crossover system works best when combined with trend confirmation from price action.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def ad_signal_cross(ad_values, signal_period=20):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;A/D crosses above/below its SMA&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;ad_current = ad_values[-1]
&nbsp;&nbsp;&nbsp;&nbsp;ad_prev = ad_values[-2]
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;ad_sma = sum(ad_values[-signal_period:]) / signal_period
&nbsp;&nbsp;&nbsp;&nbsp;ad_sma_prev = sum(ad_values[-signal_period-1:-1]) / signal_period
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;bullish_cross = ad_prev &lt;= ad_sma_prev and ad_current &gt; ad_sma
&nbsp;&nbsp;&nbsp;&nbsp;bearish_cross = ad_prev &gt;= ad_sma_prev and ad_current &lt; ad_sma
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return bullish_cross, bearish_cross
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="stealth-accumulation-scanner">Stealth Accumulation Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Price &lt; Price[10]                        // Price is falling
AND AD_Line &gt; AD_Line[10]               // A/D is rising
AND Volume &gt; SMA(Volume, 20)            // Volume above average
</code></pre>

<h4 id="distribution-warning-scanner">Distribution Warning Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Price &gt; Highest(Price, 20)               // New 20-day high
AND AD_Line &lt; AD_Line[5]                // A/D declining for 5 days
</code></pre>

<h4 id="breakout-confirmation-scanner">Breakout Confirmation Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Price &gt; Highest(Price, 50)               // 50-day breakout
AND AD_Line &gt; Highest(AD_Line, 50)      // A/D also at 50-day high
AND Volume &gt; 1.5 * SMA(Volume, 20)       // High volume
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="a/d-+-mfi-dual-volume-confirmation">A/D + MFI Dual Volume Confirmation</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FILTER:
&nbsp;&nbsp;AD_Line trending upward (AD &gt; SMA(AD, 20))

ENTRY:
&nbsp;&nbsp;MFI(14) &lt; 20 (Oversold)
&nbsp;&nbsp;MFI crosses above 20

LOGIC:
&nbsp;&nbsp;Long-term accumulation (A/D) + Short-term oversold (MFI)
&nbsp;&nbsp;= High probability bounce entry

STOP:
&nbsp;&nbsp;Below recent swing low

EXIT:
&nbsp;&nbsp;MFI &gt; 80 OR A/D turns down
</code></pre>

<h4 id="a/d-+-obv-dual-confirmation">A/D + OBV Dual Confirmation</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
BULLISH SETUP:
&nbsp;&nbsp;Both A/D and OBV making higher highs while price consolidates
&nbsp;&nbsp;→ Prepare for breakout

BEARISH SETUP:
&nbsp;&nbsp;Both A/D and OBV making lower lows while price rises
&nbsp;&nbsp;→ Distribution, prepare for breakdown

TRADE:
&nbsp;&nbsp;Enter on price breakout/breakdown confirmation
</code></pre>






                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#clv-interpretation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">CLV Interpretation</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#data-requirements" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Data Requirements</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal-divergence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal (Divergence)</a>
<a href="#primary-sell-signal-divergence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Sell Signal (Divergence)</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-"shadow-chart"-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Shadow Chart" Concept</a>
<a href="#hidden-accumulation-detection" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Hidden Accumulation Detection</a>
<a href="#distribution-into-strength" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Distribution Into Strength</a>
<a href="#professional-screening-technique" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Professional Screening Technique</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#why-divergence-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why Divergence Works</a>
<a href="#the-"smart-money"-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Smart Money" Edge</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"a/d-divergence-reversal"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "A/D Divergence Reversal"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2023-2025 I ant I Investigates. All rights reserved.
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "AccumulationDistributionLine",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = AccumulationDistributionLine.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/AccumulationDistributionLine.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "AccumulationDistributionLine", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = AccumulationDistributionLine.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>