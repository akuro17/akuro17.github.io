<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeltnerChannel - I ant I Investigates</title>
    <meta name="description" content="KeltnerChannel - Technical Indicator">
    <meta name="keywords" content="KeltnerChannel, technical indicator, stock analysis">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3375094177283762"
         crossorigin="anonymous"></script>
    <!-- Canonical URL -->
    <link rel="canonical" href="https://akuro17.github.io/indicators/keltnerchannel.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="KeltnerChannel - I ant I Investigates">
    <meta property="og:description" content="KeltnerChannel - Technical Indicator">
    <meta property="og:url" content="https://akuro17.github.io/indicators/keltnerchannel.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://akuro17.github.io/assets/images/ogp/keltnerchannel.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KeltnerChannel">
    <meta name="twitter:description" content="KeltnerChannel - Technical Indicator">
    <meta name="twitter:image" content="https://akuro17.github.io/assets/images/ogp/keltnerchannel.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
        {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "headline": "KeltnerChannel Technical Indicator",
            "description": "Keltner Channels are volatility-based envelopes set above and below an EMA using Average True Range (ATR), providing a stable framework for identifying trend breakouts and mean-reversion opportunities.",
            "image": "https://akuro17.github.io/assets/images/ogp/keltnerchannel.png",
            "author": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "url": "https://akuro17.github.io"
            },
            "publisher": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://akuro17.github.io/assets/images/logo.png"
                }
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://akuro17.github.io/indicators/keltnerchannel.html"
            },
            "about": {
                "@type": "SoftwareSourceCode",
                "name": "KeltnerChannel Indicator Code",
                "programmingLanguage": [
                    "C#",
                    "Python"
                ]
            }
        },
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://akuro17.github.io/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Indicators",
                    "item": "https://akuro17.github.io/indicators/"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "KeltnerChannel",
                    "item": "https://akuro17.github.io/indicators/keltnerchannel.html"
                }
            ]
        }
    ]
}
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">KeltnerChannel</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">KeltnerChannel</h1>
                <p class="text-lg text-slate-600 leading-relaxed">Keltner Channels are volatility-based envelopes set above and below an EMA using Average True Range (ATR), providing a stable framework for identifying trend breakouts and mean-reversion opportunities.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive OHLC Price Data"/];
B["Capture Price Range Components"];
C["Define Channel Parameters"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Calculate Trend Baseline via EMA"];
E["Measure True Range Volatility"];
F["Smooth Volatility via ATR"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
G["Apply Volatility Multiplier"];
H["Define Upper Boundary Offset"];
I["Define Lower Boundary Offset"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
J["Construct Upper Channel"];
K["Establish Center Line"];
L["Construct Lower Channel"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
M{"Price Position Assessment?"};
N["Above Upper = Breakout/Overbought"];
O["Below Lower = Breakdown/Oversold"];
P["At Center = Fair Value Zone"];
Q[/"Generate Volatility Channel Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Breakout| N;
M -->|Breakdown| O;
M -->|Center| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/KeltnerChannel.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="keltner-channel">Keltner Channel</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Keltner Channel  </p>
<p class="mb-4">Abbreviation: KC  </p>
<p class="mb-4">Category: Volatility Channel / Trend Overlay  </p>
<p class="mb-4">Creator: Chester W. Keltner (1960, original) / Linda Bradford Raschke (modern version)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: Keltner Channels are volatility-based envelopes set above and below an EMA using Average True Range (ATR), providing a stable framework for identifying trend breakouts and mean-reversion opportunities.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula-modern-raschke-version">Formula (Modern Raschke Version)</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Formula</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Center Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">$EMA_{20}(Close)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend baseline</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">True Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">$TR = \max(H-L, \</td><td class="px-4 py-2 border-b border-[#2a2e39]">H-C_{prev}\</td><td class="px-4 py-2 border-b border-[#2a2e39]">, \</td><td class="px-4 py-2 border-b border-[#2a2e39]">L-C_{prev}\</td><td class="px-4 py-2 border-b border-[#2a2e39]">)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single-bar volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td><td class="px-4 py-2 border-b border-[#2a2e39]">$ATR = EMA(TR, Period)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Smoothed volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Upper Band</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Center + (Multiplier \times ATR)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought/Breakout zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Lower Band</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Center - (Multiplier \times ATR)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold/Breakdown zone</td></tr>
</table></div>

<h3 id="true-range-calculation">True Range Calculation</h3>

<p class="mb-4">$$TR = \max\begin{cases} High - Low \\ |High - Close_{prev}| \\ |Low - Close_{prev}| \end{cases}$$</p>

<p class="mb-4">True Range accounts for overnight gaps, making it more robust than simple High-Low range.</p>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of Keltner Channels like traffic lanes on a highway. The center line (EMA) is the average speed of traffic. The outer bands (ATR-based) represent the fast lane and slow lane limits. When a car (price) breaks out of its lane, it signals aggressive acceleration (breakout) or deceleration (breakdown). Unlike Bollinger Bands (which adjust lane width dramatically), Keltner lanes stay relatively consistent—more like painted lines than flexible guardrails.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Industry standard for intermediate trend</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ATR Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">10 or 20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Raschke used 10; many platforms default to 20</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Multiplier</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.0 or 2.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5 is stricter; 2.0 is standard</td></tr>
</table></div>

<h3 id="alternative-settings">Alternative Settings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strategy</td><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td><td class="px-4 py-2 border-b border-[#2a2e39]">Multiplier</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use Case</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">10</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Filter only significant breaks</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">1.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Inner channel for trend continuation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">10</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fading extremes in ranges</td></tr>
</table></div>

<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">5-15 min</td><td class="px-4 py-2 border-b border-[#2a2e39]">May need shorter EMA (10-15)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard settings optimal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weekly</td><td class="px-4 py-2 border-b border-[#2a2e39]">Longer EMA (50) for major trends</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Continuation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Upper band holds as dynamic support in uptrends</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Clean breaks above/below bands signal momentum</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion in Ranges</td><td class="px-4 py-2 border-b border-[#2a2e39]">Band touches provide reversal zones</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR expands, but bands may not keep pace with spikes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Flat Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR contracts, causing frequent band touches</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap-Driven Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gaps may penetrate bands without continuation</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Forex — Excellent for currency trends</p>
<p class="mb-4">- Equities — Strong for trending stocks</p>
<p class="mb-4">- Futures — Classic commodity application</p>
<p class="mb-4">- Crypto — Works but bands may feel narrow during wild swings</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout Up</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close > Upper Band in uptrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout Down</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close < Lower Band in downtrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion (Long)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Touch Lower Band in range, reversal candle</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion (Short)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Touch Upper Band in range, reversal candle</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback Entry</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price returns to Center Line in trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Continuation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Channel Walk</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price hugs Upper Band in strong uptrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Continuation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
</table></div>

<h3 id="primary-buy-signal-breakout-mode">Primary Buy Signal (Breakout Mode)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Close &gt; Upper Band
AND ADX(14) &gt; 25 (Trend present)
AND Center Line slope &gt; 0
THEN → BUY (Momentum Breakout)
</code></pre>

<h3 id="primary-sell-signal-mean-reversion-mode">Primary Sell Signal (Mean Reversion Mode)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Price touches Upper Band
AND ADX(14) &lt; 20 (Range-bound)
AND Reversal candlestick pattern
THEN → SELL (Mean Reversion Short)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">Keltner Channels are dual-mode—they can be used for breakout trading OR mean reversion, but not both simultaneously. Use a mode switch indicator.</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>ADX > 30</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Enable Breakout Mode (trade band breaks)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>ADX < 20</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Enable Mean Reversion Mode (fade band touches)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Center slope > 0</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only long signals valid</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Center slope < 0</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only short signals valid</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ADX</td><td class="px-4 py-2 border-b border-[#2a2e39]">Determines Breakout vs. Mean Reversion mode</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Keltner + BB = "Squeeze" detection (TTM Squeeze)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Confirm overbought/oversold at band touches</td></tr>
</table></div>

<h3 id="example-combined-strategy-dual-mode">Example Combined Strategy (Dual-Mode)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
MODE SWITCH:
&nbsp;&nbsp;IF ADX(14) &gt; 30:
&nbsp;&nbsp;&nbsp;&nbsp;// BREAKOUT MODE
&nbsp;&nbsp;&nbsp;&nbsp;BUY when Close &gt; Upper Band AND Center rising
&nbsp;&nbsp;&nbsp;&nbsp;SELL when Close &lt; Lower Band AND Center falling
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;IF ADX(14) &lt; 20:
&nbsp;&nbsp;&nbsp;&nbsp;// MEAN REVERSION MODE
&nbsp;&nbsp;&nbsp;&nbsp;BUY when Price touches Lower Band + Hammer candle
&nbsp;&nbsp;&nbsp;&nbsp;SELL when Price touches Upper Band + Shooting Star
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA Center Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">10-12 bars</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ATR (for band width)</td><td class="px-4 py-2 border-b border-[#2a2e39]">10-20 bars</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">1-2 bars after break</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: Keltner Channels don't predict—they define current volatility boundaries. Price breaking a band is not predictive; it's descriptive of current momentum.</blockquote>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. The Gap Trap  </p>
<p class="mb-4">   Price gaps above Upper Band, triggers breakout buy, then immediately reverses. Require close above band, not just wick.</p>

<p class="mb-4">2. Band Walk Exhaustion  </p>
<p class="mb-4">   In strong trends, price "walks" along the Upper Band for weeks. Don't short band touches in a trending market.</p>

<p class="mb-4">3. Mean Reversion in a Trend  </p>
<p class="mb-4">   Attempt to short at Upper Band when ADX > 30 = disaster. Check ADX before mode selection.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- ADX Mode Switch: Only use mean reversion when ADX < 20</p>
<p class="mb-4">- Close Confirmation: Require candle close beyond band, not just touch</p>
<p class="mb-4">- Slope Filter: Never counter the Center Line slope direction</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-ttm-squeeze-concept">The TTM Squeeze Concept</h3>

<p class="mb-4">The "TTM Squeeze" is a famous strategy combining Keltner and Bollinger Bands:</p>
<p class="mb-4">- When Bollinger Bands contract *inside* Keltner Channels → Squeeze ON (extreme low volatility)</p>
<p class="mb-4">- When Bollinger Bands expand *outside* Keltner Channels → Squeeze FIRED (volatility explosion imminent)</p>

<p class="mb-4">Trade the direction of the first breakout after the squeeze fires.</p>

<h3 id="the-pullback-entry">The Pullback Entry</h3>

<p class="mb-4">In strong uptrends, price often:</p>
<p class="mb-4">1. Breaks above Upper Band (momentum confirmation)</p>
<p class="mb-4">2. Pulls back to Center Line (EMA 20)</p>
<p class="mb-4">3. Bounces from Center Line and continues upward</p>

<p class="mb-4">The Center Line becomes dynamic support. This pullback entry offers better risk/reward than chasing breakouts.</p>

<h3 id="channel-width-as-volatility-indicator">Channel Width as Volatility Indicator</h3>

<p class="mb-4">Plot the difference between Upper and Lower bands (Channel Width):</p>
<p class="mb-4">- Narrowing = Volatility contraction (squeeze forming)</p>
<p class="mb-4">- Expanding = Volatility expansion (trend accelerating)</p>

<p class="mb-4">Use width changes to anticipate regime shifts.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"Keltner Channels draw the volatility envelope around the trend—breaks above signal power, touches at the edge signal extremes, and the center line is where value lives."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">Keltner Channels answer: "What volatility boundaries contain current price action?"</p>

<p class="mb-4">Unlike Bollinger Bands (based on Standard Deviation), Keltner uses ATR—a measure of *range* rather than *dispersion*. This creates smoother, more stable bands that don't expand explosively on gap days.</p>

<p class="mb-4">The three lines create a framework:</p>
<p class="mb-4">- Upper Band: Price at the upper edge of normal volatility</p>
<p class="mb-4">- Center (EMA): The "fair value" or trend baseline</p>
<p class="mb-4">- Lower Band: Price at the lower edge of normal volatility</p>

<p class="mb-4">When price breaks outside, it's doing something statistically unusual—either beginning a new trend or hitting an exhaustion point.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="keltner-vs-bollinger">Keltner vs. Bollinger</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Metric</td><td class="px-4 py-2 border-b border-[#2a2e39]">Keltner (ATR)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger (StdDev)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Width Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stable</td><td class="px-4 py-2 border-b border-[#2a2e39]">Highly reactive</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap Response</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate widening</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme widening</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">False Touch Rate</td><td class="px-4 py-2 border-b border-[#2a2e39]">Lower</td><td class="px-4 py-2 border-b border-[#2a2e39]">Higher</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion</td><td class="px-4 py-2 border-b border-[#2a2e39]">More reliable</td><td class="px-4 py-2 border-b border-[#2a2e39]">Less reliable</td></tr>
</table></div>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">ATR-based bands provide more consistent boundaries because:</p>
<p class="mb-4">1. ATR uses True Range (gap-adjusted), not just intraday movement</p>
<p class="mb-4">2. ATR is smoothed (EMA), reducing spike impact</p>
<p class="mb-4">3. The multiplier (2.0-2.5) creates statistically meaningful boundaries</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"keltner-breakout-+-pullback"">Strategy Name: "Keltner Breakout + Pullback"</h3>

<p class="mb-4">Concept: Catch breakouts, then add on pullbacks.</p>

<p class="mb-4">Phase 1 - Initial Entry:</p>
<p class="mb-4">1. Price closes above Upper Band</p>
<p class="mb-4">2. ADX(14) > 25</p>
<p class="mb-4">3. Center Line slope > 0</p>
<p class="mb-4">4. →  BUY 50% position</p>

<p class="mb-4">Phase 2 - Add on Pullback:</p>
<p class="mb-4">1. Price pulls back to Center Line (EMA 20)</p>
<p class="mb-4">2. ADX still > 25</p>
<p class="mb-4">3. Center Line still rising</p>
<p class="mb-4">4. → BUY remaining 50%</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Primary Exit: Price closes below Center Line</p>
<p class="mb-4">2. Stop Loss: Below Lower Band (or 2× ATR)</p>
<p class="mb-4">3. Take Profit: Trail using Center Line as stop</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap and Fade</td><td class="px-4 py-2 border-b border-[#2a2e39]">Morning gap above band, reverses by close</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wait for close above, not just open</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Mode Error</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion trade in trending market</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strict ADX mode switching</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Width Collapse</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ultra-low volatility makes bands meaningless</td><td class="px-4 py-2 border-b border-[#2a2e39]">Check ATR level before trading</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Chop Zone</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price oscillates between bands frequently</td><td class="px-4 py-2 border-b border-[#2a2e39]">Require ADX > 20 for any trade</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">1. Mode Confusion  </p>
<p class="mb-4">   Switching between breakout and mean reversion strategies randomly leads to losses. Commit to a mode per ADX reading.</p>

<p class="mb-4">2. Chasing Band Walks  </p>
<p class="mb-4">   In strong trends, price hugs Upper Band for weeks. Shorting repeatedly destroys capital.</p>

<p class="mb-4">3. Ignoring the Slope  </p>
<p class="mb-4">   The Center Line slope is the trend direction. Trading against it fails.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Chester W. Keltner (1909–1998) introduced the original concept in 1960. Linda Bradford Raschke, a celebrated futures trader, modernized the indicator by replacing SMA with EMA and simple range with ATR. The modern version is sometimes called the "Raschke Keltner Channel."</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Component — Center line</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ATR (True Range)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Component — Band width</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Alternative volatility bands</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">TTM Squeeze</td><td class="px-4 py-2 border-b border-[#2a2e39]">Combination — Keltner + Bollinger</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *Street Smarts* — Linda Bradford Raschke and Larry Connors</p>
<p class="mb-4">2. *How to Make Money in Commodities* — Chester Keltner</p>
<p class="mb-4">3. *Technical Analysis Using Multiple Timeframes* — Brian Shannon</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">Keltner Channel</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Donchian Channel</td><td class="px-4 py-2 border-b border-[#2a2e39]">Envelope</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Width Basis</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Deviation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Highest High/Lowest Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fixed %</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Center Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Midpoint</td><td class="px-4 py-2 border-b border-[#2a2e39]">SMA/EMA</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Reactivity</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best Use</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend + Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Breakouts</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- Keltner — Balanced trend/volatility analysis; pullback entries</p>
<p class="mb-4">- Bollinger — Volatility expansion/contraction; squeeze detection</p>
<p class="mb-4">- Donchian — Pure price breakouts (turtle trading)</p>
<p class="mb-4">- Envelope — Simple mean reversion percentage bands</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ADX Level</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mode</td><td class="px-4 py-2 border-b border-[#2a2e39]">Upper Band Action</td><td class="px-4 py-2 border-b border-[#2a2e39]">Lower Band Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 35</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend continuation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Counter-trend warning</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">25-35</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate Trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout entry</td><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback buy zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">20-25</td><td class="px-4 py-2 border-b border-[#2a2e39]">Transition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Caution</td><td class="px-4 py-2 border-b border-[#2a2e39]">Caution</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion short</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion long</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="breakout-buy-signal">Breakout Buy Signal</h4>

<p class="mb-4">This signal fires when price closes above the Upper Band with trend confirmation from ADX and rising center line. The triple confirmation ensures breakouts have genuine momentum behind them—not just noise spikes. This is the core Keltner breakout strategy used by Linda Raschke and other futures traders.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def keltner_breakout_buy(close, upper_band, adx, center_slope):
&nbsp;&nbsp;&nbsp;&nbsp;above_band = close &gt; upper_band
&nbsp;&nbsp;&nbsp;&nbsp;trend_present = adx &gt; 25
&nbsp;&nbsp;&nbsp;&nbsp;center_rising = center_slope &gt; 0
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return above_band and trend_present and center_rising
</code></pre>

<h4 id="mean-reversion-buy-signal">Mean Reversion Buy Signal</h4>

<p class="mb-4">This pattern identifies buying opportunities when price touches the Lower Band in range-bound markets (ADX < 20). Combined with a reversal candlestick pattern, it signals that selling pressure is exhausted. Critical: Only use in range-bound markets—fading bands in trends leads to significant losses.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def keltner_reversion_buy(low, lower_band, adx, reversal_candle):
&nbsp;&nbsp;&nbsp;&nbsp;touch_lower = low &lt;= lower_band
&nbsp;&nbsp;&nbsp;&nbsp;range_market = adx &lt; 20
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return touch_lower and range_market and reversal_candle
</code></pre>

<h4 id="pullback-entry-signal">Pullback Entry Signal</h4>

<p class="mb-4">This signal identifies re-entry opportunities in established uptrends when price retraces to the center line (EMA). The center line acts as dynamic support in strong trends. This pullback strategy offers superior risk/reward compared to chasing breakout extensions.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def keltner_pullback_buy(close, center, upper_band, center_prev, adx):
&nbsp;&nbsp;&nbsp;&nbsp;in_uptrend = center &gt; center_prev and close &gt; upper_band_recent
&nbsp;&nbsp;&nbsp;&nbsp;at_center = abs(close - center) / center &lt; 0.01  # Within 1%
&nbsp;&nbsp;&nbsp;&nbsp;trend_valid = adx &gt; 25
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return in_uptrend and at_center and trend_valid
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="breakout-scanner">Breakout Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Close &gt; UpperKeltner(20, 10, 2.5)
AND ADX(14) &gt; 25
AND EMA(20) &gt; EMA(20)[1]  // Center rising
AND Volume &gt; SMA(Volume, 20) * 1.5
</code></pre>

<h4 id="squeeze-scanner">Squeeze Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
BollingerBand_Upper &lt; KeltnerChannel_Upper
AND BollingerBand_Lower &gt; KeltnerChannel_Lower
// Bollinger inside Keltner = Squeeze ON
</code></pre>

<h4 id="mean-reversion-setup">Mean Reversion Setup</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Low &lt; LowerKeltner(20, 10, 2.0)
AND ADX(14) &lt; 20
AND RSI(14) &lt; 30
// Oversold at lower band in range
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="keltner-+-adx-dual-mode-strategy">Keltner + ADX Dual Mode Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
CALCULATE:
&nbsp;&nbsp;ADX(14)
&nbsp;&nbsp;KeltnerChannel(20, 10, 2.0)
&nbsp;&nbsp;
IF ADX &gt; 30:
&nbsp;&nbsp;// BREAKOUT MODE
&nbsp;&nbsp;LONG when Close &gt; Upper Band
&nbsp;&nbsp;STOP below Center Line
&nbsp;&nbsp;
IF ADX &lt; 20:
&nbsp;&nbsp;// MEAN REVERSION MODE
&nbsp;&nbsp;LONG when Low touches Lower Band + Hammer
&nbsp;&nbsp;TARGET Center Line
&nbsp;&nbsp;STOP 1 ATR below Lower Band
</code></pre>

<h4 id="keltner-+-bollinger-squeeze-strategy">Keltner + Bollinger Squeeze Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SQUEEZE_ON:
&nbsp;&nbsp;BB_Upper &lt; KC_Upper AND BB_Lower &gt; KC_Lower
&nbsp;&nbsp;
SQUEEZE_FIRE:
&nbsp;&nbsp;BB_Upper &gt; KC_Upper OR BB_Lower &lt; KC_Lower
&nbsp;&nbsp;
ENTRY:
&nbsp;&nbsp;When Squeeze fires, enter direction of first breakout
&nbsp;&nbsp;
CONFIRMATION:
&nbsp;&nbsp;ADX rising from below 20
</code></pre>





                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula-modern-raschke-version" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula (Modern Raschke Version)</a>
<a href="#true-range-calculation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">True Range Calculation</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#alternative-settings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Alternative Settings</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal-breakout-mode" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal (Breakout Mode)</a>
<a href="#primary-sell-signal-mean-reversion-mode" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Sell Signal (Mean Reversion Mode)</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy-dual-mode" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy (Dual-Mode)</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-ttm-squeeze-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The TTM Squeeze Concept</a>
<a href="#the-pullback-entry" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The Pullback Entry</a>
<a href="#channel-width-as-volatility-indicator" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Channel Width as Volatility Indicator</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#keltner-vs-bollinger" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Keltner vs. Bollinger</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"keltner-breakout-+-pullback"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Keltner Breakout + Pullback"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2026 I ant I Investigates
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "KeltnerChannel",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const emaPeriod = params.emaPeriod || 20;
                const atrPeriod = params.atrPeriod || 10;
                const multiplier = params.multiplier || 2.0;
                const result = KeltnerChannel.calculate(data, emaPeriod, atrPeriod, multiplier);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/KeltnerChannel.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "emaPeriod", "label": "Emaperiod (20)", "type": "number", "value": 20, "min": 2, "max": 100}, {"id": "atrPeriod", "label": "Atrperiod (10)", "type": "number", "value": 10, "min": 2, "max": 100}, {"id": "multiplier", "label": "Multiplier (2.0)", "type": "number", "value": 2.0, "min": 0.5, "max": 5.0, "step": 0.1}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"upper": {"label": "Upper Band", "color": "#22c55e", "type": "line"}, "middle": {"label": "Middle (EMA)", "color": "#3b82f6", "type": "line"}, "lower": {"label": "Lower Band", "color": "#ef4444", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const emaPeriod = params.emaPeriod || 20;
                const atrPeriod = params.atrPeriod || 10;
                const multiplier = params.multiplier || 2.0;
                const result = KeltnerChannel.calculate(data, emaPeriod, atrPeriod, multiplier);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>