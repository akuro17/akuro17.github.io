<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkinsonVolatilityIndicator - I ant I Investigates</title>
    <meta name="description" content="ParkinsonVolatilityIndicator - Technical Indicator">
    <meta name="keywords" content="ParkinsonVolatilityIndicator, technical indicator, stock analysis">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3375094177283762"
         crossorigin="anonymous"></script>
    <!-- Canonical URL -->
    <link rel="canonical" href="https://akuro17.github.io/indicators/parkinsonvolatilityindicator.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="ParkinsonVolatilityIndicator - I ant I Investigates">
    <meta property="og:description" content="ParkinsonVolatilityIndicator - Technical Indicator">
    <meta property="og:url" content="https://akuro17.github.io/indicators/parkinsonvolatilityindicator.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://akuro17.github.io/assets/images/ogp/parkinsonvolatilityindicator.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ParkinsonVolatilityIndicator">
    <meta name="twitter:description" content="ParkinsonVolatilityIndicator - Technical Indicator">
    <meta name="twitter:image" content="https://akuro17.github.io/assets/images/ogp/parkinsonvolatilityindicator.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
        {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "headline": "ParkinsonVolatilityIndicator Technical Indicator",
            "description": "Parkinson Volatility uses the daily high-low range instead of closing prices to provide a more efficient estimate of asset volatility, capturing intraday information that close-to-close methods miss.",
            "image": "https://akuro17.github.io/assets/images/ogp/parkinsonvolatilityindicator.png",
            "author": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "url": "https://akuro17.github.io"
            },
            "publisher": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://akuro17.github.io/assets/images/logo.png"
                }
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://akuro17.github.io/indicators/parkinsonvolatilityindicator.html"
            },
            "about": {
                "@type": "SoftwareSourceCode",
                "name": "ParkinsonVolatilityIndicator Indicator Code",
                "programmingLanguage": [
                    "C#",
                    "Python"
                ]
            }
        },
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://akuro17.github.io/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Indicators",
                    "item": "https://akuro17.github.io/indicators/"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "ParkinsonVolatilityIndicator",
                    "item": "https://akuro17.github.io/indicators/parkinsonvolatilityindicator.html"
                }
            ]
        }
    ]
}
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../" class="flex items-center gap-2" id="logo">
                            <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-indigo-600 text-xs font-semibold text-white font-mono">I</span>
                            <div class="flex flex-col">
                                <span class="text-sm font-semibold tracking-tight">I ant I Investigates</span>
                                <span class="text-xs text-slate-500">Stock Analysis Lab</span>
                            </div>
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">ParkinsonVolatilityIndicator</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center gap-6 text-sm font-medium">
                    <a href="../" class="text-slate-600 hover:text-indigo-600 transition-colors">Home</a>
                    <a href="./" class="font-semibold text-indigo-600" aria-current="page">Indicators</a>
                    <a href="../screening/" class="text-slate-600 hover:text-indigo-600 transition-colors">Screening</a>
                    <span class="text-slate-300 font-medium cursor-not-allowed">Software</span>
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">ParkinsonVolatilityIndicator</h1>
                <p class="text-lg text-slate-600 leading-relaxed">Parkinson Volatility uses the daily high-low range instead of closing prices to provide a more efficient estimate of asset volatility, capturing intraday information that close-to-close methods miss.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive Price Data Stream"/];
B["Capture Daily High/Low Range"];
C["Define Measurement Period"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Calculate Daily Price Swing"];
E["Measure Intraday Volatility"];
F["Aggregate Range Information"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
G["Apply Parkinson Formula"];
H["Normalize for Efficiency"];
I["Annualize for Comparison"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
J["Track Volatility Level"];
K["Identify Compression Zones"];
L["Detect Expansion Phases"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
M{"Volatility Regime Assessment?"};
N["Below 10th Percentile = Squeeze Setup"];
O["Above 90th Percentile = Panic Zone"];
P["Normal Range = Standard Regime"];
Q[/"Generate Volatility Regime Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Compressed| N;
M -->|Extreme| O;
M -->|Normal| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/ParkinsonVolatilityIndicator.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="parkinson-volatility-indicator">Parkinson Volatility Indicator</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Parkinson Volatility Estimator  </p>
<p class="mb-4">Abbreviation: Parkinson Vol, PARK  </p>
<p class="mb-4">Category: Volatility / Risk Measurement  </p>
<p class="mb-4">Creator: Michael Parkinson (1980)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: Parkinson Volatility uses the daily high-low range instead of closing prices to provide a more efficient estimate of asset volatility, capturing intraday information that close-to-close methods miss.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">$$\sigma_{Parkinson} = \sqrt{ \frac{1}{4n \ln(2)} \sum_{t=1}^{n} \left( \ln \frac{H_t}{L_t} \right)^2 }$$</p>

<p class="mb-4">Annualized Version:</p>
<p class="mb-4">$$\sigma_{Annual} = \sigma_{Parkinson} \times \sqrt{252} \times 100$$</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Variable</td><td class="px-4 py-2 border-b border-[#2a2e39]">Meaning</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">$H_t$</td><td class="px-4 py-2 border-b border-[#2a2e39]">High price on day $t$</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">$L_t$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low price on day $t$</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">$n$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Number of periods in calculation window</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">$\frac{1}{4\ln(2)}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normalizing constant (~0.361)</td></tr>
</table></div>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Formula</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">$ratio = \frac{High}{Low}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily range ratio</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">$logRatio = \ln(ratio)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Logarithmic return of range</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">$logRatio^2$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Squared for variance</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">$\frac{1}{4n\ln(2)} \sum logRatio^2$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Average variance</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5</td><td class="px-4 py-2 border-b border-[#2a2e39]">$\sqrt{variance \times 252} \times 100$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Annualized percentage</td></tr>
</table></div>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of Parkinson Volatility like measuring how wildly a pendulum swings during the day, rather than just where it stops at night. Traditional volatility (close-to-close) only looks at where the pendulum ends. Parkinson looks at the full arc—how high and how low it went. This captures the "energy" of the market even if the closing price appears calm.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">One trading month; balances responsiveness with stability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Annualization</td><td class="px-4 py-2 border-b border-[#2a2e39]">√252</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard for daily data (252 trading days/year)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Output</td><td class="px-4 py-2 border-b border-[#2a2e39]">Percentage</td><td class="px-4 py-2 border-b border-[#2a2e39]">Multiplied by 100 for readability</td></tr>
</table></div>

<h3 id="alternative-settings">Alternative Settings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Use Case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Short-Term Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">10</td><td class="px-4 py-2 border-b border-[#2a2e39]">More sensitive to recent volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard balanced approach</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">60-90</td><td class="px-4 py-2 border-b border-[#2a2e39]">Captures medium-term volatility cycles</td></tr>
</table></div>

<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">5-min to 1-hour</td><td class="px-4 py-2 border-b border-[#2a2e39]">Apply to intraday data for session volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily/Weekly</td><td class="px-4 py-2 border-b border-[#2a2e39]">For regime identification</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Continuous Markets (Forex/Crypto)</td><td class="px-4 py-2 border-b border-[#2a2e39]">No overnight gaps; Parkinson assumption holds</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Intraday Volatility Assessment</td><td class="px-4 py-2 border-b border-[#2a2e39]">Captures range information close-to-close misses</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility Regime Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Identifies expansion/contraction cycles</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap-Heavy Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Underestimates risk; ignores overnight jumps</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Thin Trading Sessions</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low high-low range despite high true volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Flash Crashes/Spikes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single-bar extremes distort calculations</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Forex — Continuous 24h trading; ideal for Parkinson</p>
<p class="mb-4">- Crypto — 24/7 markets; excellent fit</p>
<p class="mb-4">- Equities — Works but underestimates gap risk</p>
<p class="mb-4">- Futures — Good but watch for session breaks</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility Expansion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Vol crosses above MA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout Likely</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility Contraction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Vol falls to 10th percentile</td><td class="px-4 py-2 border-b border-[#2a2e39]">Squeeze/Breakout Prep</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Panic Exhaustion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Vol spikes > 95th percentile then drops</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bottom Likely</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Complacency Top</td><td class="px-4 py-2 border-b border-[#2a2e39]">Vol at 5th percentile</td><td class="px-4 py-2 border-b border-[#2a2e39]">Top Warning</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
</table></div>

<h3 id="primary-buy-signal-volatility-strategies">Primary Buy Signal (Volatility Strategies)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF ParkinsonVol &lt; Lowest(ParkinsonVol, 100) × 1.1     // Near 100-day low
AND Bollinger_Bandwidth &lt; 0.10                         // Price also compressed
THEN → PREPARE FOR BREAKOUT (Buy volatility / straddles)
</code></pre>

<h3 id="volatility-regime-signal">Volatility Regime Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF ParkinsonVol &gt; SMA(ParkinsonVol, 20) × 1.5        // Spike &gt; 50% above average
AND ParkinsonVol &lt; ParkinsonVol[1]                    // Starting to decline
THEN → PANIC EXHAUSTION (Look for bounce)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">Parkinson Volatility excels as a regime filter for adjusting position sizing and strategy selection based on market conditions.</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Vol < 10th Percentile</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">"Calm before storm"; prepare for explosion</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Vol > 90th Percentile</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme fear; potential reversal zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Vol Rising</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Tighten stops; reduce position sizes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Vol Falling</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Widen stops; increase position sizes</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Keltner Channels</td><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson for squeeze; Keltner for direction</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Compare Parkinson squeeze to Band squeeze</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ADX</td><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson for volatility level; ADX for trend strength</td></tr>
</table></div>

<h3 id="example-combined-strategy">Example Combined Strategy</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
VOLATILITY SQUEEZE SETUP:
&nbsp;&nbsp;ParkinsonVol &lt; Lowest(ParkinsonVol, 100) × 1.1    // Parkinson compressed
&nbsp;&nbsp;Bollinger_Bandwidth &lt; 0.10                          // Bands also squeezed

DIRECTION FILTER:
&nbsp;&nbsp;Price &gt; 50-EMA = Look for Long breakout
&nbsp;&nbsp;
ENTRY:
&nbsp;&nbsp;Price closes above Upper Bollinger Band
&nbsp;&nbsp;AND ParkinsonVol starts rising

EXIT:
&nbsp;&nbsp;ParkinsonVol doubles from squeeze low (profit target)
&nbsp;&nbsp;OR Price closes below entry bar low (stop loss)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period bars (default 20)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Response</td><td class="px-4 py-2 border-b border-[#2a2e39]">Same-day (uses current bar's range)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gradual; follows 20-bar average</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: Parkinson systematically underestimates risk in gap-prone markets. For equities during earnings season, use Garman-Klass or Yang-Zhang estimators that account for opening gaps.</blockquote>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. Gap Blindness  </p>
<p class="mb-4">   Stock gaps down 20% on earnings; Parkinson only sees narrow intraday range.</p>

<p class="mb-4">2. Holiday Compression  </p>
<p class="mb-4">   Low high-low range on half-days creates artificially low volatility readings.</p>

<p class="mb-4">3. Single-Bar Spike  </p>
<p class="mb-4">   Flash crash creates one extreme bar, distorting the entire period calculation.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- For Equities: Switch to Garman-Klass during earnings seasons</p>
<p class="mb-4">- Use Percentile Ranking: Compare current value to historical distribution</p>
<p class="mb-4">- Ignore Extreme Single Bars: Cap outliers at 3 standard deviations</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="efficiency-advantage">Efficiency Advantage</h3>

<p class="mb-4">Parkinson demonstrated that his estimator is 2.5 to 5 times more efficient than close-to-close volatility. This means you need far less data to achieve the same statistical accuracy. A 10-day Parkinson estimate is roughly equivalent to a 25-50-day close-to-close estimate.</p>

<h3 id="the-volatility-squeeze-trade">The Volatility Squeeze Trade</h3>

<p class="mb-4">When Parkinson Volatility falls to its lowest 10th percentile over the past year:</p>
<p class="mb-4">1. Volatility is compressed (energy stored)</p>
<p class="mb-4">2. A breakout is statistically imminent</p>
<p class="mb-4">3. Direction unknown—prepare for both</p>
<p class="mb-4">4. Use Keltner Channels or Bollinger Bands to capture the directional move</p>

<h3 id="volatility-mean-reversion">Volatility Mean Reversion</h3>

<p class="mb-4">Unlike price, volatility is strongly mean-reverting:</p>
<p class="mb-4">- Extreme high volatility → Will decline</p>
<p class="mb-4">- Extreme low volatility → Will expand</p>

<p class="mb-4">Trade this by:</p>
<p class="mb-4">- Selling options when Parkinson spikes (volatility crush coming)</p>
<p class="mb-4">- Buying options when Parkinson is at lows (expansion coming)</p>

<h3 id="parkinson-vs-implied-volatility">Parkinson vs. Implied Volatility</h3>

<p class="mb-4">Compare Parkinson (realized/historical) to Implied Volatility from options:</p>
<p class="mb-4">- Parkinson > IV: Realized volatility exceeds expectations → Buy options</p>
<p class="mb-4">- Parkinson < IV: Implied exceeds realized → Sell options</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"Parkinson Volatility is your market's blood pressure reading—it captures the intraday stress that closing prices hide, revealing squeezed markets about to explode and panicked markets about to calm."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">Parkinson Volatility answers: "How wild was the ride today, not just where did we end up?"</p>

<p class="mb-4">Traditional volatility uses closing prices, which ignore the journey. A stock could swing wildly from $50 to $60 to $45 and close at $50—close-to-close volatility sees zero movement. Parkinson sees the full $15 range.</p>

<p class="mb-4">The formula derives from random walk theory. If prices follow a geometric Brownian motion, the range (high-low) contains information about variance. The constant $\frac{1}{4\ln(2)}$ normalizes this relationship so Parkinson volatility is directly comparable to close-to-close volatility.</p>

<p class="mb-4">Intuition:</p>
<p class="mb-4">- Wide daily ranges → High volatility</p>
<p class="mb-4">- Narrow daily ranges → Low volatility</p>
<p class="mb-4">- Consistent over time → Stable regime</p>
<p class="mb-4">- Expanding ranges → Regime shift (risk-on or panic)</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="backtest-evidence">Backtest Evidence</h3>

<p class="mb-4">Comparative efficiency studies:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Estimator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relative Efficiency</td><td class="px-4 py-2 border-b border-[#2a2e39]">Data Required for Same Precision</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Close-to-Close</td><td class="px-4 py-2 border-b border-[#2a2e39]">1.0x</td><td class="px-4 py-2 border-b border-[#2a2e39]">100 days</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5x</td><td class="px-4 py-2 border-b border-[#2a2e39]">40 days</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Garman-Klass</td><td class="px-4 py-2 border-b border-[#2a2e39]">5.2x</td><td class="px-4 py-2 border-b border-[#2a2e39]">19 days</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Yang-Zhang</td><td class="px-4 py-2 border-b border-[#2a2e39]">7.4x</td><td class="px-4 py-2 border-b border-[#2a2e39]">14 days</td></tr>
</table></div>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">The edge comes from information efficiency. The high-low range encapsulates all intraday price movements, while the close-to-close method discards 99%+ of tick data. Parkinson captures this "lost" information.</p>

<h3 id="academic-reference">Academic Reference</h3>

<p class="mb-4">Michael Parkinson published "The Extreme Value Method for Estimating the Variance of the Rate of Return" in the *Journal of Business* (1980). His mathematical proof showed that range-based estimators are theoretically more efficient than close-based methods for Brownian motion processes.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"volatility-squeeze-explosion"">Strategy Name: "Volatility Squeeze Explosion"</h3>

<p class="mb-4">Concept: Position for breakouts when Parkinson Volatility hits historical lows.</p>

<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. ParkinsonVol(20) < 10th percentile of past 252 days</p>
<p class="mb-4">2. Bollinger Band Width < 0.10 (price also compressed)</p>
<p class="mb-4">3. ADX(14) < 20 (no trend = energy building)</p>

<p class="mb-4">Entry Trigger:</p>
<p class="mb-4">- Price closes outside Bollinger Bands</p>
<p class="mb-4">- Parkinson Volatility starts rising (confirmation)</p>

<p class="mb-4">Direction:</p>
<p class="mb-4">- Long if break above upper band</p>
<p class="mb-4">- Short if break below lower band</p>

<p class="mb-4">Position Sizing:</p>
<p class="mb-4">- Reduce size (volatility about to expand = bigger swings)</p>
<p class="mb-4">- Use 1% risk per trade maximum</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Profit Target: 2× ATR(14) from entry</p>
<p class="mb-4">2. Stop Loss: 1× ATR(14) from entry (2:1 ratio)</p>
<p class="mb-4">3. Time Stop: Exit if no follow-through in 5 bars</p>

<p class="mb-4">Example:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Stock XYZ shows:
&nbsp;&nbsp;ParkinsonVol(20) = 12% (Year low is 10%, 10th pctl = 11%) ✓
&nbsp;&nbsp;BBWidth = 0.08 ✓
&nbsp;&nbsp;ADX = 15 ✓
&nbsp;&nbsp;
Price breaks above upper BB at $52
ParkinsonVol starts rising → ENTRY Long

Stop: $52 - 1×ATR = $50.50
Target: $52 + 2×ATR = $55
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gap Underestimation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson ignores overnight gaps</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use Garman-Klass for gap-prone assets</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Illiquid Sessions</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low range on thin trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Check average volume alongside</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Flash Crash Distortion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single extreme bar skews entire calculation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Apply outlier capping</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Holiday Effects</td><td class="px-4 py-2 border-b border-[#2a2e39]">Half-days create artificially low readings</td><td class="px-4 py-2 border-b border-[#2a2e39]">Exclude or flag anomalies</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">1. The "It's Calm" Trap  </p>
<p class="mb-4">   Low Parkinson feels safe, but it means explosive moves are coming—just unknown direction.</p>

<p class="mb-4">2. Over-Reliance on Historical Percentiles  </p>
<p class="mb-4">   Volatility regimes shift; what was 90th percentile in 2019 might be average in 2022.</p>

<p class="mb-4">3. Ignoring Gap Risk  </p>
<p class="mb-4">   Parkinson says 15% volatility, but gaps could deliver 25% overnight moves.</p>

<h3 id="common-misinterpretations">Common Misinterpretations</h3>

<p class="mb-4">- "Low volatility = safe" → It means explosion is coming</p>
<p class="mb-4">- "Parkinson captures all risk" → It ignores gaps entirely</p>
<p class="mb-4">- "Works the same on all assets" → Equities need gap adjustment</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Michael Parkinson was a physicist who applied statistical methods to finance. His 1980 paper in the *Journal of Business* pioneered range-based volatility estimation. The Parkinson estimator remains foundational in quantitative finance.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Garman-Klass</td><td class="px-4 py-2 border-b border-[#2a2e39]">Evolution — Adds open/close for gap handling</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Yang-Zhang</td><td class="px-4 py-2 border-b border-[#2a2e39]">Evolution — Most efficient; handles gaps and drift</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Wilder's range-based volatility (True Range)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Historical Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Parent concept — Close-to-close standard deviation</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *The Extreme Value Method for Estimating Variance* — Michael Parkinson (1980)</p>
<p class="mb-4">2. *Volatility and Correlation* — Riccardo Rebonato</p>
<p class="mb-4">3. *Options, Futures, and Other Derivatives* — John Hull</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson</td><td class="px-4 py-2 border-b border-[#2a2e39]">Garman-Klass</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yang-Zhang</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Uses H-L Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Uses Open</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Uses Close</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Handles Gaps</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">Partial</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Efficiency</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5x</td><td class="px-4 py-2 border-b border-[#2a2e39]">5.2x</td><td class="px-4 py-2 border-b border-[#2a2e39]">7.4x</td><td class="px-4 py-2 border-b border-[#2a2e39]">N/A</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Continuous markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">General use</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gap-heavy markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trailing stops</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- Parkinson — Forex, Crypto, or when you only have high/low data</p>
<p class="mb-4">- Garman-Klass — General equity use with moderate gaps</p>
<p class="mb-4">- Yang-Zhang — Earnings seasons, gap-heavy environments</p>
<p class="mb-4">- ATR — Trailing stop calculation and position sizing</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parkinson Percentile</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 5th</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme compression</td><td class="px-4 py-2 border-b border-[#2a2e39]">Maximum breakout alert; reduce size</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5th-20th</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare for expansion; position small</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">20th-80th</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normal regime</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard position sizing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">80th-95th</td><td class="px-4 py-2 border-b border-[#2a2e39]">Elevated volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Tighten stops; reduce positions</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 95th</td><td class="px-4 py-2 border-b border-[#2a2e39]">Panic/Extreme</td><td class="px-4 py-2 border-b border-[#2a2e39]">Potential reversal; look for exhaustion</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="volatility-expansion-signal">Volatility Expansion Signal</h4>
<p class="mb-4">This signal detects the transition from low to high volatility regimes, often preceding significant directional moves. When Parkinson crosses above its moving average after being below, it indicates the market is waking up from compression. This is a key alert to prepare for breakouts and adjust position sizing for increased price swings.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def vol_expansion_signal(parkinson, parkinson_ma):
&nbsp;&nbsp;&nbsp;&nbsp;condition_1 = parkinson &gt; parkinson_ma               # Above average
&nbsp;&nbsp;&nbsp;&nbsp;condition_2 = parkinson &gt; parkinson_prev             # Rising
&nbsp;&nbsp;&nbsp;&nbsp;condition_3 = parkinson_prev &lt; parkinson_ma          # Just crossed above
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return all([condition_1, condition_2, condition_3])
</code></pre>

<h4 id="volatility-squeeze-signal">Volatility Squeeze Signal</h4>
<p class="mb-4">When Parkinson falls below its 10th percentile over a year, volatility is extremely compressed—like energy stored in a coiled spring. History shows extreme compression is unsustainable and a volatility explosion is statistically imminent, though direction remains unknown. This setup is ideal for straddle strategies or preparing for directional breakouts with Keltner/Bollinger Bands.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def vol_squeeze_signal(parkinson, percentile_threshold=10):
&nbsp;&nbsp;&nbsp;&nbsp;percentile = calculate_percentile(parkinson, lookback=252)
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return percentile &lt; percentile_threshold
</code></pre>

<h4 id="panic-exhaustion-signal">Panic Exhaustion Signal</h4>
<p class="mb-4">When Parkinson spikes to extreme highs (above 95th percentile) and begins to decline, it signals that panic selling is exhausting itself. Volatility is strongly mean-reverting, so extreme spikes reliably contract. This setup identifies potential market bottoms and is valuable for options selling strategies or contrarian long entries.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def panic_exhaustion_signal(parkinson):
&nbsp;&nbsp;&nbsp;&nbsp;percentile = calculate_percentile(parkinson, lookback=252)
&nbsp;&nbsp;&nbsp;&nbsp;turning_down = parkinson &lt; parkinson_prev
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return percentile &gt; 95 and turning_down
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="volatility-squeeze-scan">Volatility Squeeze Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ParkinsonVol(20) &lt; Lowest(ParkinsonVol, 100) × 1.1
AND Bollinger_Bandwidth(20, 2) &lt; 0.10
</code></pre>

<h4 id="panic-bottom-scan">Panic Bottom Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ParkinsonVol(20) &gt; Highest(ParkinsonVol, 100) × 0.9
AND ParkinsonVol &lt; ParkinsonVol[1]
AND RSI(14) &lt; 30
</code></pre>

<h4 id="volatility-regime-change-scan">Volatility Regime Change Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ParkinsonVol &gt; SMA(ParkinsonVol, 20)
AND ParkinsonVol[5] &lt; SMA(ParkinsonVol, 20)[5]
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="parkinson-+-keltner-channel-breakout">Parkinson + Keltner Channel Breakout</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SETUP:
&nbsp;&nbsp;ParkinsonVol &lt; 10th percentile (252 days)

ENTRY:
&nbsp;&nbsp;Price closes above Upper Keltner Channel
&nbsp;&nbsp;AND ParkinsonVol &gt; ParkinsonVol[1]
&nbsp;&nbsp;
DIRECTION:
&nbsp;&nbsp;LONG when price breaks UP
&nbsp;&nbsp;SHORT when price breaks DOWN

EXIT:
&nbsp;&nbsp;1.5× ATR(14) profit target
&nbsp;&nbsp;OR ParkinsonVol spikes &gt; 90th percentile (exhaustion)
</code></pre>

<h4 id="volatility-mean-reversion-strategy">Volatility Mean Reversion Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FOR OPTIONS TRADERS:

IF ParkinsonVol &gt; 95th percentile:
&nbsp;&nbsp;ACTION: SELL volatility (short straddles/strangles)
&nbsp;&nbsp;REASON: Volatility will mean-revert down
&nbsp;&nbsp;
IF ParkinsonVol &lt; 5th percentile:
&nbsp;&nbsp;ACTION: BUY volatility (long straddles/strangles)
&nbsp;&nbsp;REASON: Volatility will mean-revert up
</code></pre>





                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#alternative-settings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Alternative Settings</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal-volatility-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal (Volatility Strategies)</a>
<a href="#volatility-regime-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Volatility Regime Signal</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#efficiency-advantage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Efficiency Advantage</a>
<a href="#the-volatility-squeeze-trade" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The Volatility Squeeze Trade</a>
<a href="#volatility-mean-reversion" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Volatility Mean Reversion</a>
<a href="#parkinson-vs-implied-volatility" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parkinson vs. Implied Volatility</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#backtest-evidence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Backtest Evidence</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#academic-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Academic Reference</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"volatility-squeeze-explosion"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Volatility Squeeze Explosion"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer id="site-footer" class="border-t border-slate-200 bg-white mt-auto">
        <div class="mx-auto flex max-w-5xl flex-col gap-3 px-4 py-8 text-xs text-slate-500 sm:flex-row sm:items-center sm:justify-between">
            <div class="flex items-center gap-2">
                <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 text-[10px] font-semibold text-white font-mono">I</span>
                <span class="text-[11px]">&copy; 2026 I ant I Investigates</span>
            </div>
            <div class="flex flex-wrap items-center gap-4">
                <span class="text-[11px]">Static Documents / No Tracking</span>
                <nav class="flex gap-4">
                    <a href="./" class="text-[11px] font-semibold text-indigo-600" aria-current="page">Indicators</a>
                    <a href="../screening/" class="text-[11px] text-slate-500 hover:text-indigo-600 transition-colors">Screening</a>
                    <span class="text-[11px] text-slate-300 cursor-not-allowed">Software</span>
                </nav>
            </div>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "ParkinsonVolatilityIndicator",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 20;
                const result = ParkinsonVolatilityIndicator.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/ParkinsonVolatilityIndicator.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "period", "label": "Period (20)", "type": "number", "value": 20, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "ParkinsonVolatilityIndicator", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 20;
                const result = ParkinsonVolatilityIndicator.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>