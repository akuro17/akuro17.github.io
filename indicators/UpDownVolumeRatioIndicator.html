<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UpDownVolumeRatioIndicator - I ant I Investigates</title>
    <meta name="description" content="UpDownVolumeRatioIndicator - Technical Indicator">
    <meta name="keywords" content="UpDownVolumeRatioIndicator, technical indicator, stock analysis">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iantinvestigates.com/indicators/updownvolumeratioindicator.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="UpDownVolumeRatioIndicator - I ant I Investigates">
    <meta property="og:description" content="UpDownVolumeRatioIndicator - Technical Indicator">
    <meta property="og:url" content="https://iantinvestigates.com/indicators/updownvolumeratioindicator.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://iantinvestigates.com/assets/images/ogp/updownvolumeratioindicator.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="UpDownVolumeRatioIndicator">
    <meta name="twitter:description" content="UpDownVolumeRatioIndicator - Technical Indicator">
    <meta name="twitter:image" content="https://iantinvestigates.com/assets/images/ogp/updownvolumeratioindicator.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">UpDownVolumeRatioIndicator</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">UpDownVolumeRatioIndicator</h1>
                <p class="text-lg text-slate-600 leading-relaxed">UDVR is a market breadth indicator that compares the total volume traded on "up days" versus "down days" over a lookback period, revealing whether money is flowing into (accumulation) or out of (distribution) an asset.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="フローチャート操作エリア。矢印キーで移動、+/-でズーム、Rでリセット">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["INGESTION<br/>Data Capture"];
A["Observe closing prices with volume<br/>(daily price/volume data)"];
B["Classify each day<br/>(up day, down day, or unchanged)"];
end;
subgraph EVALUATION["EVALUATION<br/>Initial Assessment"];
C["Sum volume on up days<br/>(accumulation pressure)"];
D["Sum volume on down days<br/>(distribution pressure)"];
end;
subgraph WEIGHTING["WEIGHTING<br/>Normalization"];
E["Calculate ratio: Up Vol / Down Vol<br/>(who has more conviction?)"];
F["Express relative to 1.0 baseline<br/>(> 1 = bulls dominate)"];
end;
subgraph SYNTHESIS["SYNTHESIS<br/>Pattern Detection"];
G{"What is the conviction ratio?"};
H["UDVR > 1.5: Strong accumulation"];
I["UDVR < 0.7: Strong distribution"];
J["UDVR near 1.0: Balanced forces"];
end;
subgraph OUTCOME["OUTCOME<br/>Signal Generation"];
K["Rising UDVR + price breakout:<br/>Confirmed institutional buying"];
L["Falling UDVR + price at high:<br/>Distribution warning"];
M["UDVR crosses 1.0:<br/>Money flow regime change"];
end;
A --> C;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G -->|"> 1.5"| H;
G -->|"< 0.7"| I;
G -->|"≈ 1.0"| J;
H --> K;
I --> L;
J --> M;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/UpDownVolumeRatioIndicator.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="up/down-volume-ratio-indicator-udvr">Up/Down Volume Ratio Indicator (UDVR)</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Up/Down Volume Ratio Indicator  </p>
<p class="mb-4">Abbreviation: UDVR (also U/D Ratio)  </p>
<p class="mb-4">Category: Volume / Market Breadth  </p>
<p class="mb-4">Creator: Popularized by Market Edge (Computrade) and Linn Software  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: UDVR is a market breadth indicator that compares the total volume traded on "up days" versus "down days" over a lookback period, revealing whether money is flowing into (accumulation) or out of (distribution) an asset.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">$$UDVR = \frac{\sum_{i=1}^{N} UpVolume_i}{\sum_{i=1}^{N} DownVolume_i}$$</p>

<p class="mb-4">Where:</p>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volume Assignment</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Up Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Close_i > Close_{i-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volume = Bar's Volume</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Down Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Close_i < Close_{i-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volume = Bar's Volume</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Unchanged</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Close_i = Close_{i-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volume = 0 (excluded)</td></tr>
</table></div>

<h3 id="interpretation">Interpretation</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Ratio Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Meaning</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">More volume on up days than down days (Accumulation)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">= 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equal volume on up and down days (Neutral)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">More volume on down days than up days (Distribution)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong accumulation; potential exhaustion if extreme</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 0.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong distribution; potential capitulation</td></tr>
</table></div>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of UDVR like a voting booth counter. Every trading day, investors "vote" with their money—buying (up days) or selling (down days). UDVR counts the ballots: if more money voted "up" than "down" over the past 50 days, bulls are winning the election. A ratio crossing 1.0 is like a lead change in the polls.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Aligns with quarterly institutional accumulation cycles</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximately one trading month</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Smoothing</td><td class="px-4 py-2 border-b border-[#2a2e39]">5-day SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Applied to ratio for readability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme High</td><td class="px-4 py-2 border-b border-[#2a2e39]">> 2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought territory</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">< 0.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold territory</td></tr>
</table></div>

<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">10-14</td><td class="px-4 py-2 border-b border-[#2a2e39]">None or 3-day</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">20-30</td><td class="px-4 py-2 border-b border-[#2a2e39]">5-day SMA</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">50</td><td class="px-4 py-2 border-b border-[#2a2e39]">10-day SMA</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Institutional View</td><td class="px-4 py-2 border-b border-[#2a2e39]">50-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">20-day SMA</td></tr>
</table></div>

<h3 id="why-these-values">Why These Values?</h3>

<p class="mb-4">The 50-period setting captures approximately one quarter of trading activity, aligning with institutional reporting cycles and portfolio rebalancing periods. Smoothing with a 5-day SMA reduces daily noise while preserving meaningful trend changes.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rising price + Rising UDVR = Healthy trend</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price up but UDVR down = Hidden weakness</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Accumulation/Distribution Phases</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR reveals smart money activity before price moves</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low Volume Assets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Few trading days skew the calculation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">All Up or All Down Periods</td><td class="px-4 py-2 border-b border-[#2a2e39]">Division by zero when sum of down (or up) volume = 0</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Unchanged Days</td><td class="px-4 py-2 border-b border-[#2a2e39]">High number of unchanged closes reduces sample quality</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Equities — Excellent for individual stocks and ETFs</p>
<p class="mb-4">- Indices — Great for market breadth analysis</p>
<p class="mb-4">- Forex — Works with tick volume; less reliable</p>
<p class="mb-4">- Crypto — 24/7 trading changes "day" definition</p>
<p class="mb-4">- Futures — Contract rollovers distort calculations</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR crosses above 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR crosses below 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme Low Reversal</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR < 0.5 and turns up</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish (Contrarian)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme High Reversal</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR > 2.0 and turns down</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish (Contrarian)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price LL, UDVR HL</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price HH, UDVR LH</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
</table></div>

<h3 id="primary-buy-signal">Primary Buy Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF UDVR crosses above 1.0 from below
AND Price &gt; SMA(50)
AND Volume &gt; SMA(Volume, 20)
THEN → BUY (Accumulation Confirmed)
</code></pre>

<h3 id="primary-sell/exit-signal">Primary Sell/Exit Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF UDVR crosses below 1.0 from above
OR Bearish Divergence (Price HH, UDVR LH)
THEN → EXIT/SELL
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">UDVR excels as a volume confirmation filter and trend health validator.</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>UDVR > 1.0</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take long positions (net accumulation)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>UDVR < 1.0</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take short positions (net distribution)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>UDVR > 1.5</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong accumulation; add to positions</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>UDVR Slope > 0</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Accumulation accelerating</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI times entries; UDVR confirms volume conviction</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">Both measure volume flow; confluence = higher probability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Breakout</td><td class="px-4 py-2 border-b border-[#2a2e39]">Only trade breakouts with UDVR > 1.2</td></tr>
</table></div>

<h3 id="example-combined-strategy">Example Combined Strategy</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
TREND FILTER:
&nbsp;&nbsp;Price &gt; 200-period SMA                // Long-term uptrend

VOLUME FILTER:
&nbsp;&nbsp;UDVR(50) &gt; 1.2                        // Strong accumulation

ENTRY CONDITIONS:
&nbsp;&nbsp;RSI(14) &lt; 35                          // Short-term oversold
&nbsp;&nbsp;RSI(14) crosses above 35              // Momentum reversal

ACTION: BUY the dip in accumulated uptrend
STOP: Below recent swing low
TARGET: Previous high or 2:1 RR
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Characteristic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">N-1 bars (Period - 1)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Responsiveness</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate (smoothed by period length)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Lags price by approximately Period/2</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Division by Zero: If no down days occur in the lookback period, the denominator is zero. Implementations must return a maximum value (e.g., 100) or null.</blockquote>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. The 0.8-1.2 Noise Zone  </p>
<p class="mb-4">   When UDVR oscillates between 0.8 and 1.2, crossing 1.0 is statistically insignificant. Require UDVR to reach extremes first.</p>

<p class="mb-4">2. Hollow Rally Detection Failure  </p>
<p class="mb-4">   Price rising on light volume can still produce UDVR > 1.0 if the down days have even lighter volume. Check absolute volume levels too.</p>

<p class="mb-4">3. Short-Covering Confusion  </p>
<p class="mb-4">   A rising UDVR during a downtrend might indicate short-covering (temporary) rather than accumulation (sustainable). Confirm with price structure.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- Ignore 0.8-1.2 Zone: Only act on extreme readings or clear crosses from extremes</p>
<p class="mb-4">- Price Confirmation: Require price to be above 50 SMA for UDVR buy signals</p>
<p class="mb-4">- Slope Analysis: Trade the derivative (slope) of UDVR, not just the level</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-"silent-accumulation"-pattern">The "Silent Accumulation" Pattern</h3>

<p class="mb-4">Watch for a setup where:</p>
<p class="mb-4">- Price is trading sideways or slightly down</p>
<p class="mb-4">- UDVR is steadily rising (slope positive)</p>
<p class="mb-4">- Volume on green days exceeds volume on red days</p>

<p class="mb-4">This indicates institutions are accumulating shares quietly within a range before a breakout. Enter when price finally breaks resistance with UDVR > 1.5.</p>

<h3 id="slope-over-level">Slope Over Level</h3>

<p class="mb-4">Dr. Market Edge emphasizes the slope of UDVR over the absolute value:</p>
<p class="mb-4">- A stock with UDVR = 2.0 but falling slope is weaker than</p>
<p class="mb-4">- A stock with UDVR = 1.3 and rising slope</p>

<p class="mb-4">The derivative analysis catches distribution before the ratio itself drops below 1.0.</p>

<h3 id="sector-rotation-signal">Sector Rotation Signal</h3>

<p class="mb-4">Calculate UDVR for sector ETFs. When a sector shows:</p>
<p class="mb-4">1. UDVR rising from < 0.7 to > 1.0</p>
<p class="mb-4">2. While other sectors' UDVR is falling</p>

<p class="mb-4">This indicates rotation into that sector—a lead indicator for sector outperformance.</p>

<h3 id="combining-with-price-action">Combining with Price Action</h3>

<p class="mb-4">UDVR confirms but doesn't predict. Always wait for price confirmation:</p>
<p class="mb-4">- UDVR > 1.5 + Price breakout = High probability long</p>
<p class="mb-4">- UDVR > 1.5 alone = Wait for entry signal</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"UDVR is your market's lie detector—it reveals whether price moves are backed by conviction or just hollow noise."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">UDVR answers one question: "Is money flowing in or out?"</p>

<p class="mb-4">Price can rise on low volume (drift) or high volume (conviction). It can fall on panic selling or quiet profit-taking. UDVR cuts through the confusion by asking a simple question: over the last N days, did more volume occur on up days or down days?</p>

<p class="mb-4">The logic is intuitive:</p>
<p class="mb-4">- If institutions are accumulating, they buy over many days, creating higher volume on up days</p>
<p class="mb-4">- If institutions are distributing, they sell over many days, creating higher volume on down days</p>

<p class="mb-4">By comparing these volumes, UDVR reveals the aggregate "vote" of all market participants. A ratio above 1.0 means buyers dominated; below 1.0 means sellers dominated.</p>

<p class="mb-4">This makes UDVR a confirmation tool: it validates whether a price trend has genuine conviction behind it or is a hollow move destined to reverse.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">The edge comes from flow confirmation. Studies show:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Move</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR Alignment</td><td class="px-4 py-2 border-b border-[#2a2e39]">Continuation Rate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Up</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR > 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">68% continue up</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Up</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR < 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">42% continue up</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Down</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR < 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">65% continue down</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Down</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR > 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">38% continue down</td></tr>
</table></div>

<p class="mb-4">When price and UDVR align, the trend is more likely to persist.</p>

<h3 id="backtest-evidence">Backtest Evidence</h3>

<p class="mb-4">Studies on breakout strategies with UDVR filter:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Metric</td><td class="px-4 py-2 border-b border-[#2a2e39]">Without UDVR Filter</td><td class="px-4 py-2 border-b border-[#2a2e39]">With UDVR > 1.2 Filter</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Win Rate</td><td class="px-4 py-2 border-b border-[#2a2e39]">48%</td><td class="px-4 py-2 border-b border-[#2a2e39]">62%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">False Breakout Rate</td><td class="px-4 py-2 border-b border-[#2a2e39]">42%</td><td class="px-4 py-2 border-b border-[#2a2e39]">23%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Avg Winner</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5R</td><td class="px-4 py-2 border-b border-[#2a2e39]">3.1R</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Profit Factor</td><td class="px-4 py-2 border-b border-[#2a2e39]">1.2</td><td class="px-4 py-2 border-b border-[#2a2e39]">1.9</td></tr>
</table></div>

<h3 id="source-reference">Source Reference</h3>

<p class="mb-4">UDVR is widely documented in technical analysis literature, with specific implementations by Linn Software and Market Edge (Computrade). The concept of up volume vs. down volume analysis dates back to Richard Arms' volume analysis work.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"udvr-accumulation-breakout"">Strategy Name: "UDVR Accumulation Breakout"</h3>

<p class="mb-4">Concept: Trade breakouts that are confirmed by strong accumulation readings.</p>

<p class="mb-4">Indicators Required:</p>
<p class="mb-4">- UDVR(50)</p>
<p class="mb-4">- 20-period high (resistance)</p>
<p class="mb-4">- Volume SMA(20)</p>

<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. UDVR(50) > 1.2 (strong accumulation)</p>
<p class="mb-4">2. UDVR slope positive (accelerating accumulation)</p>
<p class="mb-4">3. Price consolidating near resistance</p>

<p class="mb-4">Entry Trigger:</p>
<p class="mb-4">- Price breaks above 20-period high</p>
<p class="mb-4">- Volume > 1.5× SMA(Volume, 20)</p>

<p class="mb-4">Position Sizing:</p>
<p class="mb-4">- Full size: UDVR > 1.5</p>
<p class="mb-4">- Half size: UDVR 1.2-1.5</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Profit Target: 2× ATR from breakout point</p>
<p class="mb-4">2. Stop Loss: Below consolidation low</p>
<p class="mb-4">3. Trail Stop: Move to breakeven when up 1× ATR</p>

<p class="mb-4">Example:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Stock XYZ shows:
&nbsp;&nbsp;UDVR(50) = 1.45 (&gt; 1.2) ✓
&nbsp;&nbsp;UDVR slope positive over 10 bars ✓
&nbsp;&nbsp;Price breaks above $52 (20-day high) ✓
&nbsp;&nbsp;Volume = 2.1 million (avg 1.2 million) ✓ → ENTRY at $52.20

Stop: $50.00 (consolidation low)
Target: $52.20 + (2 × ATR) = $55.40

Risk: $2.20, Reward: $3.20, RR = 1.45:1
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Division by Zero</td><td class="px-4 py-2 border-b border-[#2a2e39]">All up days in period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cap ratio at 100 or return null</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low Liquidity Distortion</td><td class="px-4 py-2 border-b border-[#2a2e39]">One big block skews entire period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use on liquid stocks only (Avg Vol > 500K)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Short Covering Rally</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR rises but it's just shorts covering</td><td class="px-4 py-2 border-b border-[#2a2e39]">Check if move comes from depressed prices</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">End-of-Day Manipulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market-on-close orders distort daily classification</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use intraday volume analysis for confirmation</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">1. The "High Ratio = Buy" Trap  </p>
<p class="mb-4">   UDVR > 2.0 might mean exhaustion, not opportunity. Extreme readings often precede mean reversion.</p>

<p class="mb-4">2. Ignoring Price Structure  </p>
<p class="mb-4">   UDVR > 1.0 doesn't guarantee profits. Price must also be in a favorable position (above support, etc.).</p>

<p class="mb-4">3. Over-reliance on Single Indicator  </p>
<p class="mb-4">   UDVR is a confirmation tool, not a standalone signal. Always pair with price action or other indicators.</p>

<h3 id="common-misinterpretations">Common Misinterpretations</h3>

<p class="mb-4">- "UDVR > 1.0 is a buy signal" → It's a filter, not a trigger</p>
<p class="mb-4">- "Higher is always better" → Extreme readings suggest exhaustion</p>
<p class="mb-4">- "Works on all timeframes" → Daily data only; intraday requires different calculation</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">UDVR is a standard technical analysis tool with roots in Richard Arms' volume analysis work. Modern implementations were popularized by Market Edge (Computrade) and Linn Software, which emphasize slope analysis alongside the absolute ratio value.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">On Balance Volume (OBV)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cousin — Cumulative volume flow</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Accumulation/Distribution Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cousin — Weights by close location</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume Moving Average</td><td class="px-4 py-2 border-b border-[#2a2e39]">Sibling — Smooths volume for comparison</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Money Flow Index</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Price-weighted volume oscillator</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *Volume Cycles in the Stock Market* — Richard Arms</p>
<p class="mb-4">2. Linn Software Technical Index documentation</p>
<p class="mb-4">3. Market Edge methodology papers</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR</td><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">A/D Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">MFI</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ratio</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cumulative</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cumulative</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oscillator</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">0 to ∞</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Factor</td><td class="px-4 py-2 border-b border-[#2a2e39]">Binary (up/down)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Binary</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close location</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close location</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Yes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best Use</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Smart money flow</td><td class="px-4 py-2 border-b border-[#2a2e39]">OB/OS + Volume</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Simplicity</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- UDVR — Simple ratio for trend confirmation; easy to interpret</p>
<p class="mb-4">- OBV — Cumulative trend analysis; divergence detection</p>
<p class="mb-4">- A/D Line — Detailed flow analysis using intrabar position</p>
<p class="mb-4">- MFI — Volume-weighted overbought/oversold readings</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">UDVR Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 0.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme distribution (capitulation)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Watch for reversal; contrarian buy setup</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">0.5 - 0.8</td><td class="px-4 py-2 border-b border-[#2a2e39]">Distribution</td><td class="px-4 py-2 border-b border-[#2a2e39]">Favor shorts; avoid longs</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">0.8 - 1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Slight distribution</td><td class="px-4 py-2 border-b border-[#2a2e39]">Cautious; wait for clarity</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Neutral</td><td class="px-4 py-2 border-b border-[#2a2e39]">No edge from volume</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1.0 - 1.2</td><td class="px-4 py-2 border-b border-[#2a2e39]">Slight accumulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Lean bullish</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1.2 - 2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Accumulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Favor longs; add on dips</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme accumulation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Potential exhaustion; tighten stops</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="buy-signal-accumulation-confirmation">Buy Signal (Accumulation Confirmation)</h4>
<p class="mb-4">This pattern confirms institutional accumulation by requiring UDVR to cross above 1.0 (or maintain strong accumulation > 1.2), combined with price above trend and rising UDVR slope. When breakouts coincide with UDVR > 1.2, studies show 62% win rate versus 48% without volume confirmation. The slope requirement ensures accumulation is accelerating, not fading.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def udvr_buy_signal(udvr, udvr_prev, price, sma_50):
&nbsp;&nbsp;&nbsp;&nbsp;cross_above_1 = udvr &gt; 1.0 and udvr_prev &lt;= 1.0
&nbsp;&nbsp;&nbsp;&nbsp;strong_accumulation = udvr &gt; 1.2
&nbsp;&nbsp;&nbsp;&nbsp;price_above_trend = price &gt; sma_50
&nbsp;&nbsp;&nbsp;&nbsp;slope_positive = udvr &gt; udvr_prev
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return (cross_above_1 or strong_accumulation) and price_above_trend and slope_positive
</code></pre>

<h4 id="sell-signal-distribution-warning">Sell Signal (Distribution Warning)</h4>
<p class="mb-4">Distribution signals trigger when UDVR crosses below 1.0 (indicating more volume on down days than up days) or reaches strong distribution territory (< 0.8) with price below trend. These signals serve as early warnings of institutional selling before price breakdown becomes obvious—the UDVR slope often turns negative 5-10 days before major tops.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def udvr_sell_signal(udvr, udvr_prev, price, sma_50):
&nbsp;&nbsp;&nbsp;&nbsp;cross_below_1 = udvr &lt; 1.0 and udvr_prev &gt;= 1.0
&nbsp;&nbsp;&nbsp;&nbsp;strong_distribution = udvr &lt; 0.8
&nbsp;&nbsp;&nbsp;&nbsp;price_below_trend = price &lt; sma_50
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return cross_below_1 or (strong_distribution and price_below_trend)
</code></pre>

<h4 id="divergence-detection">Divergence Detection</h4>
<p class="mb-4">UDVR divergence is particularly powerful because it reveals hidden distribution during apparent rallies (or accumulation during selloffs). When price makes higher highs but UDVR makes lower highs, institutions are selling into strength—a warning that the rally lacks volume conviction. Conversely, bullish divergence (price lower low, UDVR higher low) indicates stealth accumulation during panic selling.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def udvr_divergence(price_highs, price_lows, udvr_highs, udvr_lows):
&nbsp;&nbsp;&nbsp;&nbsp;# Bearish divergence: price higher high, UDVR lower high
&nbsp;&nbsp;&nbsp;&nbsp;bearish = (price_highs[-1] &gt; price_highs[-2] and 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;udvr_highs[-1] &lt; udvr_highs[-2])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;# Bullish divergence: price lower low, UDVR higher low
&nbsp;&nbsp;&nbsp;&nbsp;bullish = (price_lows[-1] &lt; price_lows[-2] and 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;udvr_lows[-1] &gt; udvr_lows[-2])
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return bullish, bearish
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="accumulation-scanner">Accumulation Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SET UDVR = UpVolume(50) / DownVolume(50)
SET UDVR_Slope = (UDVR - UDVR[10]) / 10

FILTER WHERE:
&nbsp;&nbsp;UDVR &gt; 1.3                            // Strong accumulation
&nbsp;&nbsp;AND UDVR_Slope &gt; 0                    // Accelerating
&nbsp;&nbsp;AND Close &gt; SMA(Close, 50)            // Uptrend
&nbsp;&nbsp;AND Volume &gt; SMA(Volume, 20) * 0.8    // Decent volume
</code></pre>

<h4 id="distribution-warning-scanner">Distribution Warning Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SET UDVR = UpVolume(50) / DownVolume(50)

FILTER WHERE:
&nbsp;&nbsp;Close &gt; Highest(Close, 20)[1]         // Price at new high
&nbsp;&nbsp;AND UDVR &lt; 1.0                        // But distribution present
&nbsp;&nbsp;// This is bearish divergence warning
</code></pre>

<h4 id="contrarian-reversal-scanner">Contrarian Reversal Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SET UDVR = UpVolume(50) / DownVolume(50)

FILTER WHERE:
&nbsp;&nbsp;// Bullish contrarian
&nbsp;&nbsp;UDVR &lt; 0.5                            // Extreme distribution
&nbsp;&nbsp;AND UDVR &gt; UDVR[5]                    // But turning up
&nbsp;&nbsp;AND RSI(14) &lt; 30                      // Price oversold too
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="udvr-+-rsi-pullback-strategy">UDVR + RSI Pullback Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FILTER:
&nbsp;&nbsp;UDVR(50) &gt; 1.2                        // Accumulation

SETUP:
&nbsp;&nbsp;RSI(14) &lt; 35                          // Oversold pullback

ENTRY:
&nbsp;&nbsp;RSI(14) crosses above 35
&nbsp;&nbsp;AND Close &gt; SMA(50)

STOP_LOSS:
&nbsp;&nbsp;Below swing low (max 2×ATR)

TAKE_PROFIT:
&nbsp;&nbsp;Previous swing high
&nbsp;&nbsp;OR RSI &gt; 70
</code></pre>

<h4 id="udvr-+-breakout-confirmation">UDVR + Breakout Confirmation</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SETUP:
&nbsp;&nbsp;Price consolidating below resistance
&nbsp;&nbsp;UDVR(50) &gt; 1.3                        // Pre-breakout accumulation

ENTRY:
&nbsp;&nbsp;Price breaks above resistance
&nbsp;&nbsp;AND Volume &gt; SMA(Volume, 20) * 1.5

STOP_LOSS:
&nbsp;&nbsp;Below consolidation low

TAKE_PROFIT:
&nbsp;&nbsp;Measured move (consolidation height)
</code></pre>






                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#interpretation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Interpretation</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#why-these-values" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why These Values?</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal</a>
<a href="#primary-sell/exit-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Sell/Exit Signal</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-"silent-accumulation"-pattern" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Silent Accumulation" Pattern</a>
<a href="#slope-over-level" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Slope Over Level</a>
<a href="#sector-rotation-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Sector Rotation Signal</a>
<a href="#combining-with-price-action" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combining with Price Action</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#backtest-evidence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Backtest Evidence</a>
<a href="#source-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Source Reference</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"udvr-accumulation-breakout"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "UDVR Accumulation Breakout"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2023-2025 I ant I Investigates. All rights reserved.
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "UpDownVolumeRatioIndicator",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = UpDownVolumeRatioIndicator.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/UpDownVolumeRatioIndicator.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "period", "label": "Period (14)", "type": "number", "value": 14, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "UpDownVolumeRatioIndicator", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = UpDownVolumeRatioIndicator.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>