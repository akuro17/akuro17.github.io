<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackLitterman - I ant I Investigates</title>
    <meta name="description" content="BlackLitterman - Technical Indicator">
    <meta name="keywords" content="BlackLitterman, technical indicator, stock analysis">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iantinvestigates.com/indicators/blacklitterman.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="BlackLitterman - I ant I Investigates">
    <meta property="og:description" content="BlackLitterman - Technical Indicator">
    <meta property="og:url" content="https://iantinvestigates.com/indicators/blacklitterman.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://iantinvestigates.com/assets/images/ogp/blacklitterman.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BlackLitterman">
    <meta name="twitter:description" content="BlackLitterman - Technical Indicator">
    <meta name="twitter:image" content="https://iantinvestigates.com/assets/images/ogp/blacklitterman.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">BlackLitterman</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">BlackLitterman</h1>
                <p class="text-lg text-slate-600 leading-relaxed">The Black-Litterman Model blends market equilibrium returns with investor views to produce a stable, intuitive set of expected returns for mean-variance portfolio optimization—solving the traditional optimizer's garbage-in-garbage-out problem.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive Market Data"/];
B["Capture Equilibrium Beliefs"];
C["Gather Investor Views"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Assess Market Consensus Returns"];
E["Quantify View Confidence Levels"];
F{"Views Provided?"};
end;
subgraph WEIGHTING["Phase 3: Weighting"];
G["Scale Uncertainty by Confidence"];
H["Balance Market vs Personal Conviction"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
I["Blend Equilibrium with Views"];
J["Derive Posterior Expected Returns"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
K{"Significant Deviation?"};
L["Tilt Allocation Toward Views"];
M["Stay Near Market Weights"];
N[/"Generate Optimal Portfolio"/];
end;
A --> B;
A --> C;
B --> D;
C --> E;
D --> F;
E --> F;
F -->|No| M;
F -->|Yes| G;
G --> H;
H --> I;
I --> J;
J --> K;
K -->|Yes| L;
K -->|No| M;
L --> N;
M --> N;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/BlackLitterman.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="blacklitterman-bl">BlackLitterman (BL)</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Black-Litterman Model  </p>
<p class="mb-4">Abbreviation: BL  </p>
<p class="mb-4">Category: Portfolio Optimization / Asset Allocation  </p>
<p class="mb-4">Creators: Fischer Black and Robert Litterman (1990, Goldman Sachs)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: The Black-Litterman Model blends market equilibrium returns with investor views to produce a stable, intuitive set of expected returns for mean-variance portfolio optimization—solving the traditional optimizer's garbage-in-garbage-out problem.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">Posterior Expected Returns:</p>
<p class="mb-4">$$E[R] = \Pi + \tau\Sigma P^T(P\tau\Sigma P^T + \Omega)^{-1}(Q - P\Pi)$$</p>

<p class="mb-4">Where:</p>
<p class="mb-4">- $\Pi$ = Equilibrium returns (implied by market cap weights)</p>
<p class="mb-4">- $\Sigma$ = Covariance matrix</p>
<p class="mb-4">- $P$ = View pick matrix (which assets the view is about)</p>
<p class="mb-4">- $Q$ = View returns (what you believe)</p>
<p class="mb-4">- $\Omega$ = View uncertainty matrix (how confident you are)</p>
<p class="mb-4">- $\tau$ = Scaling factor (typically 0.05)</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">$\Pi = \lambda \Sigma w_{mkt}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Implied equilibrium returns from market weights</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">$P$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Matrix linking views to assets</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Q$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Vector of view returns</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">$\Omega = diag(P\tau\Sigma P^T / c_i)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Uncertainty scaled by confidence</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5</td><td class="px-4 py-2 border-b border-[#2a2e39]">$E[R] = \Pi + ...$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Blend equilibrium with views</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">6</td><td class="px-4 py-2 border-b border-[#2a2e39]">Optimize</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use posterior returns in mean-variance</td></tr>
</table></div>

<h3 id="key-insight">Key Insight</h3>

<p class="mb-4">Black-Litterman starts with market equilibrium (what the collective market believes) and only adjusts those returns based on your specific views with confidence levels. If you have no views, you simply hold the market portfolio.</p>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of Black-Litterman as a GPS navigation system with human input. The GPS (market equilibrium) provides the default route based on collective data. You can override it with your local knowledge ("take this shortcut") but you must specify your confidence. High confidence = big detour; low confidence = slight adjustment. If you have no input, it just follows the standard route.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Typical Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">τ (tau)</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.05</td><td class="px-4 py-2 border-b border-[#2a2e39]">Scales uncertainty of equilibrium estimates</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">λ (risk aversion)</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Typical market risk aversion</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Confidence</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.1–100%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Investor-specified per view</td></tr>
</table></div>

<h3 id="view-types">View Types</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">View Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">P Matrix</td><td class="px-4 py-2 border-b border-[#2a2e39]">Q Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Example</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Absolute</td><td class="px-4 py-2 border-b border-[#2a2e39]">[1, 0, 0]</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.10</td><td class="px-4 py-2 border-b border-[#2a2e39]">"Asset A will return 10%"</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Relative</td><td class="px-4 py-2 border-b border-[#2a2e39]">[1, -1, 0]</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.02</td><td class="px-4 py-2 border-b border-[#2a2e39]">"Asset A will beat B by 2%"</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Equal Weight</td><td class="px-4 py-2 border-b border-[#2a2e39]">[0.5, -0.5, 0]</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.01</td><td class="px-4 py-2 border-b border-[#2a2e39]">"Sector A vs Sector B"</td></tr>
</table></div>

<h3 id="key-concepts">Key Concepts</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Concept</td><td class="px-4 py-2 border-b border-[#2a2e39]">Meaning</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Equilibrium Returns (Π)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Returns implied by current market cap weights</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Views (Q)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Your forecasts for specific assets or asset pairs</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Confidence (c)</td><td class="px-4 py-2 border-b border-[#2a2e39]">How certain you are about each view (affects Ω)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Posterior Returns</td><td class="px-4 py-2 border-b border-[#2a2e39]">Blended returns after incorporating views</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Institutional Portfolios</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stable allocations without extreme positions</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Multi-Asset Allocation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Handles correlations elegantly</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Active Views Overlay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Quantifies impact of active bets</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Perfect Correlation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Singular covariance matrix (inversion fails)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Conflicting Views</td><td class="px-4 py-2 border-b border-[#2a2e39]">Can produce unstable posteriors</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Negative Risk Aversion</td><td class="px-4 py-2 border-b border-[#2a2e39]">If market return < risk-free, logic flips</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<p class="mb-4">The Black-Litterman Model produces portfolio weights, not buy/sell signals. However, the weight changes can be interpreted as signals:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overweight</td><td class="px-4 py-2 border-b border-[#2a2e39]">Posterior > Equilibrium + buffer</td><td class="px-4 py-2 border-b border-[#2a2e39]">Increase allocation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Proportional to difference</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Underweight</td><td class="px-4 py-2 border-b border-[#2a2e39]">Posterior < Equilibrium - buffer</td><td class="px-4 py-2 border-b border-[#2a2e39]">Decrease allocation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Proportional to difference</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Market Weight</td><td class="px-4 py-2 border-b border-[#2a2e39]">Posterior ≈ Equilibrium</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hold neutral</td><td class="px-4 py-2 border-b border-[#2a2e39]">No action</td></tr>
</table></div>

<h3 id="weight-change-interpretation">Weight Change Interpretation</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Transaction_Cost_Buffer = 0.5%  // Avoid trading noise

IF (Posterior_Return[Asset] &gt; Equilibrium_Return[Asset] + Buffer)
THEN Signal = OVERWEIGHT
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Action = Increase allocation proportionally

IF (Posterior_Return[Asset] &lt; Equilibrium_Return[Asset] - Buffer)
THEN Signal = UNDERWEIGHT
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Action = Decrease allocation proportionally

ELSE Signal = MARKET_WEIGHT
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Action = Hold current allocation
</code></pre>

<h3 id="view-confidence-impact">View Confidence Impact</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
HIGH CONFIDENCE VIEW (c ≈ 100%):
&nbsp;&nbsp;Omega is small
&nbsp;&nbsp;View strongly tilts posterior toward Q
&nbsp;&nbsp;→ Large allocation change

LOW CONFIDENCE VIEW (c ≈ 10%):
&nbsp;&nbsp;Omega is large
&nbsp;&nbsp;View weakly tilts posterior
&nbsp;&nbsp;→ Small allocation change

NO VIEW:
&nbsp;&nbsp;Posterior = Equilibrium
&nbsp;&nbsp;→ Hold market-cap weights
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Transaction cost buffer</td><td class="px-4 py-2 border-b border-[#2a2e39]">Only trade if expected impact > costs</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Confidence floor</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ignore views with confidence < 50%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">View consistency check</td><td class="px-4 py-2 border-b border-[#2a2e39]">Flag conflicting views for review</td></tr>
</table></div>

<h3 id="view-validation">View Validation</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
BEFORE PROCESSING VIEWS:

1. Correlation Check:
&nbsp;&nbsp;&nbsp;IF (Asset A perfectly correlated with Asset B)
&nbsp;&nbsp;&nbsp;THEN Flag: Singular matrix risk

2. Conflict Detection:
&nbsp;&nbsp;&nbsp;IF (View 1 says A &gt; B) AND (View 2 says B &gt; A)
&nbsp;&nbsp;&nbsp;AND (Similar confidence)
&nbsp;&nbsp;&nbsp;THEN Flag: Conflicting views

3. Plausibility Check:
&nbsp;&nbsp;&nbsp;IF (|View Return| &gt; 3 × Historical Volatility)
&nbsp;&nbsp;&nbsp;THEN Flag: Extreme view, review confidence
</code></pre>

<h3 id="integration-with-other-systems">Integration with Other Systems</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner System</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Risk Budgeting</td><td class="px-4 py-2 border-b border-[#2a2e39]">BL weights → Risk contribution targets</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Factor Models</td><td class="px-4 py-2 border-b border-[#2a2e39]">Factor views → BL Q and P matrices</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Regime Models</td><td class="px-4 py-2 border-b border-[#2a2e39]">Regime signals adjust confidence levels</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="edge-cases">Edge Cases</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fix</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Singular Matrix</td><td class="px-4 py-2 border-b border-[#2a2e39]">Assets perfectly correlated</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use pseudo-inverse or remove redundant assets</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Conflicting Views</td><td class="px-4 py-2 border-b border-[#2a2e39]">A > B and B > A with equal confidence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Resolve or drop one view</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Negative λ</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market return < Risk-free rate</td><td class="px-4 py-2 border-b border-[#2a2e39]">Review equilibrium assumptions</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Zero Confidence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Omega becomes infinite</td><td class="px-4 py-2 border-b border-[#2a2e39]">Skip view entirely</td></tr>
</table></div>

<h3 id="implementation-notes">Implementation Notes</h3>

<p class="mb-4">- Matrix Inversion: Use robust numerical methods; small covariance matrices can be ill-conditioned</p>
<p class="mb-4">- Tau Selection: Sensitive to τ value; some studies suggest τ = 1/T where T = observation count</p>
<p class="mb-4">- Confidence Calibration: Hardest part—most practitioners link confidence to historical forecast accuracy</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-"neutral"-anchor">The "Neutral" Anchor</h3>

<p class="mb-4">With no views, the model forces you to hold the index. This prevents "tinkering" bias where managers make changes just for the sake of activity. The market portfolio becomes the default, which is empirically hard to beat consistently.</p>

<h3 id="confidence-scaling">Confidence Scaling</h3>

<p class="mb-4">A professional trick is to link confidence (Ω) to asset volatility:</p>
<p class="mb-4">- High volatility assets → Lower confidence automatically</p>
<p class="mb-4">- Low volatility assets → Higher confidence allowed</p>

<p class="mb-4">This prevents the optimizer from over-allocating to noisy, high-volatility assets.</p>

<h3 id="view-quality-matters-more-than-quantity">View Quality Matters More Than Quantity</h3>

<p class="mb-4">One well-researched, high-confidence view can add more value than ten low-confidence guesses. Focus your research on views that have:</p>
<p class="mb-4">1. Clear investment thesis</p>
<p class="mb-4">2. Historical validation</p>
<p class="mb-4">3. Reasonable holding period</p>

<h3 id="posterior-vs-equilibrium-difference-=-active-bet-size">Posterior vs Equilibrium Difference = Active Bet Size</h3>

<p class="mb-4">The difference between posterior and equilibrium returns directly translates to the size of your active bet. Track this difference over time to understand your "active return budget."</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"Black-Litterman solves portfolio optimization by anchoring to market equilibrium and surgically adjusting for your specific views—no views means hold the market, strong views mean significant tilts. It transforms subjective opinions into mathematically coherent expected returns."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">Traditional mean-variance optimization suffers from extreme sensitivity to return estimates. Small changes in expected returns produce wild swings in portfolio weights.</p>

<p class="mb-4">Black-Litterman solves this by:</p>

<p class="mb-4">1. Starting from equilibrium: Market-cap weights imply "consensus" expected returns</p>
<p class="mb-4">2. Expressing views explicitly: Investor beliefs quantified with confidence</p>
<p class="mb-4">3. Bayesian blending: Prior (equilibrium) + Likelihood (views) = Posterior</p>
<p class="mb-4">4. Stable allocations: Resulting portfolios are intuitive and diversified</p>

<p class="mb-4">The magic is that without views, you hold the market—a sensible default that many optimizers fail to produce.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="stability-improvement">Stability Improvement</h3>

<p class="mb-4">Black-Litterman portfolios show:</p>
<p class="mb-4">- 60% less turnover than traditional mean-variance</p>
<p class="mb-4">- Weights cluster reasonably (no 150% long, -50% short extremes)</p>
<p class="mb-4">- Posterior returns are less sensitive to estimation error</p>

<h3 id="view-impact">View Impact</h3>

<p class="mb-4">A view with 50% confidence typically produces:</p>
<p class="mb-4">- 2-5% allocation shift per 1% expected return difference</p>
<p class="mb-4">- Proportionally smaller shifts for diversified portfolios</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"equilibrium-+-momentum-views"">Strategy Name: "Equilibrium + Momentum Views"</h3>

<p class="mb-4">Equilibrium:</p>
<p class="mb-4">Start with market-cap weighted equilibrium returns</p>

<p class="mb-4">Views:</p>
<p class="mb-4">Use 12-month price momentum to generate relative views:</p>
<p class="mb-4">- Top quartile momentum assets: Expected to beat average by 2%</p>
<p class="mb-4">- Bottom quartile momentum assets: Expected to lag average by 2%</p>
<p class="mb-4">- Confidence: 25% (modest, acknowledging noise in momentum)</p>

<p class="mb-4">Execution:</p>
<p class="mb-4">1. Run Black-Litterman with momentum views quarterly</p>
<p class="mb-4">2. Rebalance to posterior-derived weights</p>
<p class="mb-4">3. Track performance vs market-cap benchmark</p>

<p class="mb-4">Why This Works:</p>
<p class="mb-4">Combines empirically validated momentum factor with BL's stabilizing framework, avoiding overfitting typical of raw momentum strategies.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Risk</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Singular covariance matrix</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use pseudo-inverse; check for redundant assets</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Conflicting views</td><td class="px-4 py-2 border-b border-[#2a2e39]">Review and reconcile before processing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Over-confidence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Link confidence to historical forecast accuracy</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Model misspecification</td><td class="px-4 py-2 border-b border-[#2a2e39]">Regularly validate equilibrium assumptions</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Fischer Black (co-creator of Black-Scholes) and Robert Litterman developed the model at Goldman Sachs in 1990. It was published in:</p>
<p class="mb-4">- *Global Portfolio Optimization* (1992), Financial Analysts Journal</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">Black-Litterman</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean-Variance</td><td class="px-4 py-2 border-b border-[#2a2e39]">Risk Parity</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equal Weight</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Requires Returns</td><td class="px-4 py-2 border-b border-[#2a2e39]">Implicit + Views</td><td class="px-4 py-2 border-b border-[#2a2e39]">Explicit forecasts</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Stability</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Flexibility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Views overlay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Full flexibility</td><td class="px-4 py-2 border-b border-[#2a2e39]">Risk-based</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Default</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market portfolio</td><td class="px-4 py-2 border-b border-[#2a2e39]">Depends on inputs</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility balanced</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Active overlay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Tactical</td><td class="px-4 py-2 border-b border-[#2a2e39]">Diversification</td><td class="px-4 py-2 border-b border-[#2a2e39]">Simplicity</td></tr>
</table></div>

<p class="mb-4">When to use Black-Litterman:</p>
<p class="mb-4">- When you have specific views but want stable allocations</p>
<p class="mb-4">- When managing institutional portfolios with accountability</p>
<p class="mb-4">- When combining quantitative signals with market equilibrium</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Posterior vs Equilibrium</td><td class="px-4 py-2 border-b border-[#2a2e39]">Confidence Level</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Much higher (>2%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">High (>70%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong overweight case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Significant positive tilt</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Higher (0.5-2%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium (50-70%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Modest overweight case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate positive tilt</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Similar (±0.5%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Any</td><td class="px-4 py-2 border-b border-[#2a2e39]">No strong conviction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market weight</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Lower (0.5-2%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium (50-70%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Modest underweight case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate negative tilt</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Much lower (<-2%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">High (>70%)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong underweight case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Significant negative tilt</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="overweight/underweight-signal-determination">Overweight/Underweight Signal Determination</h4>

<p class="mb-4">When the posterior expected return (after incorporating your views) exceeds the equilibrium return by more than the transaction cost buffer, the asset should be overweighted. Conversely, when posterior return falls below equilibrium by the same buffer, underweight the asset. This translates subjective investment views into objective allocation decisions with built-in transaction cost awareness.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def bl_overweight_signal(posterior_return, equilibrium_return, buffer=0.005):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Determine if asset should be overweighted&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;diff = posterior_return - equilibrium_return
&nbsp;&nbsp;&nbsp;&nbsp;if diff &gt; buffer:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;OVERWEIGHT&quot;, diff
&nbsp;&nbsp;&nbsp;&nbsp;elif diff &lt; -buffer:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;UNDERWEIGHT&quot;, diff
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;MARKET_WEIGHT&quot;, diff
</code></pre>

<h4 id="view-validation">View Validation</h4>

<p class="mb-4">Before processing views through the Black-Litterman model, validation ensures consistency and stability. Conflicting views (e.g., bullish on A vs B and bullish on B vs A simultaneously) can produce unstable posteriors, while near-singular covariance matrices indicate redundant assets that may cause computational failures. Early detection prevents garbage-in-garbage-out outcomes.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def validate_views(view_matrix, view_returns, covariance_matrix):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Check for view conflicts and matrix issues&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;warnings = []
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;# Check for conflicting views
&nbsp;&nbsp;&nbsp;&nbsp;for i, view_i in enumerate(view_matrix):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for j, view_j in enumerate(view_matrix[i+1:], i+1):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If views are opposite signs on same assets
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if np.dot(view_i, view_j) &lt; -0.5:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warnings.append(f&quot;Potential conflict: View {i} vs View {j}&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;# Check for near-singular covariance
&nbsp;&nbsp;&nbsp;&nbsp;eigenvalues = np.linalg.eigvals(covariance_matrix)
&nbsp;&nbsp;&nbsp;&nbsp;if min(eigenvalues) &lt; 1e-8:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warnings.append(&quot;Near-singular covariance matrix&quot;)
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return warnings
</code></pre>

<h4 id="volatility-adjusted-confidence">Volatility-Adjusted Confidence</h4>

<p class="mb-4">A sophisticated refinement links confidence levels to asset volatility automatically. Higher volatility assets receive scaled-down confidence, preventing the optimizer from over-allocating to noisy assets based on views that are inherently harder to forecast accurately. This produces more stable, diversified portfolios.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def confidence_from_volatility(asset_volatility, base_confidence=0.5):
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Adjust confidence based on asset volatility&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;# Higher volatility = lower confidence
&nbsp;&nbsp;&nbsp;&nbsp;vol_adjustment = 1 / (1 + asset_volatility)
&nbsp;&nbsp;&nbsp;&nbsp;return base_confidence * vol_adjustment
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
// Asset Allocation Signal
FOR EACH Asset:
&nbsp;&nbsp;Posterior = BL_Posterior_Return[Asset]
&nbsp;&nbsp;Equilibrium = Implied_Equilibrium_Return[Asset]
&nbsp;&nbsp;Buffer = Transaction_Cost + Spread
&nbsp;&nbsp;
&nbsp;&nbsp;IF (Posterior &gt; Equilibrium + Buffer)
&nbsp;&nbsp;THEN Signal = OVERWEIGHT
&nbsp;&nbsp;
&nbsp;&nbsp;IF (Posterior &lt; Equilibrium - Buffer)
&nbsp;&nbsp;THEN Signal = UNDERWEIGHT
&nbsp;&nbsp;
&nbsp;&nbsp;ELSE Signal = MARKET_WEIGHT

// View Quality Filter
FOR EACH View:
&nbsp;&nbsp;IF (View_Confidence &lt; 0.5)
&nbsp;&nbsp;THEN Status = IGNORE_LOW_CONFIDENCE
&nbsp;&nbsp;
&nbsp;&nbsp;IF (View_Return &gt; 3 * Asset_Volatility)
&nbsp;&nbsp;THEN Status = EXTREME_VIEW_REVIEW

// Rebalance Trigger
Total_Expected_Improvement = SUM(|Posterior - Equilibrium|)
IF (Total_Expected_Improvement &gt; Transaction_Costs * 2)
THEN Signal = REBALANCE_RECOMMENDED
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="bl-+-factor-views">BL + Factor Views</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FACTOR INPUTS:
&nbsp;&nbsp;Momentum view: Top quintile stocks +2% vs bottom quintile
&nbsp;&nbsp;Value view: Cheap stocks +1.5% vs expensive stocks
&nbsp;&nbsp;Quality view: High quality +1% vs low quality

CONFIDENCE:
&nbsp;&nbsp;Based on historical factor performance
&nbsp;&nbsp;Momentum: 50% confidence
&nbsp;&nbsp;Value: 40% confidence
&nbsp;&nbsp;Quality: 30% confidence

PROCESS:
&nbsp;&nbsp;1. Calculate equilibrium from market caps
&nbsp;&nbsp;2. Construct P matrix from factor exposures
&nbsp;&nbsp;3. Set Q vector from factor premiums
&nbsp;&nbsp;4. Set Ω from confidence-adjusted covariance
&nbsp;&nbsp;5. Calculate posterior returns
&nbsp;&nbsp;6. Optimize to posterior-derived weights
</code></pre>

<h4 id="bl-+-regime-switching">BL + Regime Switching</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
REGIME IDENTIFICATION:
&nbsp;&nbsp;Bull Market: Rising 200 DMA + VIX &lt; 20
&nbsp;&nbsp;Bear Market: Falling 200 DMA + VIX &gt; 25
&nbsp;&nbsp;Neutral: Otherwise

CONFIDENCE ADJUSTMENT:
&nbsp;&nbsp;Bull Market: Increase equity view confidence by 50%
&nbsp;&nbsp;Bear Market: Increase defensive asset confidence by 50%
&nbsp;&nbsp;Neutral: Use base confidence levels

RATIONALE:
&nbsp;&nbsp;Views are more reliable when market regime is clear
&nbsp;&nbsp;Reduce confidence during transitional periods
</code></pre>

<h4 id="bl-+-momentum-overlay">BL + Momentum Overlay</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
MONTHLY PROCESS:

1. EQUILIBRIUM:
&nbsp;&nbsp;&nbsp;Calculate implied returns from market cap weights

2. MOMENTUM VIEWS:
&nbsp;&nbsp;&nbsp;12-month momentum rank for each asset
&nbsp;&nbsp;&nbsp;Top 20%: +2% relative view, 30% confidence
&nbsp;&nbsp;&nbsp;Bottom 20%: -2% relative view, 30% confidence

3. POSTERIOR:
&nbsp;&nbsp;&nbsp;Run Black-Litterman model

4. REBALANCE:
&nbsp;&nbsp;&nbsp;Trade to posterior weights
&nbsp;&nbsp;&nbsp;Respect turnover constraints

5. TRACK:
&nbsp;&nbsp;&nbsp;Monitor posterior vs equilibrium gap
&nbsp;&nbsp;&nbsp;Report attribution: equilibrium + momentum alpha
</code></pre>






                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#key-insight" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Key Insight</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#view-types" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">View Types</a>
<a href="#key-concepts" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Key Concepts</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#weight-change-interpretation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Weight Change Interpretation</a>
<a href="#view-confidence-impact" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">View Confidence Impact</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#view-validation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">View Validation</a>
<a href="#integration-with-other-systems" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Integration with Other Systems</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#edge-cases" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Edge Cases</a>
<a href="#implementation-notes" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Implementation Notes</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-"neutral"-anchor" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Neutral" Anchor</a>
<a href="#confidence-scaling" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Confidence Scaling</a>
<a href="#view-quality-matters-more-than-quantity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">View Quality Matters More Than Quantity</a>
<a href="#posterior-vs-equilibrium-difference-=-active-bet-size" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Posterior vs Equilibrium Difference = Active Bet Size</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#stability-improvement" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Stability Improvement</a>
<a href="#view-impact" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">View Impact</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"equilibrium-+-momentum-views"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Equilibrium + Momentum Views"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2023-2025 I ant I Investigates. All rights reserved.
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "BlackLitterman",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = BlackLitterman.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/BlackLitterman.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "period", "label": "Period (14)", "type": "number", "value": 14, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "BlackLitterman", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = BlackLitterman.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>