<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZScore - I ant I Investigates</title>
    <meta name="description" content="ZScore - Technical Indicator">
    <meta name="keywords" content="ZScore, technical indicator, stock analysis">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iantinvestigates.com/indicators/zscore.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="ZScore - I ant I Investigates">
    <meta property="og:description" content="ZScore - Technical Indicator">
    <meta property="og:url" content="https://iantinvestigates.com/indicators/zscore.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://iantinvestigates.com/assets/images/ogp/zscore.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ZScore">
    <meta name="twitter:description" content="ZScore - Technical Indicator">
    <meta name="twitter:image" content="https://iantinvestigates.com/assets/images/ogp/zscore.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">ZScore</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">ZScore</h1>
                <p class="text-lg text-slate-600 leading-relaxed">The Z-Score measures the distance of the current price from its mean in units of standard deviation, normalizing price data for statistical comparison and identification of significant deviations.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["INGESTION<br/>Data Collection"];
A["Gather closing prices<br/>over the lookback period"];
B["Establish period parameter<br/>defining sample size"];
end;
subgraph EVALUATION["EVALUATION<br/>Market Assessment"];
C["Calculate mean price<br/>as central tendency"];
D["Measure price dispersion<br/>via standard deviation"];
end;
subgraph WEIGHTING["WEIGHTING<br/>Importance Assignment"];
E["Express current price deviation<br/>in standard deviation units"];
F["Assign statistical significance<br/>based on Z magnitude"];
end;
subgraph SYNTHESIS["SYNTHESIS<br/>Signal Integration"];
G["Generate unbounded score:<br/>0 = at mean, +/-2 = extreme"];
H["Map to probability thresholds<br/>using normal distribution"];
end;
subgraph OUTCOME["OUTCOME<br/>Trading Decision"];
I["Z below -2.0 with uptrend:<br/>High-probability buy dip"];
J["Z above +2.0 in downtrend:<br/>High-probability short fade"];
K["Wait for Z to cross BACK<br/>through threshold for entry"];
end;
A --> C;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/ZScore.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="z-score-standard-score">Z-Score (Standard Score)</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Z-Score / Standard Score  </p>
<p class="mb-4">Abbreviation: Z, ZS  </p>
<p class="mb-4">Category: Statistical / Normalization  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: The Z-Score measures the distance of the current price from its mean in units of standard deviation, normalizing price data for statistical comparison and identification of significant deviations.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">Step 1: Calculate the Mean (μ)</p>
<p class="mb-4">$$\mu = \frac{1}{N} \sum_{i=0}^{N-1} Price_{t-i}$$</p>

<p class="mb-4">Step 2: Calculate the Standard Deviation (σ)</p>
<p class="mb-4">$$\sigma = \sqrt{\frac{1}{N} \sum_{i=0}^{N-1} (Price_{t-i} - \mu)^2}$$</p>

<p class="mb-4">Step 3: Calculate Z-Score</p>
<p class="mb-4">$$Z_t = \frac{Price_t - \mu}{\sigma}$$</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z = 0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price is exactly at the mean</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z = +2</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price is 2 standard deviations above mean</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z = -2</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price is 2 standard deviations below mean</td></tr>
</table></div>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of Z-Score like a thermometer measuring how "abnormal" the weather is. 0 is average temperature, +2 means unusually hot (top 2.5% of days), -2 means unusually cold (bottom 2.5%). Just like extreme weather reverts to normal, extreme Z-Scores tend to revert to zero.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Bollinger Band setting</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Longer Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">50</td><td class="px-4 py-2 border-b border-[#2a2e39]">More statistical significance</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Threshold ±2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">95%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Events beyond ±2σ are significant</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Threshold ±3.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">99.7%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme outlier events</td></tr>
</table></div>

<h3 id="statistical-probabilities">Statistical Probabilities</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Probability Within Range</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">±1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">68.3%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">±2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">95.4%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">±3.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">99.7%</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range-Bound Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion is reliable</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Statistical Arbitrage</td><td class="px-4 py-2 border-b border-[#2a2e39]">Pairs trading application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Identifying Extensions</td><td class="px-4 py-2 border-b border-[#2a2e39]">Objective extreme detection</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parabolic Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score > +2 can persist ("fat tails")</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Black Swan Events</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score exceeds ±4 or ±5</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Forex Pairs — Excellent for spread trading</p>
<p class="mb-4">- Equities — Mean reversion timing</p>
<p class="mb-4">- Spreads — Pairs trading foundational tool</p>
<p class="mb-4">- Meme Stocks — Fat tails invalidate normal assumptions</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion Buy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score crosses above -2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium-High</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Mean Reversion Sell</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score crosses below +2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium-High</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score crosses above 0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price HH + Z-Score LH</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td></tr>
</table></div>

<h3 id="primary-buy-signal">Primary Buy Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Z-Score(20) &lt; -2.0 (previous bar)
AND Z-Score(20) &gt;= -2.0 (current bar)
AND Price &gt; SMA(200)
THEN → BUY (Mean Reversion in Uptrend)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Z < -2.0</code> + <code>Z turning up</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Long entry zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Z > +2.0</code> + <code>Z turning down</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Short entry zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Price > SMA(200)</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only buy dips in uptrends</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Confluence of extremes increases reliability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Visual representation of ±2σ</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Characteristic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Statistical measure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period bars</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Fat Tail Problem: In parabolic moves, Z-Score can stay above +2 or +3 for weeks. Mean reversion trades can get crushed.</blockquote>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Division by Zero: When price hasn't changed for N bars, Standard Deviation = 0, causing calculation failure.</blockquote>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- Wait for Z to cross back through the threshold (not first touch)</p>
<p class="mb-4">- Ensure Z-Score line has peaked and turned over before fading</p>
<p class="mb-4">- Use trend filters to avoid fighting the trend</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-3-sigma-rule">The 3-Sigma Rule</h3>

<p class="mb-4">Events beyond 3 standard deviations are extremely rare (0.3% probability). When Z-Score hits ±3.0, the rubber band is stretched to breaking point. A snap-back is almost guaranteed—unless a fundamental paradigm shift has occurred.</p>

<h3 id="pairs-trading-goldmine">Pairs Trading Goldmine</h3>

<p class="mb-4">Calculate the Z-Score of the price *spread* between two correlated assets. When the spread's Z-Score exceeds ±2.0, trade the convergence.</p>

<h3 id="confluence-is-key">Confluence is Key</h3>

<p class="mb-4">Never use Z-Score alone. A Z-Score of -2.0 *plus* a key support level *plus* RSI oversold creates a high-probability trade.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"Z-Score tells you how 'weird' the price is—the weirder it gets, the more likely it reverts to normal."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">The Z-Score is a fundamental statistical concept: "How many standard deviations away from average is this data point?"</p>

<p class="mb-4">In trading, this normalization enables:</p>
<p class="mb-4">1. Cross-Asset Comparison: A $10 move means different things for different stocks. Z = +2 means the same everywhere.</p>
<p class="mb-4">2. Probability Assignment: Normal distribution tables give exact probabilities for any Z-Score</p>
<p class="mb-4">3. Mean Reversion Quantification: Objectively identify "extreme" valuations</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">- Regression to the mean is a fundamental statistical phenomenon</p>
<p class="mb-4">- Extreme deviations require extreme information that rarely sustains</p>

<h3 id="empirical-evidence">Empirical Evidence</h3>

<p class="mb-4">In mean-reverting assets (forex pairs, spreads), entering at Z < -2 and exiting at Z = 0 shows positive expectancy across backtests.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"z-score-mean-reversion"">Strategy Name: "Z-Score Mean Reversion"</h3>

<p class="mb-4">Entry Rules:</p>
<p class="mb-4">1. Z-Score(20) drops below -2.0</p>
<p class="mb-4">2. Price is above 200-period SMA (Uptrend filter)</p>
<p class="mb-4">3. Enter when Z-Score crosses back above -2.0</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Z-Score reaches 0 (Mean reached)</p>
<p class="mb-4">2. OR Z-Score rises above +1.0</p>
<p class="mb-4">3. Stop loss: If Z-Score drops below -3.0</p>

<p class="mb-4">Position Sizing: 1.5% risk</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trending Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z > +2 persists in parabolic trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use trend filter</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Black Swans</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z < -5 destroys mean reversion shorts</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stop losses mandatory</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">- Averaging down into increasingly extreme Z-Scores</p>
<p class="mb-4">- Ignoring trend context due to "statistical confidence"</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="statistical-foundation">Statistical Foundation</h3>

<p class="mb-4">Based on Carl Friedrich Gauss's work on normal distribution. Standard in all statistical textbooks.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Sibling — Visually represents ±2σ</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">%B</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child — Normalized position within BB</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Deviation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Component — Denominator of Z-Score</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger %B</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Scale</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Statistical Basis</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard deviation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard deviation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gain/Loss ratio</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Visual Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oscillator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Overlay bands</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oscillator</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Quantitative analysis</td><td class="px-4 py-2 border-b border-[#2a2e39]">Visual extremes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Momentum</td></tr>
</table></div>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Z-Score</td><td class="px-4 py-2 border-b border-[#2a2e39]">Statistical Rarity</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> +3.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.13%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare counter-trend (with filter)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">+2.0 to +3.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.3%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">Watch for reversal signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">+1.0 to +2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">16%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Above average</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend may continue</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">-1.0 to +1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">68%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normal</td><td class="px-4 py-2 border-b border-[#2a2e39]">No signal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">-2.0 to -1.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">16%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Below average</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend may continue</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">-3.0 to -2.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">2.3%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">Watch for reversal signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< -3.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">0.13%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare counter-trend (with filter)</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="mean-reversion-buy">Mean Reversion Buy</h4>

<p class="mb-4">This signal triggers when Z-Score crosses back above -2.0 (the 95th percentile threshold) while price remains above the 200 SMA, indicating an extreme oversold condition is reversing within an established uptrend. Events beyond ±2σ are statistically rare (only 2.5% probability each tail), so reversions from these extremes carry strong statistical edge. The trend filter is essential—mean reversion against the primary trend has historically high failure rates.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def zscore_buy_signal(zscore, price, sma200):
&nbsp;&nbsp;&nbsp;&nbsp;return (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zscore[-1] &gt; -2.0 and
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zscore[-2] &lt;= -2.0 and  # Crossed above -2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;price[-1] &gt; sma200[-1]  # Uptrend filter
&nbsp;&nbsp;&nbsp;&nbsp;)
</code></pre>

<h4 id="bearish-divergence">Bearish Divergence</h4>

<p class="mb-4">This divergence pattern occurs when price makes a higher high while Z-Score makes a lower high over the lookback period, signaling that the statistical extension is weakening despite continued price gains. This momentum exhaustion often precedes sharp reversals as the "rubber band" of mean reversion begins to pull. Divergence signals are particularly powerful when Z-Score has previously exceeded +2.0 and is now failing to maintain those extreme levels.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def zscore_bearish_divergence(price, zscore, lookback=10):
&nbsp;&nbsp;&nbsp;&nbsp;price_hh = price[-1] &gt; max(price[-lookback:-1])
&nbsp;&nbsp;&nbsp;&nbsp;zscore_lh = zscore[-1] &lt; max(zscore[-lookback:-1])
&nbsp;&nbsp;&nbsp;&nbsp;return price_hh and zscore_lh
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="mean-reversion-scan">Mean Reversion Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Z_Score(20) &lt; -2.0
AND Price &gt; SMA(200)
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="z-score-+-rsi-confluence">Z-Score + RSI Confluence</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FILTER:
&nbsp;&nbsp;Price &gt; SMA(200)

ENTRY:
&nbsp;&nbsp;Z_Score &lt; -2.0
&nbsp;&nbsp;AND RSI &lt; 30

STOP_LOSS:
&nbsp;&nbsp;Z_Score &lt; -3.0

TAKE_PROFIT:
&nbsp;&nbsp;Z_Score reaches 0
</code></pre>





                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#statistical-probabilities" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Statistical Probabilities</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-3-sigma-rule" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The 3-Sigma Rule</a>
<a href="#pairs-trading-goldmine" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Pairs Trading Goldmine</a>
<a href="#confluence-is-key" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Confluence is Key</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#empirical-evidence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Empirical Evidence</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"z-score-mean-reversion"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Z-Score Mean Reversion"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#statistical-foundation" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Statistical Foundation</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2023-2025 I ant I Investigates. All rights reserved.
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "ZScore",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 20;
                const result = ZScore.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/ZScore.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "period", "label": "Period (20)", "type": "number", "value": 20, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "ZScore", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 20;
                const result = ZScore.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>