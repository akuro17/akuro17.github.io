<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MassIndex - I ant I Investigates</title>
    <meta name="description" content="MassIndex - Technical Indicator">
    <meta name="keywords" content="MassIndex, technical indicator, stock analysis">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3375094177283762"
         crossorigin="anonymous"></script>
    <!-- Canonical URL -->
    <link rel="canonical" href="https://akuro17.github.io/indicators/massindex.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="MassIndex - I ant I Investigates">
    <meta property="og:description" content="MassIndex - Technical Indicator">
    <meta property="og:url" content="https://akuro17.github.io/indicators/massindex.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://akuro17.github.io/assets/images/ogp/massindex.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MassIndex">
    <meta name="twitter:description" content="MassIndex - Technical Indicator">
    <meta name="twitter:image" content="https://akuro17.github.io/assets/images/ogp/massindex.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
        {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "headline": "MassIndex Technical Indicator",
            "description": "The Mass Index identifies trend reversals by detecting \"range bulges\"\u2014when volatility expands then contracts\u2014signaling that the current trend's energy is exhausting.",
            "image": "https://akuro17.github.io/assets/images/ogp/massindex.png",
            "author": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "url": "https://akuro17.github.io"
            },
            "publisher": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://akuro17.github.io/assets/images/logo.png"
                }
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://akuro17.github.io/indicators/massindex.html"
            },
            "about": {
                "@type": "SoftwareSourceCode",
                "name": "MassIndex Indicator Code",
                "programmingLanguage": [
                    "C#",
                    "Python"
                ]
            }
        },
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://akuro17.github.io/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Indicators",
                    "item": "https://akuro17.github.io/indicators/"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "MassIndex",
                    "item": "https://akuro17.github.io/indicators/massindex.html"
                }
            ]
        }
    ]
}
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">MassIndex</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">MassIndex</h1>
                <p class="text-lg text-slate-600 leading-relaxed">The Mass Index identifies trend reversals by detecting "range bulges"—when volatility expands then contracts—signaling that the current trend's energy is exhausting.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive OHLC Price Data"/];
B["Capture Daily High-Low Range"];
C["Define Smoothing Parameters"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Smooth Range via First EMA"];
E["Double-Smooth via Second EMA"];
F["Calculate Range Expansion Ratio"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
G["Accumulate Ratios Over Period"];
H["Track Volatility Tension"];
I["Identify Expansion Threshold"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
J["Detect Reversal Bulge Pattern"];
K["Monitor Above 27 Phase"];
L["Track Below 26.5 Contraction"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
M{"Volatility Pattern Detection?"};
N["Bulge Complete = Trend Exhaustion"];
O["MI < 20 = Squeeze Pending"];
P["Normal Range = No Signal"];
Q[/"Generate Reversal Alert Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Bulge Pattern| N;
M -->|Compression| O;
M -->|Normal| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/MassIndex.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="mass-index">Mass Index</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Mass Index  </p>
<p class="mb-4">Abbreviation: MI / MASS  </p>
<p class="mb-4">Category: Volatility Reversal  </p>
<p class="mb-4">Creator: Donald Dorsey, 1992  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: The Mass Index identifies trend reversals by detecting "range bulges"—when volatility expands then contracts—signaling that the current trend's energy is exhausting.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">The Mass Index uses double EMA smoothing of the daily range:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Formula</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Range = High - Low$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily trading range</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">$EMA_{single} = EMA(Range, 9)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">First smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">$EMA_{double} = EMA(EMA_{single}, 9)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Second smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Ratio = \frac{EMA_{single}}{EMA_{double}}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility expansion ratio</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5</td><td class="px-4 py-2 border-b border-[#2a2e39]">$Mass\ Index = \sum_{i=1}^{25} Ratio_i$</td><td class="px-4 py-2 border-b border-[#2a2e39]">25-period sum</td></tr>
</table></div>

<h3 id="key-threshold:-the-reversal-bulge">Key Threshold: The Reversal Bulge</h3>

<p class="mb-4">The signature pattern is the Reversal Bulge:</p>
<p class="mb-4">1. Mass Index rises above 27.0 (volatility expansion)</p>
<p class="mb-4">2. Mass Index falls below 26.5 (volatility contraction)</p>

<p class="mb-4">This expansion-contraction cycle signals trend exhaustion.</p>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of the Mass Index like the tension in a rubber band. When you stretch a rubber band (volatility expands), tension builds. When you release it slightly (volatility contracts), it snaps back. The Market's price action is elastic—a "bulge" in the Mass Index shows the market has stretched to unsustainable levels and is about to snap back (reverse).</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">9</td><td class="px-4 py-2 border-b border-[#2a2e39]">Dorsey's original specification</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Summation Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">25</td><td class="px-4 py-2 border-b border-[#2a2e39]">Creates index centered around 25</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bulge Upper Threshold</td><td class="px-4 py-2 border-b border-[#2a2e39]">27.0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Expansion trigger</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bulge Lower Threshold</td><td class="px-4 py-2 border-b border-[#2a2e39]">26.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Contraction confirmation</td></tr>
</table></div>

<h3 id="alternative-settings">Alternative Settings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Use Case</td><td class="px-4 py-2 border-b border-[#2a2e39]">Thresholds</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Standard</td><td class="px-4 py-2 border-b border-[#2a2e39]">27.0 / 26.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Dorsey's original</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Scalping</td><td class="px-4 py-2 border-b border-[#2a2e39]">26.0 / 25.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">More frequent signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Conservative</td><td class="px-4 py-2 border-b border-[#2a2e39]">27.5 / 26.5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fewer, stronger signals</td></tr>
</table></div>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Reversals</td><td class="px-4 py-2 border-b border-[#2a2e39]">Specifically designed for catching exhaustion points</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Correction Endings</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility expansion during corrections often precedes reversal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Elastic Snap-Backs</td><td class="px-4 py-2 border-b border-[#2a2e39]">Markets with tendency for mean reversion</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Direction Blindness</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mass Index has NO directional bias—doesn't tell you which way</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">In powerful trends, "bulges" can be false signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">If High = Low (flat), calculation breaks</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Forex — Good for identifying momentum exhaustion</p>
<p class="mb-4">- Equities — Strong for swing trade reversal timing</p>
<p class="mb-4">- Futures — Useful for commodity reversals</p>
<p class="mb-4">- Crypto — Works but requires trend filter due to extended trending</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal Bulge (Bullish)</td><td class="px-4 py-2 border-b border-[#2a2e39]">MI > 27 then < 26.5 in downtrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal Bulge (Bearish)</td><td class="px-4 py-2 border-b border-[#2a2e39]">MI > 27 then < 26.5 in uptrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility Squeeze</td><td class="px-4 py-2 border-b border-[#2a2e39]">MI drops below 20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout imminent (either direction)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Squeeze Breakout (Long)</td><td class="px-4 py-2 border-b border-[#2a2e39]">MI < 20, then price breaks resistance</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Squeeze Breakout (Short)</td><td class="px-4 py-2 border-b border-[#2a2e39]">MI < 20, then price breaks support</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
</table></div>

<h3 id="primary-signal:-reversal-bulge">Primary Signal: Reversal Bulge</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Mass Index rises above 27.0
AND Mass Index then falls below 26.5
AND Trend Filter shows DOWNTREND (e.g., Price &lt; 50 EMA)
THEN → BUY (Bullish Reversal)
</code></pre>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Mass Index rises above 27.0  
AND Mass Index then falls below 26.5
AND Trend Filter shows UPTREND (e.g., Price &gt; 50 EMA)
THEN → SELL (Bearish Reversal)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">The Mass Index is non-directional—it must be paired with a trend indicator.</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Price > 50 EMA</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Uptrend bias—bulge signals bearish reversal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>Price < 50 EMA</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Downtrend bias—bulge signals bullish reversal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>EMA(50) > EMA(200)</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Major uptrend—bulges = buy dips</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">50-period EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Essential directional filter</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">200-period SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Major trend context</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Candlestick Patterns</td><td class="px-4 py-2 border-b border-[#2a2e39]">Confirm reversal timing after bulge</td></tr>
</table></div>

<h3 id="example-combined-strategy">Example Combined Strategy</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
CONTEXT:
&nbsp;&nbsp;Price &gt; 200 SMA (Major Uptrend)
&nbsp;&nbsp;Price &lt; 50 EMA (Short-term pullback)
&nbsp;&nbsp;
SETUP:
&nbsp;&nbsp;Mass Index &gt; 27 then &lt; 26.5 (Reversal Bulge)
&nbsp;&nbsp;
ACTION:
&nbsp;&nbsp;BUY (Pullback ending, resume major uptrend)
&nbsp;&nbsp;STOP: Below recent swing low
&nbsp;&nbsp;TARGET: Previous high or 2× Risk
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid MI</td><td class="px-4 py-2 border-b border-[#2a2e39]">~43 bars (9 + 9 + 25)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bulge Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">2-5 bars after volatility peak</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: The Mass Index is a *non-directional* indicator. Using it without a trend filter will produce random signals that alternate between profitable and devastating.</blockquote>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. The Strong Trend Trap  </p>
<p class="mb-4">   During powerful trends, volatility bulges but trend continues. The "reversal" is just a brief pause.</p>

<p class="mb-4">2. The Double Bulge  </p>
<p class="mb-4">   Sometimes MI bulges twice before price actually reverses—first bulge is false.</p>

<p class="mb-4">3. Range = 0 Error  </p>
<p class="mb-4">   If High = Low for the EMA period, Double EMA = 0 causing division error.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- Mandatory Trend Filter: Never trade Mass Index signals without EMA/SMA direction</p>
<p class="mb-4">- Wait for Candlestick Confirmation: After bulge, wait for Hammer/Shooting Star</p>
<p class="mb-4">- Avoid Strong ADX Readings: If ADX > 40, trend may persist despite bulge</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-"trend-rejection"-play">The "Trend Rejection" Play</h3>

<p class="mb-4">The Mass Index excels at timing the *end of corrections within a trend*:</p>
<p class="mb-4">1. Market is in a clear uptrend (Price > 200 SMA)</p>
<p class="mb-4">2. Price corrects down for 3-5 days</p>
<p class="mb-4">3. Mass Index "Bulges" during the correction</p>
<p class="mb-4">4. Buy the bulge completion to rejoin the main trend</p>

<p class="mb-4">This is the highest-probability Mass Index signal.</p>

<h3 id="the-volatility-squeeze">The Volatility Squeeze</h3>

<p class="mb-4">When Mass Index falls below 20, volatility has collapsed to unusual levels. This is the "coiled spring"—a major move is coming. Prepare for breakout:</p>
<p class="mb-4">- Set Buy Stop above resistance</p>
<p class="mb-4">- Set Sell Stop below support</p>
<p class="mb-4">- Enter in the direction of the first breakout</p>

<h3 id="combining-with-bollinger-band-width">Combining with Bollinger Band Width</h3>

<p class="mb-4">Mass Index < 20 often corresponds with Bollinger Band squeeze. Using both creates a "double squeeze" confirmation for explosive breakouts.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"The Mass Index watches volatility stretch and snap—when the bulge contracts, the trend's elastic limit has been reached and reversal is imminent."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">The Mass Index answers: "Has the market stretched too far and is about to snap back?"</p>

<p class="mb-4">Unlike price-based indicators, Mass Index focuses on *range*—the distance between High and Low each day. When this range expands then contracts rapidly (the "Bulge"), it signals that the current movement has exhausted itself, like a runner gasping for breath after a sprint.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">Dorsey's research found that volatility behaves elastically. Extended volatility expansion must eventually contract—and this contraction often coincides with trend exhaustion. The 27/26.5 thresholds represent statistically significant expansion beyond normal range.</p>

<h3 id="the-elasticity-theory">The Elasticity Theory</h3>

<p class="mb-4">Markets oscillate between states of compression and expansion. The Mass Index quantifies this by comparing single to double smoothed ranges. A ratio > 1.0 indicates the current range is wider than the "normal" (double-smoothed) range—tension is building.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"trend-resumption-bulge"">Strategy Name: "Trend Resumption Bulge"</h3>

<p class="mb-4">Concept: Use Mass Index to time entries into corrections within a major trend.</p>

<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. Price > 200 SMA (Major Uptrend)</p>
<p class="mb-4">2. Current pullback: Price < 50 EMA</p>
<p class="mb-4">3. Mass Index completes Reversal Bulge (> 27, then < 26.5)</p>

<p class="mb-4">Entry Trigger:</p>
<p class="mb-4">- Mass Index crosses below 26.5</p>
<p class="mb-4">- Bullish reversal candlestick (Hammer, Engulfing)</p>

<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Target: Previous swing high</p>
<p class="mb-4">2. Stop Loss: Below swing low of pullback</p>
<p class="mb-4">3. Trailing Stop: 50 EMA as trailing stop</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trend Override</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bulge occurs but trend persists</td><td class="px-4 py-2 border-b border-[#2a2e39]">Check ADX; if > 40, be cautious</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Directionless Application</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trading without trend filter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mandatory EMA pairing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Division by Zero</td><td class="px-4 py-2 border-b border-[#2a2e39]">Double EMA of range = 0</td><td class="px-4 py-2 border-b border-[#2a2e39]">Code handles with null</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Double Bulge Trap</td><td class="px-4 py-2 border-b border-[#2a2e39]">First bulge is false, second is real</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wait for candlestick confirmation</td></tr>
</table></div>

<h3 id="common-misinterpretations">Common Misinterpretations</h3>

<p class="mb-4">- "Bulge = immediately reverse" → It signals *potential*; use candlesticks for timing</p>
<p class="mb-4">- "Higher MI = stronger trend" → Mass Index is not directional</p>
<p class="mb-4">- "Can use it alone" → Without trend filter, 50% of signals go against you</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Donald Dorsey introduced the Mass Index in the June 1992 issue of *Technical Analysis of Stocks & Commodities* magazine. His focus on "Range Oscillation Analysis" led to the discovery that volatility patterns precede reversals.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Component — Double smoothing mechanism</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">True Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Alternative range measure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Band Width</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Alternative volatility squeeze</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *Technical Analysis of Stocks & Commodities* — June 1992 article by Donald Dorsey</p>
<p class="mb-4">2. *Encyclopedia of Technical Market Indicators* — Robert Colby</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mass Index</td><td class="px-4 py-2 border-b border-[#2a2e39]">ATR</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bollinger Width</td><td class="px-4 py-2 border-b border-[#2a2e39]">Chaikin Volatility</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Measures</td><td class="px-4 py-2 border-b border-[#2a2e39]">Range expansion/contraction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Average range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price dispersion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Range change rate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">~20-30</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Directional</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td><td class="px-4 py-2 border-b border-[#2a2e39]">No</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Key Signal</td><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal Bulge</td><td class="px-4 py-2 border-b border-[#2a2e39]">Breakout</td><td class="px-4 py-2 border-b border-[#2a2e39]">Squeeze</td><td class="px-4 py-2 border-b border-[#2a2e39]">Expansion</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best Use</td><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal timing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stop placement</td><td class="px-4 py-2 border-b border-[#2a2e39]">Squeeze detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility change</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- Mass Index — Timing trend reversals</p>
<p class="mb-4">- ATR — Position sizing, stop distances</p>
<p class="mb-4">- Bollinger Width — Squeeze detection</p>
<p class="mb-4">- Chaikin Volatility — Rate of volatility change</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">MI Level</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme compression</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility squeeze—breakout imminent</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare bracket orders</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">20-25</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normal</td><td class="px-4 py-2 border-b border-[#2a2e39]">Baseline volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">No special signal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">25-27</td><td class="px-4 py-2 border-b border-[#2a2e39]">Elevated</td><td class="px-4 py-2 border-b border-[#2a2e39]">Watching for expansion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Prepare for bulge</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">> 27</td><td class="px-4 py-2 border-b border-[#2a2e39]">Expansion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Volatility peak</td><td class="px-4 py-2 border-b border-[#2a2e39]">First leg of bulge</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">< 26.5 (after > 27)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Contraction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bulge complete</td><td class="px-4 py-2 border-b border-[#2a2e39]">Reversal signal triggered</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="reversal-bulge-detection">Reversal Bulge Detection</h4>

<p class="mb-4">This pattern detects Dorsey's signature "Reversal Bulge"—when Mass Index rises above 27.0 (volatility expansion) then falls below 26.5 (contraction). The direction of the reversal depends on the prior trend: bulge in a downtrend signals bullish reversal, while bulge in an uptrend signals bearish reversal. A mandatory trend filter is required because Mass Index is non-directional.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def mass_index_bulge(mi, mi_history, trend_direction):
&nbsp;&nbsp;&nbsp;&nbsp;# Check if MI went above 27 recently and now below 26.5
&nbsp;&nbsp;&nbsp;&nbsp;above_27_recently = any(m &gt; 27 for m in mi_history[-10:])
&nbsp;&nbsp;&nbsp;&nbsp;below_265_now = mi &lt; 26.5
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if above_27_recently and below_265_now:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if trend_direction == &quot;DOWN&quot;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;BULLISH_REVERSAL&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif trend_direction == &quot;UP&quot;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;BEARISH_REVERSAL&quot;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return None
</code></pre>

<h4 id="volatility-squeeze-detection">Volatility Squeeze Detection</h4>

<p class="mb-4">This signal fires when Mass Index falls below 20, indicating extreme volatility compression—the market is coiling like a spring. Low MI readings often precede explosive directional moves. Use bracket orders (buy stop and sell stop) to capture the breakout in whichever direction it goes.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def mass_index_squeeze(mi):
&nbsp;&nbsp;&nbsp;&nbsp;return mi &lt; 20  # Extreme contraction = pending breakout
</code></pre>

<h4 id="squeeze-breakout-signal">Squeeze Breakout Signal</h4>

<p class="mb-4">This signal combines the volatility squeeze condition with a directional price breakout. When Mass Index indicates compressed volatility (MI < 20) and price breaks a key level, the resulting move tends to be explosive and sustained. This is the Mass Index equivalent of the "TTM Squeeze" concept.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def squeeze_breakout(mi, mi_prev, price, resistance, support):
&nbsp;&nbsp;&nbsp;&nbsp;squeeze_active = mi_prev &lt; 20
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if squeeze_active:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if price &gt; resistance:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;LONG_BREAKOUT&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif price &lt; support:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;SHORT_BREAKOUT&quot;
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return None
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="reversal-bulge-scanner">Reversal Bulge Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
MassIndex(9, 25)[5:0] any &gt; 27  // Crossed 27 in last 5 bars
AND MassIndex(9, 25) &lt; 26.5     // Now below 26.5
AND Close &lt; EMA(50)              // Downtrend (for bullish signal)
</code></pre>

<h4 id="squeeze-breakout-scanner">Squeeze Breakout Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
MassIndex(9, 25) &lt; 20
AND Volume &gt; SMA(Volume, 20) * 1.5
// Low volatility + volume spike = imminent breakout
</code></pre>

<h4 id="trend-resumption-scanner">Trend Resumption Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Close &gt; SMA(200)                 // Major uptrend
AND Close &lt; EMA(50)              // In pullback
AND MassIndex(9, 25)[1] &gt; 27     // Yesterday above 27
AND MassIndex(9, 25) &lt; 26.5      // Today completes bulge
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="mass-index-+-ema-trend-strategy">Mass Index + EMA Trend Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
CONTEXT:
&nbsp;&nbsp;Determine trend: EMA(50) vs EMA(200)
&nbsp;&nbsp;
IF EMA(50) &gt; EMA(200):  // Uptrend
&nbsp;&nbsp;WHEN MassIndex bulge completes during pullback
&nbsp;&nbsp;BUY on bullish candlestick confirmation
&nbsp;&nbsp;STOP below swing low
&nbsp;&nbsp;TARGET previous high

IF EMA(50) &lt; EMA(200):  // Downtrend
&nbsp;&nbsp;WHEN MassIndex bulge completes during rally
&nbsp;&nbsp;SELL on bearish candlestick confirmation
&nbsp;&nbsp;STOP above swing high
&nbsp;&nbsp;TARGET previous low
</code></pre>

<h4 id="mass-index-+-bollinger-squeeze-strategy">Mass Index + Bollinger Squeeze Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SQUEEZE DETECTION:
&nbsp;&nbsp;MassIndex &lt; 20
&nbsp;&nbsp;AND BollingerBandWidth &lt; 1-year low
&nbsp;&nbsp;
ENTRY:
&nbsp;&nbsp;Price breaks above Upper Bollinger Band → LONG
&nbsp;&nbsp;Price breaks below Lower Bollinger Band → SHORT
&nbsp;&nbsp;
CONFIRMATION:
&nbsp;&nbsp;Volume &gt; 2× average
</code></pre>





                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#key-threshold:-the-reversal-bulge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Key Threshold: The Reversal Bulge</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#alternative-settings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Alternative Settings</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-signal:-reversal-bulge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Signal: Reversal Bulge</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-"trend-rejection"-play" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Trend Rejection" Play</a>
<a href="#the-volatility-squeeze" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The Volatility Squeeze</a>
<a href="#combining-with-bollinger-band-width" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combining with Bollinger Band Width</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#the-elasticity-theory" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The Elasticity Theory</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"trend-resumption-bulge"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Trend Resumption Bulge"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2026 I ant I Investigates
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "MassIndex",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const emaPeriod = params.emaPeriod || 9;
                const sumPeriod = params.sumPeriod || 25;
                const result = MassIndex.calculate(data, emaPeriod, sumPeriod);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/MassIndex.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "emaPeriod", "label": "Emaperiod (9)", "type": "number", "value": 9, "min": 2, "max": 100}, {"id": "sumPeriod", "label": "Sumperiod (25)", "type": "number", "value": 25, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "MassIndex", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const emaPeriod = params.emaPeriod || 9;
                const sumPeriod = params.sumPeriod || 25;
                const result = MassIndex.calculate(data, emaPeriod, sumPeriod);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>