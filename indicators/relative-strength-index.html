<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Relative Strength Index | RSI</title>
<meta name="description" content="Detailed visualization and documentation for RSI financial indicator.">
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "TechArticle",
"headline": "Relative Strength Index (RSI)",
"description": "Detailed visualization and documentation for RSI financial indicator.",
"author": {
"@type": "Organization",
"name": "I and I Investigates"
}
}
</script>
<script type="application/ld+json" src="../assets/schema/indicator_schema.json"></script>
<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="../assets/css/style.css">
<style>
/* Injected Pygments CSS for Code Highlighting */
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #49483e }
.highlight .c { color: #959077 } /* Comment */
.highlight .err { color: #ED007E; background-color: #1E0010 } /* Error */
.highlight .esc { color: #F8F8F2 } /* Escape */
.highlight .g { color: #F8F8F2 } /* Generic */
.highlight .k { color: #66D9EF } /* Keyword */
.highlight .l { color: #AE81FF } /* Literal */
.highlight .n { color: #F8F8F2 } /* Name */
.highlight .o { color: #FF4689 } /* Operator */
.highlight .x { color: #F8F8F2 } /* Other */
.highlight .p { color: #F8F8F2 } /* Punctuation */
.highlight .ch { color: #959077 } /* Comment.Hashbang */
.highlight .cm { color: #959077 } /* Comment.Multiline */
.highlight .cp { color: #959077 } /* Comment.Preproc */
.highlight .cpf { color: #959077 } /* Comment.PreprocFile */
.highlight .c1 { color: #959077 } /* Comment.Single */
.highlight .cs { color: #959077 } /* Comment.Special */
.highlight .gd { color: #FF4689 } /* Generic.Deleted */
.highlight .ge { color: #F8F8F2; font-style: italic } /* Generic.Emph */
.highlight .ges { color: #F8F8F2; font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #F8F8F2 } /* Generic.Error */
.highlight .gh { color: #F8F8F2 } /* Generic.Heading */
.highlight .gi { color: #A6E22E } /* Generic.Inserted */
.highlight .go { color: #66D9EF } /* Generic.Output */
.highlight .gp { color: #FF4689; font-weight: bold } /* Generic.Prompt */
.highlight .gs { color: #F8F8F2; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #959077 } /* Generic.Subheading */
.highlight .gt { color: #F8F8F2 } /* Generic.Traceback */
.highlight .kc { color: #66D9EF } /* Keyword.Constant */
.highlight .kd { color: #66D9EF } /* Keyword.Declaration */
.highlight .kn { color: #FF4689 } /* Keyword.Namespace */
.highlight .kp { color: #66D9EF } /* Keyword.Pseudo */
.highlight .kr { color: #66D9EF } /* Keyword.Reserved */
.highlight .kt { color: #66D9EF } /* Keyword.Type */
.highlight .ld { color: #E6DB74 } /* Literal.Date */
.highlight .m { color: #AE81FF } /* Literal.Number */
.highlight .s { color: #E6DB74 } /* Literal.String */
.highlight .na { color: #A6E22E } /* Name.Attribute */
.highlight .nb { color: #F8F8F2 } /* Name.Builtin */
.highlight .nc { color: #A6E22E } /* Name.Class */
.highlight .no { color: #66D9EF } /* Name.Constant */
.highlight .nd { color: #A6E22E } /* Name.Decorator */
.highlight .ni { color: #F8F8F2 } /* Name.Entity */
.highlight .ne { color: #A6E22E } /* Name.Exception */
.highlight .nf { color: #A6E22E } /* Name.Function */
.highlight .nl { color: #F8F8F2 } /* Name.Label */
.highlight .nn { color: #F8F8F2 } /* Name.Namespace */
.highlight .nx { color: #A6E22E } /* Name.Other */
.highlight .py { color: #F8F8F2 } /* Name.Property */
.highlight .nt { color: #FF4689 } /* Name.Tag */
.highlight .nv { color: #F8F8F2 } /* Name.Variable */
.highlight .ow { color: #FF4689 } /* Operator.Word */
.highlight .pm { color: #F8F8F2 } /* Punctuation.Marker */
.highlight .w { color: #F8F8F2 } /* Text.Whitespace */
.highlight .mb { color: #AE81FF } /* Literal.Number.Bin */
.highlight .mf { color: #AE81FF } /* Literal.Number.Float */
.highlight .mh { color: #AE81FF } /* Literal.Number.Hex */
.highlight .mi { color: #AE81FF } /* Literal.Number.Integer */
.highlight .mo { color: #AE81FF } /* Literal.Number.Oct */
.highlight .sa { color: #E6DB74 } /* Literal.String.Affix */
.highlight .sb { color: #E6DB74 } /* Literal.String.Backtick */
.highlight .sc { color: #E6DB74 } /* Literal.String.Char */
.highlight .dl { color: #E6DB74 } /* Literal.String.Delimiter */
.highlight .sd { color: #E6DB74 } /* Literal.String.Doc */
.highlight .s2 { color: #E6DB74 } /* Literal.String.Double */
.highlight .se { color: #AE81FF } /* Literal.String.Escape */
.highlight .sh { color: #E6DB74 } /* Literal.String.Heredoc */
.highlight .si { color: #E6DB74 } /* Literal.String.Interpol */
.highlight .sx { color: #E6DB74 } /* Literal.String.Other */
.highlight .sr { color: #E6DB74 } /* Literal.String.Regex */
.highlight .s1 { color: #E6DB74 } /* Literal.String.Single */
.highlight .ss { color: #E6DB74 } /* Literal.String.Symbol */
.highlight .bp { color: #F8F8F2 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #A6E22E } /* Name.Function.Magic */
.highlight .vc { color: #F8F8F2 } /* Name.Variable.Class */
.highlight .vg { color: #F8F8F2 } /* Name.Variable.Global */
.highlight .vi { color: #F8F8F2 } /* Name.Variable.Instance */
.highlight .vm { color: #F8F8F2 } /* Name.Variable.Magic */
.highlight .il { color: #AE81FF } /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id="app">
<div class="min-h-screen pb-20 p-6 max-w-7xl mx-auto">
<header id="site-header" class="mb-8 border-b border-[var(--border-color)] pb-4">
<h1 class="text-2xl font-bold text-[var(--text-primary)] flex items-center gap-2">
<span class="text-[var(--accent)]">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<rect x="3" y="3" width="18" height="18" rx="2" />
<path d="M8 12h8" />
<path d="M12 8v8" />
</svg>
</span>
Relative Strength Index (RSI)
</h1>
<p class="text-[var(--text-muted)] mt-2">RSI is a normalized momentum oscillator that measures the ratio of average gains to average losses, bounded between 0 and 100, to identify overbought and oversold conditions.</p>
</header>
<main id="main-content">
<section id="logic-visualization-section" class="mb-16">
<div class="flex items-center gap-2 mb-4">
<span class="text-[var(--accent)]">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<circle cx="12" cy="12" r="10"></circle>
<line x1="2" y1="12" x2="22" y2="12"></line>
<path
d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
</path>
</svg>
</span>
<h2 class="text-sm font-bold text-[var(--text-muted)] uppercase tracking-wider">Logic Flow & Algorithm Visualization
</h2>
</div>
<figure class="logic-figure">
<figcaption class="logic-caption">
<span>ğŸ“Š</span> RSI Calculation Logic: From Price to Signal
</figcaption>
<div class="absolute top-16 right-4 flex gap-2 z-30">
<button onclick="zoomAction('in')"
class="p-2 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-lg hover:bg-[var(--bg-hover)] text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors shadow-sm"
title="Zoom In">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<circle cx="11" cy="11" r="8"></circle>
<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
<line x1="11" y1="8" x2="11" y2="14"></line>
<line x1="8" y1="11" x2="14" y2="11"></line>
</svg>
</button>
<button onclick="zoomAction('out')"
class="p-2 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-lg hover:bg-[var(--bg-hover)] text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors shadow-sm"
title="Zoom Out">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<circle cx="11" cy="11" r="8"></circle>
<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
<line x1="8" y1="11" x2="14" y2="11"></line>
</svg>
</button>
<button onclick="resetView()"
class="p-2 bg-[var(--bg-card)] border border-[var(--border-color)] rounded-lg hover:bg-[var(--bg-hover)] text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors shadow-sm"
title="Reset">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
<path d="M3 3v5h5"></path>
</svg>
</button>
</div>
<div id="canvas-container" class="chart-scroll-wrapper">
<div id="canvas-transform-layer" style="transform-origin: 0 0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
<div id="canvas-content" class="mermaid" style="pointer-events: auto;">
flowchart TD;
subgraph INGESTION ["Phase 1: Ingestion"];
A[/"Receive Daily Price Changes"/];
B["Calculate Close-to-Close Movement"];
C["Separate Gains from Losses"];
end;
subgraph EVALUATION ["Phase 2: Evaluation"];
D["Measure Winning Day Magnitude"];
E["Measure Losing Day Magnitude"];
F["Build Gain and Loss History"];
end;
subgraph WEIGHTING ["Phase 3: Weighting"];
G["Apply Wilder Smoothing"];
H["Calculate Average Gain"];
I["Calculate Average Loss"];
end;
subgraph SYNTHESIS ["Phase 4: Synthesis"];
J["Compute Relative Strength Ratio"];
K["Normalize to 0-100 Scale"];
L["Track Threshold Levels"];
end;
subgraph OUTCOME ["Phase 5: Outcome"];
M{"Momentum Balance Assessment?"};
N["RSI > 70 = Buyers Dominating"];
O["RSI < 30 = Sellers Exhausted"];
P["Divergence = Momentum Shift Warning"];
Q[/"Generate Overbought-Oversold Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Overbought| N;
M -->|Oversold| O;
M -->|Diverging| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
</div>
</div>
</div>
<div class="logic-legend">
<div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
<div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
<div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
<div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
<div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
</div>
<button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<polyline points="16 18 22 12 16 6" />
<polyline points="8 6 2 12 8 18" />
</svg>
</button>
<div id="code-panel-overlay" class="" onmousedown="event.stopPropagation();">
<div class="code-panel-header flex justify-between items-center p-3 shrink-0">
<div class="flex gap-2">
<button id="btn-lang-csharp"
class="px-2 py-1 text-xs rounded text-[var(--text-muted)] hover:bg-[var(--bg-hover)] transition-colors"
onclick="setLang('csharp')">C#</button>
<button id="btn-lang-python"
class="px-2 py-1 text-xs rounded text-[var(--text-muted)] hover:bg-[var(--bg-hover)] transition-colors"
onclick="setLang('python')">Python</button>
</div>
<div class="flex items-center gap-2">
<button id="btn-type-simple"
class="text-xs text-[var(--text-muted)] hover:text-[var(--accent)] transition-colors"
onclick="setType('simple')">Simple</button>
<button id="btn-type-detailed"
class="text-xs text-[var(--text-muted)] hover:text-[var(--accent)] transition-colors"
onclick="setType('detailed')">Detailed</button>
<button id="btn-copy-code"
class="ml-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors"
onclick="copyCode()" title="Copy Code">
<svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none"
stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" aria-hidden="true">
<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
<path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
</svg>
<svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16"
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
<polyline points="20 6 9 17 4 12"></polyline>
</svg>
</button>
<button id="btn-panel-expand"
class="ml-2 text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors"
onclick="toggleExpand()" title="Expand Width">
<svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none"
stroke="currentColor" stroke-width="2" aria-hidden="true">
<path d="M15 3h6v6" />
<path d="M9 21H3v-6" />
<path d="M21 3l-7 7" />
<path d="M3 21l7-7" />
</svg>
<svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
<path d="M4 14h6v6" />
<path d="M20 10h-6V4" />
<path d="M14 10l7-7" />
<path d="M10 14l-7 7" />
</svg>
</button>
<button
class="text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors"
onclick="toggleCodePanel()" title="Close Panel">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<line x1="18" y1="6" x2="6" y2="18" />
<line x1="6" y1="6" x2="18" y2="18" />
</svg>
</button>
</div>
</div>
<div class="code-panel-body flex-1 overflow-auto custom-scrollbar p-2">
<div id="code-csharp-simple" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">namespace</span><span class="w"> </span><span class="nn">TechnicalIndicators</span></div><div class="code-line" style="white-space: pre;"><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">record</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nf">CandleData</span><span class="p">(</span><span class="n">DateTime</span><span class="w"> </span><span class="n">Timestamp</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Open</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">High</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Low</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Close</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">Volume</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">/// Calculates the Relative Strength Index (RSI), a momentum oscillator that measures the speed and change of price movements.</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">RelativeStrengthIndex</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// Rationale: A tiny epsilon to prevent division by zero when AvgLoss is exactly 0.</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-10m</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Period</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">decimal?</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Values</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// Initializes a new instance of the &lt;see cref=&quot;RelativeStrengthIndex&quot;/&gt; class.</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;param name=&quot;period&quot;&gt;The lookback period (typically 14). Must be positive.&lt;/param&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">RelativeStrengthIndex</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">period</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">ArgumentOutOfRangeException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">period</span><span class="p">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Period must be greater than 0&quot;</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// Computes the RSI values.</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;param name=&quot;candles&quot;&gt;Input time series data.&lt;/param&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Calculate</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">candles</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Values</span><span class="p">.</span><span class="n">Clear</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">candleList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// Rationale: RSI is undefined for the first point as it requires a delta.</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">null</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// Rationale: Calculate price change from previous day.</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">candleList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">.</span><span class="n">Close</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">candleList</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="n">Close</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">gain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">-</span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Loss is stored as positive value</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// Rationale: Accumulate initial gains/losses for the first period (SMA initialization).</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">gain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">loss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">null</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">continue</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// Rationale: The first valid RSI calculation (at i == Period).</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// Uses Simple Moving Average of gains/losses.</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">gain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">loss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgGain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumGains</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgLoss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CalculateRsiValue</span><span class="p">(</span><span class="n">avgGain</span><span class="p">,</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// Update state variables to hold the Average, not the Sum, for the next iteration (Wilder&#x27;s Smoothing).</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgGain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">continue</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// Rationale: Wilder&#x27;s Smoothing for subsequent steps.</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// AvgGain_today = (AvgGain_prev * (N-1) + CurrentGain) / N</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sumGains</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Period</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gain</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sumLosses</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Period</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">loss</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsiValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CalculateRsiValue</span><span class="p">(</span><span class="n">sumGains</span><span class="p">,</span><span class="w"> </span><span class="n">sumLosses</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">rsiValue</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// Rationale: Helper method to apply the final RSI formula: 100 - 100 / (1 + RS)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="nf">CalculateRsiValue</span><span class="p">(</span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgGain</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">avgLoss</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// If loss is 0, RS is infinite =&gt; RSI = 100.</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">avgGain</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span><span class="w"> </span><span class="c1">// No gain, No loss =&gt; Flat =&gt; 50</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgGain</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">avgLoss</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rs</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">rsi</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// Static convenience method to calculate RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">decimal?</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Calculate</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">candles</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RelativeStrengthIndex</span><span class="p">(</span><span class="n">period</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">rsi</span><span class="p">.</span><span class="n">Calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rsi</span><span class="p">.</span><span class="n">Values</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="p">}</span></div></div></div>
<div id="code-csharp-detailed" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// RELATIVE STRENGTH INDEX (RSI) - Extreme Tutorial Mode</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [What] Relative Strength Index (RSI) is the most famous momentum oscillator,</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        developed by J. Welles Wilder Jr. It measures the speed and magnitude</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        of recent price changes on a 0-100 scale.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Why]  Raw momentum values vary wildly across different stocks and timeframes.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        RSI normalizes momentum to a 0-100 scale, making it universal:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI &gt; 70: Overbought (price may be due for a pullback)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI &lt; 30: Oversold (price may be due for a bounce)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI â‰ˆ 50: Neutral (no strong momentum bias)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Visual] RSI Concept - The Gain/Loss Balance:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   Imagine a tug-of-war between bulls and bears:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚  BULLS (Gains)                          BEARS (Losses)       â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•—         RSI 50           â•”â•â•â•â•â•â•â•â•â•â•â•          â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚             â•‘                          â•‘                     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚  Average    â•‘     (Perfect Balance)    â•‘    Average          â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚  Gain       â•‘                          â•‘    Loss             â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚             â•‘                          â•‘                     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚  High RSI â”€â”€â•                          â•šâ”€â”€ Low RSI           â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI 70+: Bulls dominating (overbought - may be exhausted)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI 30-: Bears dominating (oversold - may be exhausted)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [How] Algorithm Overview (Wilder&#x27;s Smoothing Method):</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 1: Calculate price change for each bar                â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         change = Close[i] - Close[i-1]                     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 2: Separate gains and losses                          â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         Gain = max(change, 0), Loss = max(-change, 0)      â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 3: Initial averages (first Period bars)               â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         avgGain = SMA(Gains), avgLoss = SMA(Losses)        â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 4: Wilder&#x27;s Smoothing (subsequent bars)               â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         avgGain = (prevGain Ã— (N-1) + currentGain) / N     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         avgLoss = (prevLoss Ã— (N-1) + currentLoss) / N     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 5: Calculate Relative Strength                        â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         RS = avgGain / avgLoss                              â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚ STEP 6: Convert to RSI                                     â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â”‚         RSI = 100 - (100 / (1 + RS))                       â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Formula]</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RS = Average Gain / Average Loss</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI = 100 - (100 / (1 + RS))</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//       = 100 Ã— avgGain / (avgGain + avgLoss)  [equivalent form]</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">namespace</span><span class="w"> </span><span class="nn">TechnicalIndicators</span></div><div class="code-line" style="white-space: pre;"><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// [What] CandleData: Immutable record for OHLCV price bar data</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="k">record</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nf">CandleData</span><span class="p">(</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="n">DateTime</span><span class="w"> </span><span class="n">Timestamp</span><span class="p">,</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Open</span><span class="p">,</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="kt">decimal</span><span class="w"> </span><span class="n">High</span><span class="p">,</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Low</span><span class="p">,</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Close</span><span class="p">,</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">Volume</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// [What] RelativeStrengthIndex Class: Wilder&#x27;s momentum oscillator (0-100)</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">RelativeStrengthIndex</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] NearZeroThreshold: Prevents division by zero in calculations</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [Why]  When avgLoss is exactly 0, RS becomes infinite. This small</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//        value acts as a safety buffer.</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-10m</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] Period: Number of bars for RSI calculation</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [Why]  Default 14 is Wilder&#x27;s original recommendation</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Period</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] Values: Stores the calculated RSI (0-100) for each bar</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">decimal?</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Values</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] Constructor: Initialize with lookback period</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">RelativeStrengthIndex</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">period</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">ArgumentOutOfRangeException</span><span class="p">(</span><span class="k">nameof</span><span class="p">(</span><span class="n">period</span><span class="p">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Period must be greater than 0&quot;</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] Calculate: Main computation method</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ INPUT:  candles - Collection of OHLCV price bars                â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ PROCESS: Compute avg gains/losses with Wilder smoothing, to RSI â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ OUTPUT: Values list with RSI (0-100) for each bar               â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Calculate</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">candles</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Values</span><span class="p">.</span><span class="n">Clear</span><span class="p">(</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">candleList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] First bar has no previous bar to compare</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Why]  Cannot calculate change, so output null</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">null</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] Accumulators for initial SMA calculation</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] Main loop: Process each bar from index 1 onwards</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Visual] Three Phases of RSI Calculation:</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   Phase A (i &lt; Period): Accumulate gains/losses, output null</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   â”œâ”€ Bar 1: +2, -0 â†’ sumGains=2</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   â”œâ”€ Bar 2: +0, -1 â†’ sumLosses=1</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   â””â”€ ... (13 bars for Period=14)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   Phase B (i == Period): Calculate initial averages with SMA</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   â””â”€ avgGain = sumGains/14, avgLoss = sumLosses/14</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   Phase C (i &gt; Period): Apply Wilder&#x27;s smoothing</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   â””â”€ avgGain = (prevAvg Ã— 13 + currentGain) / 14</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">candleList</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [What] Calculate price change from previous bar</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">candleList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">.</span><span class="n">Close</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">candleList</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="p">.</span><span class="n">Close</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [What] Separate change into gain and loss components</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [Visual] Price Change Separation:</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   Price rose (+3):  Gain = 3, Loss = 0</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   Price fell (-2):  Gain = 0, Loss = 2</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   Price flat (0):   Gain = 0, Loss = 0</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">gain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">loss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">-</span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// PHASE A: Accumulate for Initial Average (Warm-up)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">gain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">loss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">null</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">continue</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// PHASE B: First RSI Calculation (Initial SMA)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [What] Add current bar&#x27;s values to complete the sum</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">gain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">loss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [What] Calculate simple average for initial values</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [Why]  First RSI needs a starting point; SMA is standard</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgGain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumGains</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgLoss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [What] Calculate and store first RSI value</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CalculateRsiValue</span><span class="p">(</span><span class="n">avgGain</span><span class="p">,</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [What] Store averages for next iteration&#x27;s smoothing</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// [Why]  These become &quot;previous averages&quot; for Wilder formula</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgGain</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">continue</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// PHASE C: Wilder&#x27;s Smoothing (Standard Calculation)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [What] Apply Wilder&#x27;s smoothing formula</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [Formula]</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   newAvg = (prevAvg Ã— (Period - 1) + currentValue) / Period</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [Why] Wilder&#x27;s smoothing is similar to EMA but gives more</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//       weight to historical data. It creates smoother RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// [Visual] Smoothing Effect:</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   prevAvgGain = 1.0, currentGain = 5.0, Period = 14</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   newAvgGain = (1.0 Ã— 13 + 5.0) / 14 = 18 / 14 = 1.286</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//   (New value only contributes 1/14 â‰ˆ 7% to the average)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">currentGain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">currentLoss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="o">-</span><span class="n">change</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">sumGains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sumGains</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Period</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">currentGain</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">sumLosses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sumLosses</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Period</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">currentLoss</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Period</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsiValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CalculateRsiValue</span><span class="p">(</span><span class="n">sumGains</span><span class="p">,</span><span class="w"> </span><span class="n">sumLosses</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="n">Values</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">rsiValue</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] CalculateRsiValue: Helper to convert averages to RSI</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ INPUT:  avgGain, avgLoss - Smoothed average gains and losses    â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ PROCESS: Handle edge cases, apply RSI formula                   â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ OUTPUT: RSI value clamped to 0-100 range                        â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="nf">CalculateRsiValue</span><span class="p">(</span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgGain</span><span class="p">,</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">avgLoss</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] Handle edge case: No losses (avgLoss â‰ˆ 0)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Why]  If avgLoss is 0, RS = avgGain/0 = infinity</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//        Need special handling to avoid division by zero</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Logic]</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   No losses AND no gains â†’ RSI = 50 (neutral)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   No losses BUT has gains â†’ RSI = 100 (maximum bullish)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">avgLoss</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">(</span><span class="n">avgGain</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">                    </span><span class="k">return</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span><span class="w">  </span><span class="c1">// No movement at all</span></div><div class="code-line" style="white-space: pre;"><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w">     </span><span class="c1">// All gains, no losses</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] Standard RSI calculation</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Formula] RS = avgGain / avgLoss</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//           RSI = 100 - (100 / (1 + RS))</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Example]</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   avgGain = 0.5, avgLoss = 0.3</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   RS = 0.5 / 0.3 = 1.667</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   RSI = 100 - (100 / 2.667) = 100 - 37.5 = 62.5</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Why NearZeroThreshold in denominator?]</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//   Extra safety against floating-point edge cases</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avgGain</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">avgLoss</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">NearZeroThreshold</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">decimal</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rs</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [What] Clamp result to valid 0-100 range</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// [Why]  Floating-point arithmetic might produce values slightly</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">//        outside range due to rounding errors</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">rsi</span><span class="p">)</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [What] Calculate: Static convenience method</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ INPUT:  candles - Price bars, period - Lookback length          â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ PROCESS: Create instance, calculate, return results             â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â”‚ OUTPUT: List of RSI values (0-100) for each bar                 â”‚</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">decimal?</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Calculate</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">CandleData</span><span class="o">&gt;</span><span class="w"> </span><span class="n">candles</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">period</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">{</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">rsi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RelativeStrengthIndex</span><span class="p">(</span><span class="n">period</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="n">rsi</span><span class="p">.</span><span class="n">Calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">rsi</span><span class="p">.</span><span class="n">Values</span><span class="p">;</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="p">}</span></div><div class="code-line" style="white-space: pre;"><span class="p">}</span></div></div></div>
<div id="code-python-simple" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="k">class</span><span class="w"> </span><span class="nc">RelativeStrengthIndex</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    Calculates Relative Strength Index (RSI).</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">    Attributes:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        period (int): Lookback period.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        values (List[Optional[float]]): RSI values (0-100).</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">    <span class="n">NEAR_ZERO</span> <span class="o">=</span> <span class="mf">1e-10</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Initializes RSI Calculator.</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">        Args:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            period (int): Period N.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        </span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Raises:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            ValueError: If period &lt;= 0.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="n">period</span> <span class="o">&lt;</span><span class="o">=</span> <span class="mi">0</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="s2">period</span><span class="s2">&quot;</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">period</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="p">]</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candles</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;"><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Computes RSI.</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">        Args:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            candles (List[dict]): Candle data.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># Rationale: Impossible to calculate change for the first candle.</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="n">sum_gains</span> <span class="o">=</span> <span class="mi">0</span></div><div class="code-line" style="white-space: pre;">        <span class="n">sum_losses</span> <span class="o">=</span> <span class="mi">0</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="n">change</span> <span class="o">=</span> <span class="n">candles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">[</span><span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span><span class="p">]</span> <span class="o">-</span> <span class="n">candles</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="p">[</span><span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span><span class="p">]</span></div><div class="code-line" style="white-space: pre;">            <span class="n">gain</span> <span class="o">=</span> <span class="n">change</span> <span class="k">if</span> <span class="n">change</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span></div><div class="code-line" style="white-space: pre;">            <span class="n">loss</span> <span class="o">=</span> <span class="o">-</span><span class="n">change</span> <span class="k">if</span> <span class="n">change</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: Accumulate sums for initial SMA.</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">+</span><span class="o">=</span> <span class="n">gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">+</span><span class="o">=</span> <span class="n">loss</span></div><div class="code-line" style="white-space: pre;">                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: First point uses SMA of Gain/Loss.</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">+</span><span class="o">=</span> <span class="n">gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">+</span><span class="o">=</span> <span class="n">loss</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="n">avg_gain</span> <span class="o">=</span> <span class="n">sum_gains</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">                <span class="n">avg_loss</span> <span class="o">=</span> <span class="n">sum_losses</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="n">rsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_rsi</span><span class="p">(</span><span class="n">avg_gain</span><span class="p">,</span> <span class="n">avg_loss</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Switch to Wilder&#x27;s Smoothing State</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">=</span> <span class="n">avg_gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">=</span> <span class="n">avg_loss</span></div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: Wilder&#x27;s Smoothing.</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Avg = (Prev * (N-1) + Curr) / N</span></div><div class="code-line" style="white-space: pre;">            <span class="n">sum_gains</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum_gains</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">gain</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">            <span class="n">sum_losses</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum_losses</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">loss</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="n">rsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_rsi</span><span class="p">(</span><span class="n">sum_gains</span><span class="p">,</span> <span class="n">sum_losses</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">            <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="nf">_calc_rsi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">avg_gain</span><span class="p">,</span> <span class="n">avg_loss</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">avg_loss</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">NEAR_ZERO</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> <span class="mi">50</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">avg_gain</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">NEAR_ZERO</span> <span class="k">else</span> <span class="mi">100</span></div><div class="code-line" style="white-space: pre;">        <span class="n">rs</span> <span class="o">=</span> <span class="n">avg_gain</span> <span class="o">/</span> <span class="p">(</span><span class="n">avg_loss</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">NEAR_ZERO</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="n">rsi</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">-</span> <span class="p">(</span><span class="mi">100</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">rs</span><span class="p">)</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;"><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    Static wrapper for RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">    <span class="n">rsi</span> <span class="o">=</span> <span class="n">RelativeStrengthIndex</span><span class="p">(</span><span class="n">period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">    <span class="n">rsi</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">    <span class="k">return</span> <span class="n">rsi</span><span class="o">.</span><span class="n">values</span></div></div></div>
<div id="code-python-detailed" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Logic Breakdown (Relative Strength Index)</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># This document provides a &quot;Deep Dive&quot; into the internal logic of the</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Relative Strength Index (RSI).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Core Concepts]</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 1. Internal Strength</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI compares the magnitude of recent Gains vs recent Losses.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - If Gains &gt; Losses -&gt; Market is Strong (RSI &gt; 50).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - If Losses &gt; Gains -&gt; Market is Weak (RSI &lt; 50).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 2. Wilder&#x27;s Smoothing (The &quot;Gotcha&quot;)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - Most people assume RSI uses a simple average (SMA).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - It actually uses Wilder&#x27;s Moving Average (SMMA).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - This creates &quot;Infinite Memory&quot;. The values from 100 days ago still</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#      have a microscopic effect on today&#x27;s RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - Formula: NewAvg = (PrevAvg * (N-1) + Current) / N.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 3. Normalization</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - The raw Ratio (RS) stretches from 0 to Inf.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI maps this to 0-100 for readability.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI = 100 - (100 / (1 + RS)).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Type-Level Explanation: RelativeStrengthIndex (class)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Why]  The industry standard for momentum.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [What] Oscillator (0-100).</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [How]  Uses Wilder&#x27;s Smoothing to calculate the average of gains and losses over N periods, then formats this ratio as an oscillator between 0 and 100.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Who]  J. Welles Wilder Jr. (1978).</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="k">class</span><span class="w"> </span><span class="nc">RelativeStrengthIndex</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">    </div><div class="code-line" style="white-space: pre;">    <span class="c1"># Constant to prevent Division By Zero</span></div><div class="code-line" style="white-space: pre;">    <span class="n">NEAR_ZERO</span> <span class="o">=</span> <span class="mf">1e-10</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># Constructor: __init__</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="n">period</span> <span class="o">&lt;</span><span class="o">=</span> <span class="mi">0</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="s2">period must be &gt; 0</span><span class="s2">&quot;</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">period</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="p">]</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># IPO: calculate</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Input]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># - candles: List[dict]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Process]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 1. Compute Change = Close - PrevClose.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 2. Separate into U (Gain) and D (Loss).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 3. First N periods: Calculate Simple Average of Gains and Losses.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 4. Subsequent periods: Apply Wilder&#x27;s Smoothing.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 5. Compute RS = AvgGain / AvgLoss.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 6. Compute RSI.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Output]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># - None.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">candles</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Logic Step 1: Reset</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">clear</span><span class="p">(</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">        <span class="c1"># The first bar has no &quot;change&quot;, so RSI is undefined</span></div><div class="code-line" style="white-space: pre;">        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1"># State Variables for Smoothing</span></div><div class="code-line" style="white-space: pre;">        <span class="n">sum_gains</span> <span class="o">=</span> <span class="mf">0.0</span></div><div class="code-line" style="white-space: pre;">        <span class="n">sum_losses</span> <span class="o">=</span> <span class="mf">0.0</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Logic Step 2: Main Loop</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Logic Step 2.1: Calculate Raw Change</span></div><div class="code-line" style="white-space: pre;">            <span class="n">change</span> <span class="o">=</span> <span class="n">candles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="p">[</span><span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span><span class="p">]</span> <span class="o">-</span> <span class="n">candles</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="p">[</span><span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span><span class="p">]</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Logic Step 2.2: Separate Up/Down</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="n">change</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">gain</span> <span class="o">=</span> <span class="n">change</span></div><div class="code-line" style="white-space: pre;">                <span class="n">loss</span> <span class="o">=</span> <span class="mf">0.0</span></div><div class="code-line" style="white-space: pre;">            <span class="k">else</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">gain</span> <span class="o">=</span> <span class="mf">0.0</span></div><div class="code-line" style="white-space: pre;">                <span class="n">loss</span> <span class="o">=</span> <span class="o">-</span><span class="n">change</span> <span class="c1"># Make positive</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase A: Seed Period (Accumulation)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i &lt; N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">+</span><span class="o">=</span> <span class="n">gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">+</span><span class="o">=</span> <span class="n">loss</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># Not enough data for RSI yet</span></div><div class="code-line" style="white-space: pre;">                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase B: First RSI (Simple Average)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i == N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Why] Wilder initialized the Series with a Simple MA.</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">+</span><span class="o">=</span> <span class="n">gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">+</span><span class="o">=</span> <span class="n">loss</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Calculate Initial Averages</span></div><div class="code-line" style="white-space: pre;">                <span class="n">avg_gain</span> <span class="o">=</span> <span class="n">sum_gains</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">                <span class="n">avg_loss</span> <span class="o">=</span> <span class="n">sum_losses</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Compute &amp; Store</span></div><div class="code-line" style="white-space: pre;">                <span class="n">rsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rsi_value</span><span class="p">(</span><span class="n">avg_gain</span><span class="p">,</span> <span class="n">avg_loss</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># [Crucial State Update]</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># For the NEXT step (Wilder&#x27;s Smoothing), the &quot;Previous Average&quot;</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># is the current Average we just calculated.</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># So we repurpose sum_gains/sum_losses to hold averages.</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_gains</span> <span class="o">=</span> <span class="n">avg_gain</span></div><div class="code-line" style="white-space: pre;">                <span class="n">sum_losses</span> <span class="o">=</span> <span class="n">avg_loss</span></div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase C: Subsequent RSI (Wilder&#x27;s Smoothing)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i &gt; N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Formula] NewAvg = (PrevAvg * (N-1) + Current) / N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Smooth the Averages</span></div><div class="code-line" style="white-space: pre;">            <span class="n">sum_gains</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum_gains</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">gain</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">            <span class="n">sum_losses</span> <span class="o">=</span> <span class="p">(</span><span class="n">sum_losses</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">loss</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Compute &amp; Store</span></div><div class="code-line" style="white-space: pre;">            <span class="n">rsi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_rsi_value</span><span class="p">(</span><span class="n">sum_gains</span><span class="p">,</span> <span class="n">sum_losses</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">            <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rsi</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># IPO: _compute_rsi_value (Helper)</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Input] AvgGain, AvgLoss.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Process] RS = Gain/Loss. RSI = 100 - 100/(1+RS).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Output] RSI Value (0-100).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span><span class="w"> </span><span class="nf">_compute_rsi_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">avg_gain</span><span class="p">,</span> <span class="n">avg_loss</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># [Fail Safe] Division by Zero</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">avg_loss</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">NEAR_ZERO</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">avg_gain</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">NEAR_ZERO</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> <span class="mf">50.0</span> <span class="c1"># Flat line</span></div><div class="code-line" style="white-space: pre;">            <span class="k">else</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> <span class="mf">100.0</span> <span class="c1"># Vertical Up line</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="n">rs</span> <span class="o">=</span> <span class="n">avg_gain</span> <span class="o">/</span> <span class="n">avg_loss</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># [Visual]</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Gain=10, Loss=2. RS=5.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># RSI = 100 - (100 / 6) = 100 - 16.6 = 83.3.</span></div><div class="code-line" style="white-space: pre;">        <span class="n">rsi</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="o">-</span> <span class="p">(</span><span class="mf">100.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">rs</span><span class="p">)</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># Clamp (floating point safety)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Static Wrapper Function</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Why] Functional API.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Usage] rsi_values = calculate(candles, period=14)</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="k">def</span><span class="w"> </span><span class="nf">calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span><span class="p">:</span></div><div class="code-line" style="white-space: pre;">    <span class="n">instance</span> <span class="o">=</span> <span class="n">RelativeStrengthIndex</span><span class="p">(</span><span class="n">period</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">    <span class="n">instance</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">candles</span><span class="p">)</span></div><div class="code-line" style="white-space: pre;">    <span class="k">return</span> <span class="n">instance</span><span class="o">.</span><span class="n">values</span></div></div></div>
</div>
</div>
</figure>
</section>
<div class="relative flex py-5 items-center mb-12">
<div class="flex-grow border-t border-[var(--border-color)]"></div>
<span class="flex-shrink-0 mx-4 text-[var(--border-color)]">â—†</span>
<div class="flex-grow border-t border-[var(--border-color)]"></div>
</div>
<section id="interactive-playground-section" class="mb-16">
<div class="flex items-center gap-2 mb-4">
<span class="text-[var(--accent)]">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
</svg>
</span>
<h2 class="text-sm font-bold text-[var(--text-muted)] uppercase tracking-wider">RSI Simulator & Verification</h2>
</div>
<div class="playground-grid">
<div class="chart-card">
<canvas id="indicatorChart"></canvas>
</div>
<div class="controls-card">
<div id="playground-error"
class="hidden mx-4 mt-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-md text-sm">
</div>
<div class="tabs-header">
<button class="tab-btn active" onclick="PlaygroundController.switchTab('settings')"
id="tab-btn-settings">Settings</button>
<button class="tab-btn" onclick="PlaygroundController.switchTab('input')" id="tab-btn-input">
Input Data</button>
<button class="tab-btn" onclick="PlaygroundController.switchTab('output')" id="tab-btn-output">
Output</button>
</div>
<div id="tab-content-settings" class="tab-content active custom-scrollbar">
<div id="params-container">
</div>
</div>
<div id="tab-content-input" class="tab-content custom-scrollbar">
<div class="control-group flex-grow flex flex-col h-full">
<label for="input-data">Price Data (CSV)</label>
<textarea id="input-data" class="data-input custom-scrollbar"
placeholder="Enter comma-separated close prices..."></textarea>
<p class="text-xs text-[var(--text-muted)] mt-2">
<strong>Supported Formats:</strong><br>
â€¢ Single Column: <code>Close</code><br>
â€¢ OHLCV: <code>Date, Open, High, Low, Close, Volume</code>
</p>
</div>
</div>
<div id="tab-content-output" class="tab-content custom-scrollbar">
<div class="control-group flex-grow flex flex-col h-full">
<div class="flex justify-between items-center mb-1">
<label for="output-data">Result (Indicator)</label>
<button onclick="PlaygroundController.copyOutput()"
class="text-xs text-[var(--accent)] hover:underline flex items-center gap-1">
<svg width="12" height="12" viewBox="0 0 24 24" fill="none"
stroke="currentColor" stroke-width="2" aria-hidden="true">
<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
<path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
</svg>
Copy
</button>
</div>
<textarea id="output-data" class="data-input custom-scrollbar bg-gray-50 text-gray-500"
readonly></textarea>
</div>
</div>
<div class="controls-footer">
<button onclick="PlaygroundController.update()" class="btn-primary">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<polyline points="23 4 23 10 17 10"></polyline>
<polyline points="1 20 1 14 7 14"></polyline>
<path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15">
</path>
</svg>
Calculate & Update
</button>
</div>
</div>
</div>
</section>
<div class="relative flex py-5 items-center mb-12">
<div class="flex-grow border-t border-[var(--border-color)]"></div>
<span class="flex-shrink-0 mx-4 text-[var(--border-color)]">â—†</span>
<div class="flex-grow border-t border-[var(--border-color)]"></div>
</div>
<section id="documentation-section">
<div class="flex items-center gap-2 mb-6">
<span class="text-[var(--accent)]">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
stroke-width="2" aria-hidden="true">
<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
<path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
</svg>
</span>
<h2 class="text-sm font-bold text-[var(--text-muted)] uppercase tracking-wider">Documentation</h2>
</div>
<div class="documentation-grid">
<article class="indicator-article">
<div class="markdown-body">
<h1 id="relative-strength-index-rsi">Relative Strength Index (RSI)</h1>
<p class="mb-4"><div class="part-divider"><span>PART 1: MAIN GUIDE</span></div></p>
<h2 id="1-identity">1. Identity</h2>
<p class="mb-4">Full Name: Relative Strength Index  </p>
<p class="mb-4">Abbreviation: RSI  </p>
<p class="mb-4">Category: Western Momentum Oscillator  </p>
<p class="mb-4">Creator: J. Welles Wilder Jr. (1978)  </p>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: RSI is a normalized momentum oscillator that measures the ratio of average gains to average losses, bounded between 0 and 100, to identify overbought and oversold conditions.</blockquote>
<hr class="border-[#2a2e39] my-8">
<h2 id="2-calculation-logic">2. Calculation Logic</h2>
<h3 id="formula">Formula</h3>
<p class="mb-4">$$RSI = 100 - \frac{100}{1 + RS}$$</p>
<p class="mb-4">$$RS = \frac{Average\ Gain}{Average\ Loss}$$</p>
<p class="mb-4">Wilder's Smoothing Method:</p>
<p class="mb-4">$$Avg\ Gain_t = \frac{(Avg\ Gain_{t-1} \times (N-1)) + Current\ Gain}{N}$$</p>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Logic</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate daily changes (Close - Previous Close)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Determine direction</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">Separate gains (positive) and losses (negative absolute)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Decompose movement</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate Smoothed Average Gain and Loss</td><td class="px-4 py-2 border-b border-[#2a2e39]">Apply Wilder's smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate RS = Avg Gain / Avg Loss</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ratio of buying to selling pressure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normalize to 0-100 scale</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bounded oscillator</td></tr>
</table></div>
<h3 id="real-world-analogy">Real-World Analogy</h3>
<p class="mb-4">Think of RSI as a tug-of-war scorer. If buyers win big every round (4 points) and sellers only win small (1 point), the buyer's side is dominating. RSI measures who's winning the daily battles and by how much. At RSI > 70, buyers have been winning overwhelminglyâ€”perhaps too much. At RSI < 30, sellers dominateâ€”perhaps exhausted.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="3-market-standards">3. Market Standards</h2>
<h3 id="default-parameters">Default Parameters</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">14</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's original, ~2 trading weeks</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard upper threshold</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">30</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard lower threshold</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Centerline</td><td class="px-4 py-2 border-b border-[#2a2e39]">50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equilibrium between bulls and bears</td></tr>
</table></div>
<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Scalping</td><td class="px-4 py-2 border-b border-[#2a2e39]">2-7</td><td class="px-4 py-2 border-b border-[#2a2e39]">1-5 min</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">9-14</td><td class="px-4 py-2 border-b border-[#2a2e39]">15-60 min</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">14</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">14-21</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily/Weekly</td></tr>
</table></div>
<h3 id="why-these-values">Why These Values?</h3>
<p class="mb-4">Wilder chose 14 periods representing half a lunar cycle and approximately two trading weeks. The 70/30 thresholds represent statistical extremes where the average gain significantly outpaces average loss (or vice versa).</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="4-market-context">4. Market Context</h2>
<h3 id="best-conditions">Best Conditions</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range-Bound Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI extremes reliably indicate reversals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pullbacks in Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI oversold in uptrend = buying opportunity</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price/RSI divergence signals momentum shift</td></tr>
</table></div>
<h3 id="limitations">Limitations</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI stays overbought/oversold for extended periods</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI clusters around 50, providing no signal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gapping Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gaps distort the gain/loss calculation</td></tr>
</table></div>
<h3 id="asset-class-suitability">Asset Class Suitability</h3>
<p class="mb-4">- Equities â€” Excellent for individual stocks</p>
<p class="mb-4">- Indices â€” Strong for market-wide momentum</p>
<p class="mb-4">- Forex â€” Works well for trending pairs</p>
<p class="mb-4">- Crypto â€” Adjust periods (7-9) for higher volatility</p>
<p class="mb-4">- Commodities â€” Good for cyclical analysis</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="5-entry-signals">5. Entry Signals</h2>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold Exit</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses above 30 from below</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought Exit</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses below 70 from above</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price Lower Low, RSI Higher Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price Higher High, RSI Lower High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Failure Swing</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI < 30, rallies, holds > 30, breaks high</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Failure Swing</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI > 70, drops, fails to reach 70, breaks low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Centerline Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses 50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
</table></div>
<h3 id="primary-buy-signal">Primary Buy Signal</h3>
<pre><code class="language-">
IF RSI(14) &lt; 30 (previous bar)
AND RSI(14) &gt;= 30 (current bar)
AND Price &gt; SMA(200)
THEN â†’ BUY (Oversold Reversion in Uptrend)
</code></pre>
<h3 id="primary-sell-signal">Primary Sell Signal</h3>
<pre><code class="language-">
IF RSI(14) &gt; 70 (previous bar)
AND RSI(14) &lt;= 70 (current bar)
AND Price &lt; SMA(200)
THEN â†’ SELL (Overbought Reversion in Downtrend)
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="6-filter-usage">6. Filter Usage</h2>
<p class="mb-4">RSI is one of the most versatile confirmation and filter tools:</p>
<h3 id="filter-rules">Filter Rules</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI > 50</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take long entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI < 50</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take short entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI < 30</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for buy setups</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI > 70</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for sell setups</td></tr>
</table></div>
<h3 id="recommended-pairings">Recommended Pairings</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">MACD</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI identifies extremes; MACD confirms trend change</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Moving Averages</td><td class="px-4 py-2 border-b border-[#2a2e39]">MA gives trend direction; RSI times entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVT/Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI shows momentum; volume confirms conviction</td></tr>
</table></div>
<h3 id="example-combined-strategy">Example Combined Strategy</h3>
<pre><code class="language-">
ENTRY CONDITIONS:
RSI(14) &lt; 30                     // Oversold
RSI(14) crosses above 30         // Reversal trigger
MACD Histogram turns positive    // Momentum confirmation
Price &gt; SMA(200)                 // Long-term uptrend
ACTION: BUY with momentum and trend confirmation
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="7-practical-cautions">7. Practical Cautions</h2>
<h3 id="lag-characteristics">Lag Characteristics</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">~15 bars (Period + 1)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Full Convergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">50+ bars for Wilder smoothing to stabilize</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Responsiveness</td><td class="px-4 py-2 border-b border-[#2a2e39]">Immediate at thresholds</td></tr>
</table></div>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: RSI values differ slightly across platforms due to Wilder's smoothing starting point. A 14-period RSI starting Jan 1 will differ from one starting Feb 1.</blockquote>
<h3 id="false-signal-scenarios">False Signal Scenarios</h3>
<p class="mb-4">1. The Trending Trap  </p>
<p class="mb-4">   RSI stays > 70 for weeks in strong uptrend. Selling every touch of 70 loses money.</p>
<p class="mb-4">2. Premature Reversal  </p>
<p class="mb-4">   Entering on first touch of 30 before momentum actually shifts.</p>
<p class="mb-4">3. Divergence Failure  </p>
<p class="mb-4">   Divergence identified but price continues in original direction for weeks.</p>
<h3 id="mitigation-strategies">Mitigation Strategies</h3>
<p class="mb-4">- Regime-Adjusted Thresholds: In bull markets use 40/80; in bear markets use 20/60</p>
<p class="mb-4">- Wait for Failure Swing: More reliable than simple threshold crosses</p>
<p class="mb-4">- MACD Confirmation: Wait for MACD histogram to confirm RSI signal</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="8-pro-insights">8. Pro Insights</h2>
<h3 id="constance-brown's-range-shift">Constance Brown's Range Shift</h3>
<p class="mb-4">In Bull Markets, RSI oscillates between 40 and 80 (support moves up). In Bear Markets, it oscillates between 20 and 60 (resistance moves down). If RSI fails to reach 70 in a rally and reverses at 60, it confirms bearish regime.</p>
<h3 id="failure-swingsâ€”wilder's-favorite">Failure Swingsâ€”Wilder's Favorite</h3>
<p class="mb-4">J. Welles Wilder considered Failure Swings more reliable than divergence:</p>
<p class="mb-4">- Bullish: RSI drops below 30, rallies above 30, pulls back but stays above 30, then breaks above its rally high</p>
<p class="mb-4">- Bearish: Mirror pattern above 70</p>
<h3 id="the-2-period-rsi-connors">The 2-Period RSI (Connors)</h3>
<p class="mb-4">For mean-reversion scalping, RSI(2) provides extreme sensitivity:</p>
<p class="mb-4">- RSI(2) < 10 = Strong buy</p>
<p class="mb-4">- RSI(2) > 90 = Strong sell</p>
<p class="mb-4">Used with trend filters, this captures micro-reversals in strongly trending stocks.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="9-summary">9. Summary</h2>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"RSI tells you who's winning the daily tug-of-warâ€”when one side wins too much, expect the other team to start pulling back."</blockquote>
<p class="mb-4"><div class="part-divider"><span>PART 2: SUPPLEMENTARY GUIDE</span></div></p>
<h2 id="1-core-concept">1. Core Concept</h2>
<p class="mb-4">RSI answers one question: "Are buyers or sellers winning, and by how much?"</p>
<p class="mb-4">The calculation is elegant: separate each day's movement into gains and losses. Average them over N periods using Wilder's smoothing. Divide average gain by average loss to get Relative Strength (RS). Convert to a 0-100 scale.</p>
<p class="mb-4">This bounded nature is RSI's killer feature. Unlike unbounded oscillators (ROC), RSI always fits on the same scale, making 30/70 universally applicable across any asset.</p>
<p class="mb-4">The smoothing method creates "memory"â€”today's RSI is influenced by all historical data, not just the last N days. This provides stability but means RSI values depend on starting point.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="2-statistical-edge">2. Statistical Edge</h2>
<h3 id="backtest-evidence">Backtest Evidence</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI Signal</td><td class="px-4 py-2 border-b border-[#2a2e39]">Next 5-Day Performance</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI < 30</td><td class="px-4 py-2 border-b border-[#2a2e39]">+1.8% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI cross below 70</td><td class="px-4 py-2 border-b border-[#2a2e39]">-0.9% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">+2.3% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Failure Swing (Bull)</td><td class="px-4 py-2 border-b border-[#2a2e39]">+3.1% average</td></tr>
</table></div>
<h3 id="why-it-works">Why It Works</h3>
<p class="mb-4">RSI exploits the mean-reversion tendency of momentum. When buyers dominate (RSI > 70), they become exhausted; when sellers dominate (RSI < 30), they're often in capitulation. The bounded scale makes these extremes consistent and tradeable.</p>
<h3 id="academic-reference">Academic Reference</h3>
<p class="mb-4">Wilder's RSI was introduced in *New Concepts in Technical Trading Systems* (1978), one of the most influential technical analysis books ever written. Studies have confirmed RSI's edge in counter-trend strategies.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>
<h3 id="strategy-name:-"the-signal-reinforcement-entry"">Strategy Name: "The Signal Reinforcement Entry"</h3>
<p class="mb-4">Concept: Use RSI for timing, MACD for confirmationâ€”never enter on RSI alone.</p>
<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. Price > SMA(200) (uptrend context)</p>
<p class="mb-4">2. RSI(14) drops below 35 (close to oversold)</p>
<p class="mb-4">Entry Trigger:</p>
<p class="mb-4">- RSI(14) crosses back above 30</p>
<p class="mb-4">- MACD Histogram turns positive (or MACD crosses above Signal)</p>
<p class="mb-4">Position Sizing:</p>
<p class="mb-4">- Full size when RSI < 25 before bounce</p>
<p class="mb-4">- Half size when RSI 25-30 before bounce</p>
<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Primary Exit: RSI(14) > 70 and turns down</p>
<p class="mb-4">2. Stop Loss: Below recent swing low</p>
<p class="mb-4">3. Time Stop: 10 bars if RSI doesn't reach 50</p>
<p class="mb-4">Example:</p>
<pre><code class="language-">
Stock XYZ shows:
Price = $48, above $42 SMA(200) âœ“
RSI(14) = 26, rises to 32 â†’ RSI signal âœ“
MACD Histogram = -0.15 â†’ +0.05 â†’ MACD confirmation âœ“
Entry: $48
Stop: $45 (recent low)
RSI rises to 72 and hooks down
Exit: $58 (+21%)
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>
<h3 id="failure-patterns">Failure Patterns</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extended Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI > 70 for weeks in strong trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use regime-adjusted levels</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Platform Discrepancy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Different data lengths = different RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use relative changes, not absolutes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Division by Zero</td><td class="px-4 py-2 border-b border-[#2a2e39]">All gains, no losses = undefined</td><td class="px-4 py-2 border-b border-[#2a2e39]">Code handles: if AvgLoss = 0, RSI = 100</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Smooth Decay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's smoothing never fully forgets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Accept as feature</td></tr>
</table></div>
<h3 id="psychological-traps">Psychological Traps</h3>
<p class="mb-4">1. The "RSI 70 = Sell" Reflexive Trap  </p>
<p class="mb-4">   In bull markets, RSI can stay above 70 for extended periods. Selling every touch shortens winners.</p>
<p class="mb-4">2. Waiting for 30 Forever  </p>
<p class="mb-4">   Strong uptrends may never offer RSI < 30. Use 40 as the new "oversold" in bull regimes.</p>
<p class="mb-4">3. Divergence Obsession  </p>
<p class="mb-4">   Divergences can persist for weeks before resolving. They're warnings, not triggers.</p>
<h3 id="common-misinterpretations">Common Misinterpretations</h3>
<p class="mb-4">- "RSI > 70 = overbought = sell" â†’ In trends, 70 is just high, not necessarily reversal</p>
<p class="mb-4">- "Divergence = immediate reversal" â†’ Divergence can precede price by weeks</p>
<p class="mb-4">- "RSI shows direction" â†’ RSI shows momentum strength, not trend direction</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="5-further-study">5. Further Study</h2>
<h3 id="creator-attribution">Creator Attribution</h3>
<p class="mb-4">J. Welles Wilder Jr. introduced RSI in his legendary 1978 book *New Concepts in Technical Trading Systems*. The book also introduced ATR, Parabolic SAR, and ADXâ€”making it one of the most impactful works in technical analysis history.</p>
<h3 id="parent/child-indicators">Parent/Child Indicators</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Stochastic RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child â€” RSI applied to RSI values</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Connors RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child â€” Composite RSI with streak and ROC</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's Smoothing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Foundation â€” EMA variant used in calculation</td></tr>
</table></div>
<h3 id="recommended-readings">Recommended Readings</h3>
<p class="mb-4">1. *New Concepts in Technical Trading Systems* â€” J. Welles Wilder Jr.</p>
<p class="mb-4">2. *Short-Term Trading Strategies That Work* â€” Larry Connors</p>
<p class="mb-4">3. *Technical Analysis Using Multiple Timeframes* â€” Brian Shannon</p>
<hr class="border-[#2a2e39] my-8">
<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stochastic</td><td class="px-4 py-2 border-b border-[#2a2e39]">CCI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Williams %R</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Measures</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gain/loss ratio</td><td class="px-4 py-2 border-b border-[#2a2e39]">Position in range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Deviation from mean</td><td class="px-4 py-2 border-b border-[#2a2e39]">Inverse stochastic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">-100 to 0</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">70</td><td class="px-4 py-2 border-b border-[#2a2e39]">80</td><td class="px-4 py-2 border-b border-[#2a2e39]">+100</td><td class="px-4 py-2 border-b border-[#2a2e39]">-20</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">30</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">-80</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Smoothing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder (heavy)</td><td class="px-4 py-2 border-b border-[#2a2e39]">SMA (light)</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Momentum strength</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short-term timing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Quick extremes</td></tr>
</table></div>
<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- RSI â€” Primary momentum assessment, divergence trading</p>
<p class="mb-4">- Stochastic â€” Fast entry timing in ranges</p>
<p class="mb-4">- CCI â€” Unbounded mean reversion signals</p>
<p class="mb-4">- Williams %R â€” Quick overbought/oversold reads</p>
<p class="mb-4"><div class="part-divider"><span>PART 3: ADVANCED SIGNAL REFERENCE</span></div></p>
<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>
<h3 id="threshold-matrix">Threshold Matrix</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI Level</td><td class="px-4 py-2 border-b border-[#2a2e39]">Regime Context</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">80-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extremely strong</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trail stops; don't short</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">70-80</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong, normal overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hold; tighten stops</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">50-70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Healthy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Buy pullbacks</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">40-50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback zone</td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">30-40</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong buy zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">60-70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Resistance zone</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short rallies</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">40-60</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Neutral</td><td class="px-4 py-2 border-b border-[#2a2e39]">Avoid</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">20-40</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weak selling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for cover</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">0-20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme panic</td><td class="px-4 py-2 border-b border-[#2a2e39]">Contrarian buy</td></tr>
</table></div>
<h3 id="signal-patterns">Signal Patterns</h3>
<h4 id="buy-signal-oversold-exit">Buy Signal (Oversold Exit)</h4>
<p class="mb-4">This classic Wilder signal triggers when RSI crosses back above 30 from oversold territory while in a bull trend context. The oversold condition (RSI < 30) indicates sellers have dominated recently, but the cross above 30 signals exhaustion and reversal. Historical backtests show +1.8% average performance over 5 days for this pattern.</p>
<pre><code class="language-python">
def rsi_buy_signal(rsi_values, price, sma_200):
condition_1 = rsi_values[-2] &lt; 30          # Was oversold
condition_2 = rsi_values[-1] &gt;= 30         # Crossed above
condition_3 = price &gt; sma_200              # Bull trend
return all([condition_1, condition_2, condition_3])
</code></pre>
<h4 id="failure-swing-bullish">Failure Swing (Bullish)</h4>
<p class="mb-4">Wilder considered Failure Swings more reliable than simple oversold readingsâ€”they require a specific sequence: dip below 30, rally above 30, pullback that holds above 30, then break above the rally high. This pattern confirms support has formed and buyers are gaining control. Historical backtests show +3.1% average performance, making it RSI's strongest signal.</p>
<pre><code class="language-python">
def rsi_bullish_failure_swing(rsi_values):
# Find: dip below 30, rally, hold above 30, break high
recent_min = min(rsi_values[-10:-5])
rally_high = max(rsi_values[-5:-2])
pullback_low = min(rsi_values[-3:-1])
current = rsi_values[-1]
dip_below_30 = recent_min &lt; 30
held_above_30 = pullback_low &gt; 30
broke_high = current &gt; rally_high
return dip_below_30 and held_above_30 and broke_high
</code></pre>
<h4 id="regime-detection">Regime Detection</h4>
<p class="mb-4">Constance Brown's insight: in bull markets, RSI oscillates between 40-80, while in bear markets it oscillates between 20-60. This function detects the current regime by averaging recent RSI values. Use 40/80 thresholds in bull regimes and 20/60 in bear regimes for dramatically improved signal quality.</p>
<pre><code class="language-python">
def rsi_regime(rsi_values, lookback=50):
avg = sum(rsi_values[-lookback:]) / lookback
if avg &gt; 55:
return &quot;BULL&quot;  # Use 40/80 levels
elif avg &lt; 45:
return &quot;BEAR&quot;  # Use 20/60 levels
else:
return &quot;NEUTRAL&quot;  # Standard 30/70
</code></pre>
<h3 id="screening-filters">Screening Filters</h3>
<h4 id="oversold-in-uptrend-scanner">Oversold in Uptrend Scanner</h4>
<pre><code class="language-">
RSI(14) &lt; 30
AND RSI(14) &gt; RSI(14)[1]
AND Close &gt; SMA(Close, 200)
</code></pre>
<h4 id="failure-swing-setup">Failure Swing Setup</h4>
<pre><code class="language-">
RSI(14) crossed below 30 within last 5 bars
AND MIN(RSI(14), last 5 bars) &gt; 30
AND RSI(14) &gt; MAX(RSI(14), bars 2-5)
</code></pre>
<h4 id="connors-rsi-extreme">Connors RSI Extreme</h4>
<pre><code class="language-">
RSI(2) &lt; 10
AND Close &gt; SMA(Close, 200)
AND ADX(14) &gt; 20
</code></pre>
<h3 id="combination-strategies">Combination Strategies</h3>
<h4 id="rsi-+-macd-confirmation">RSI + MACD Confirmation</h4>
<pre><code class="language-">
SETUP:
Price &gt; SMA(200)
RSI(14) &lt; 35
ENTRY:
RSI(14) crosses above 30
AND MACD Histogram &gt; MACD Histogram[1]
STOP_LOSS:
Recent swing low
TAKE_PROFIT:
RSI(14) &gt; 70 AND RSI(14) &lt; RSI(14)[1]
</code></pre>
<h4 id="connors-2-period-mean-reversion">Connors 2-Period Mean Reversion</h4>
<pre><code class="language-">
FILTER:
Close &gt; SMA(200)
ADX(14) &gt; 20
ENTRY:
RSI(2) &lt; 10
STOP_LOSS:
Close &lt; SMA(200)
TAKE_PROFIT:
RSI(2) &gt; 70
OR Close &gt; 5-day high
</code></pre>
</div>
</article>
<aside class="indicator-toc">
<nav aria-label="Table of Contents">
<h3 class="toc-header">On this page</h3>
<div class="toc-list">
<a href="#1-identity" class="toc-item ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-item ">2. Calculation Logic</a>
<a href="#formula" class="toc-item pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-item pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-item ">3. Market Standards</a>
<a href="#default-parameters" class="toc-item pl-4">Default Parameters</a>
<a href="#timeframe-recommendations" class="toc-item pl-4">Timeframe Recommendations</a>
<a href="#why-these-values" class="toc-item pl-4">Why These Values?</a>
<a href="#4-market-context" class="toc-item ">4. Market Context</a>
<a href="#best-conditions" class="toc-item pl-4">Best Conditions</a>
<a href="#limitations" class="toc-item pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-item pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-item ">5. Entry Signals</a>
<a href="#primary-buy-signal" class="toc-item pl-4">Primary Buy Signal</a>
<a href="#primary-sell-signal" class="toc-item pl-4">Primary Sell Signal</a>
<a href="#6-filter-usage" class="toc-item ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-item pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-item pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-item pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-item ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-item pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-item pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-item pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-item ">8. Pro Insights</a>
<a href="#constance-brown's-range-shift" class="toc-item pl-4">Constance Brown's Range Shift</a>
<a href="#failure-swingsâ€”wilder's-favorite" class="toc-item pl-4">Failure Swingsâ€”Wilder's Favorite</a>
<a href="#the-2-period-rsi-connors" class="toc-item pl-4">The 2-Period RSI (Connors)</a>
<a href="#9-summary" class="toc-item ">9. Summary</a>
<a href="#1-core-concept" class="toc-item ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-item ">2. Statistical Edge</a>
<a href="#backtest-evidence" class="toc-item pl-4">Backtest Evidence</a>
<a href="#why-it-works" class="toc-item pl-4">Why It Works</a>
<a href="#academic-reference" class="toc-item pl-4">Academic Reference</a>
<a href="#3-actionable-strategy" class="toc-item ">3. Actionable Strategy</a>
<a href="#strategy-name:-"the-signal-reinforcement-entry"" class="toc-item pl-4">Strategy Name: "The Signal Reinforcement Entry"</a>
<a href="#4-risks-&-limitations" class="toc-item ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-item pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-item pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-item pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-item ">5. Further Study</a>
<a href="#creator-attribution" class="toc-item pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-item pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-item pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-item pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-item ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-item pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-item pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-item pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-item pl-4">Combination Strategies</a>
</div>
</nav>
</aside>
</div>
</section>
</main>
<footer id="site-footer">
<p>&copy; I and I Investigates.</p>
</footer>
</div>
</div>
<script id="site-config">
window.SITE_CONFIG = {
version: '7.1.0',
env: 'production'
};
window.jsErrors = [];
window.onerror = function(msg, url, line, col, error) {
window.jsErrors.push({msg: msg, line: line, col: col, stack: error ? error.stack : ''});
// Try to show in UI immediately if possible
var el = document.getElementById('playground-error');
if (el) {
el.innerText = "GLOBAL JS ERROR: " + msg + " (Line " + line + ")";
el.classList.remove('hidden');
}
};
console.log("Error Handler Installed");
// DEFAULT DEFINITIONS (Fallback)
const DefaultConfig = [
{ id: 'period', label: 'Period (N)', type: 'number', value: 14, min: 2, max: 100, step: 1 }
];
const DefaultLogic = {
calculate: (data, params) => { return ["DEFAULT_LOGIC_USED_CHECK_LOGS"]; }
};
const DefaultDisplay = { isOverlay: false, plots: {} };
</script>
<script id="indicator-logic">
// 2.1 INJECTED LIBRARY (Class Definitions)
// Python will inject the raw JS class here
class RelativeStrengthIndex {
static NEAR_ZERO = 1e-10;
constructor(period = 14) {
if (period <= 0) throw new Error("period");
this.period = period;
this.values = [];
}
calculate(candles) {
this.values = [];
if (candles.length === 0) return;
this.values.push(null);
if (candles.length < 2) return;
let sumGains = 0;
let sumLosses = 0;
for (let i = 1; i < candles.length; i++) {
const change = candles[i].close - candles[i - 1].close;
const gain = change > 0 ? change : 0;
const loss = change < 0 ? -change : 0;
if (i < this.period) {
sumGains += gain;
sumLosses += loss;
this.values.push(null);
continue;
}
if (i === this.period) {
sumGains += gain;
sumLosses += loss;
const avgGain = sumGains / this.period;
const avgLoss = sumLosses / this.period;
this.values.push(this._calcRsi(avgGain, avgLoss));
sumGains = avgGain;
sumLosses = avgLoss;
continue;
}
const currentGain = change > 0 ? change : 0;
const currentLoss = change < 0 ? -change : 0;
sumGains = (sumGains * (this.period - 1) + currentGain) / this.period;
sumLosses = (sumLosses * (this.period - 1) + currentLoss) / this.period;
this.values.push(this._calcRsi(sumGains, sumLosses));
}
}
_calcRsi(avgGain, avgLoss) {
if (Math.abs(avgLoss) < RelativeStrengthIndex.NEAR_ZERO) {
return Math.abs(avgGain) < RelativeStrengthIndex.NEAR_ZERO ? 50 : 100;
}
const rs = avgGain / (avgLoss + RelativeStrengthIndex.NEAR_ZERO);
const rsi = 100 - (100 / (1 + rs));
return Math.max(0, Math.min(100, rsi));
}
static calculate(candles, period = 14) {
const rsi = new RelativeStrengthIndex(period);
rsi.calculate(candles);
return rsi.values;
}
}
// export { RelativeStrengthIndex };
// 2.2 INJECTION PARSING & INSTANTIATION
let IndicatorConfig = DefaultConfig;
let IndicatorLogic = DefaultLogic;
let IndicatorDisplay = DefaultDisplay;
const logToUI = (msg) => {
const el = document.getElementById('output-data');
if(el) el.value = "INIT ERROR: " + msg + "\n" + el.value;
console.error(msg);
};
try {
const rawConfig = '[{"id": "period", "label": "Period", "type": "number", "value": 14, "min": 2, "max": 200}]';
if (!rawConfig.startsWith('{{')) {
IndicatorConfig = JSON.parse(rawConfig);
}
} catch (e) { logToUI("Config Parse Failed: " + e.message); }
try {
const rawLogic = `
{
calculate: (data, params) => {
if(typeof RelativeStrengthIndex === 'undefined') {
throw new Error("RelativeStrengthIndex class is NOT defined.");
}
if(!RelativeStrengthIndex.calculate) {
// Inspect what IS there
const props = Object.getOwnPropertyNames(RelativeStrengthIndex);
throw new Error("RelativeStrengthIndex.calculate is missing. Props: " + props.join(', '));
}
return RelativeStrengthIndex.calculate(data, params.period);
}
}
`;
if (!rawLogic.startsWith('{{')) {
// Expected format: "{ calculate: (data, params) => { ... } }"
// Wrap in parens to prevent ASI from interpreting 'return \n {' as 'return;'
const evalLogic = new Function("return (" + rawLogic + ")")();
if (evalLogic && typeof evalLogic.calculate === 'function') {
IndicatorLogic = evalLogic;
}
}
} catch (e) { logToUI("Logic Parse Failed: " + e.message); }
try {
const rawDisplay = '{"isOverlay": false, "plots": {"main": {"color": "#1A73E8"}}}';
if (!rawDisplay.startsWith('{{')) {
IndicatorDisplay = JSON.parse(rawDisplay);
}
} catch (e) { logToUI("Display Parse Failed: " + e.message); }
</script>
<script src="../assets/js/script.js" defer></script>
</body>
</html>