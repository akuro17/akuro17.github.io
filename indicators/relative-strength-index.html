<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relative Strength Index - I ant I Investigates</title>
<meta name="description" content="">
<meta name="keywords" content="">
<script type="application/ld+json">
{
"@context": "https://schema.org",
"@type": "TechArticle",
"headline": "Relative Strength Index (RSI)",
"description": "Detailed visualization and documentation for RSI financial indicator.",
"author": {
"@type": "Organization",
"name": "I and I Investigates"
}
}
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<link rel="stylesheet" href="../../assets/css/style.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<style>
/* =========================================
PORTED STYLES (From 0117 Template)
========================================= */
:root {
/* Minimal Variable Set for Logic Panel */
--bg-card: #FFFFFF;
--bg-secondary: #F8FAFC; /* slate-50 */
--bg-hover: #F1F5F9; /* slate-100 */
--border-color: #E2E8F0; /* slate-200 */
--text-primary: #1E293B; /* slate-800 */
--text-muted: #64748B; /* slate-500 */
--accent: #4F46E5; /* indigo-600 */
}
/* Logic Figure Container */
.logic-figure {
margin: 0;
background-color: var(--bg-card);
border: 1px solid var(--border-color);
border-radius: 0.5rem;
position: relative;
overflow: hidden;
height: 600px; /* Fixed height for infinite canvas feel */
}
/* Infinite Canvas Wrapper */
.chart-scroll-wrapper {
width: 100%;
height: 100%;
overflow: hidden;
position: relative;
background-color: #FFFFFF;
background-image: radial-gradient(#E2E8F0 1.5px, transparent 1.5px);
background-size: 20px 20px;
cursor: grab;
touch-action: none;
user-select: none;
}
.chart-scroll-wrapper:active { cursor: grabbing; }
/* Code Panel Overlay */
#code-panel-overlay {
position: absolute;
top: 0;
bottom: 0;
left: 0;
width: 500px;
max-width: 90%;
z-index: 30;
background-color: var(--bg-card);
border-right: 1px solid var(--border-color);
box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
display: flex;
flex-direction: column;
transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), width 0.3s ease;
transform: translateX(0);
}
#code-panel-overlay.panel-hidden {
transform: translateX(-100%);
pointer-events: none;
}
#code-panel-overlay.panel-expanded {
width: 100%;
max-width: 100%;
}
/* Code Content */
.code-panel-body {
background-color: #FAFAFA;
flex: 1;
overflow: auto;
font-family: 'Roboto Mono', monospace;
font-size: 0.85rem;
line-height: 1.5;
padding: 1rem;
white-space: pre; /* Essential for code indentation */
}
.code-content {
font-family: 'Roboto Mono', monospace;
font-size: 0.85rem;
line-height: 1.5;
padding: 1rem;
}
/* Toggle Button */
#code-panel-toggle-btn {
position: absolute;
top: 1rem;
left: 1rem;
z-index: 25;
background: white;
border: 1px solid var(--border-color);
border-radius: 0.5rem;
padding: 0.5rem;
cursor: pointer;
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
transition: all 0.2s;
}
#code-panel-toggle-btn:hover {
color: var(--accent);
border-color: var(--accent);
}
/* Active States for Panel Buttons */
.btn-lang-active {
background-color: var(--accent) !important;
color: white !important;
}
.btn-type-active {
color: var(--text-primary) !important;
font-weight: bold;
text-decoration: underline;
text-decoration-color: var(--accent);
text-decoration-thickness: 2px;
}
/* Custom Scrollbar for Code Blocks */
pre::-webkit-scrollbar, .code-panel-body::-webkit-scrollbar {
height: 8px; width: 8px;
background-color: #f1f5f9;
}
pre::-webkit-scrollbar-thumb, .code-panel-body::-webkit-scrollbar-thumb {
background-color: #cbd5e1;
border-radius: 4px;
}
pre::-webkit-scrollbar-thumb:hover, .code-panel-body::-webkit-scrollbar-thumb:hover {
background-color: #94a3b8;
}
/* Pygments Syntax Highlighting */
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #008000 } /* Comment */
.highlight .err { border: 1px solid #F00 } /* Error */
.highlight .k { color: #00F } /* Keyword */
.highlight .ch { color: #008000 } /* Comment.Hashbang */
.highlight .cm { color: #008000 } /* Comment.Multiline */
.highlight .cp { color: #00F } /* Comment.Preproc */
.highlight .cpf { color: #008000 } /* Comment.PreprocFile */
.highlight .c1 { color: #008000 } /* Comment.Single */
.highlight .cs { color: #008000 } /* Comment.Special */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gh { font-weight: bold } /* Generic.Heading */
.highlight .gp { font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { font-weight: bold } /* Generic.Subheading */
.highlight .kc { color: #00F } /* Keyword.Constant */
.highlight .kd { color: #00F } /* Keyword.Declaration */
.highlight .kn { color: #00F } /* Keyword.Namespace */
.highlight .kp { color: #00F } /* Keyword.Pseudo */
.highlight .kr { color: #00F } /* Keyword.Reserved */
.highlight .kt { color: #2B91AF } /* Keyword.Type */
.highlight .s { color: #A31515 } /* Literal.String */
.highlight .nc { color: #2B91AF } /* Name.Class */
.highlight .ow { color: #00F } /* Operator.Word */
.highlight .sa { color: #A31515 } /* Literal.String.Affix */
.highlight .sb { color: #A31515 } /* Literal.String.Backtick */
.highlight .sc { color: #A31515 } /* Literal.String.Char */
.highlight .dl { color: #A31515 } /* Literal.String.Delimiter */
.highlight .sd { color: #A31515 } /* Literal.String.Doc */
.highlight .s2 { color: #A31515 } /* Literal.String.Double */
.highlight .se { color: #A31515 } /* Literal.String.Escape */
.highlight .sh { color: #A31515 } /* Literal.String.Heredoc */
.highlight .si { color: #A31515 } /* Literal.String.Interpol */
.highlight .sx { color: #A31515 } /* Literal.String.Other */
.highlight .sr { color: #A31515 } /* Literal.String.Regex */
.highlight .s1 { color: #A31515 } /* Literal.String.Single */
.highlight .ss { color: #A31515 } /* Literal.String.Symbol */
/* Mermaid Overrides */
.mermaid { transform-origin: 0 0; }
.noselect { user-select: none; -webkit-user-select: none; }
/* Legend Items */
.logic-legend {
border-top: 1px solid var(--border-color);
padding: 1rem;
background-color: var(--bg-card);
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 1.5rem;
position: relative;
z-index: 20;
}
.legend-item {
display: flex;
align-items: center;
gap: 0.5rem;
font-size: 0.8rem;
color: var(--text-muted);
font-weight: 500;
}
.legend-dot {
width: 10px;
height: 10px;
border-radius: 50%;
border: 1px solid;
}
.l-ingestion { background: #E8F0FE; border-color: #4285F4; }
.l-evaluation { background: #FEF7E0; border-color: #FBBC04; }
.l-weighting { background: #F3E8FD; border-color: #A142F4; }
.l-synthesis { background: #E0F7FA; border-color: #12B5CB; }
.l-outcome { background: #E6F4EA; border-color: #34A853; }
/* TOC Active State Styling */
.toc-link.active {
color: #4f46e5;
border-left-color: #4f46e5;
background-color: #eef2ff;
}
</style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
<nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
<div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between h-16">
<div class="flex items-center">
<div class="flex-shrink-0 flex items-center mr-6">
<a href="../index.html" class="font-bold text-xl text-indigo-600">
I ant I Investigates
</a>
</div>
<nav class="hidden md:flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
<ol class="flex items-center space-x-2">
<li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
<li><span class="mx-1">/</span></li>
<li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
<li><span class="mx-1">/</span></li>
<li><span class="font-medium text-slate-900">RSI</span></li>
</ol>
</nav>
<div class="hidden sm:flex sm:space-x-4 items-center">
<a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
Chart
</a>
<a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
Logic
</a>
<a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
Docs
</a>
</div>
</div>
<div class="hidden sm:flex items-center">
</div>
</div>
</div>
</nav>
<div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
<div class="flex flex-col gap-6">
<header>
<h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">Relative Strength Index (RSI)</h1>
<p class="text-lg text-slate-600 leading-relaxed">RSI is a normalized momentum oscillator that measures the ratio of average gains to average losses, bounded between 0 and 100, to identify overbought and oversold conditions.</p>
</header>
<section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
<div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
<h2 class="text-lg font-bold text-slate-800 flex items-center">
<span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
Calculator
</h2>
<p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
</div>
<div class="p-6">
<div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
<canvas id="indicatorChart"></canvas>
</div>
<div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
<div class="md:col-span-1 space-y-4">
<h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
<div id="dynamic-params">
<div class="space-y-3">
<div>
<label for="param-period" class="block text-xs text-slate-600 mb-1">Period</label>
<input type="number" id="param-period" value="14" min="2" max="200" class="w-full px-3 py-2 text-sm border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
</div>
</div>
</div>
<button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
Calculate
</button>
</div>
<div class="md:col-span-2 space-y-4">
<div class="space-y-2">
<div class="flex justify-between items-center pb-2 border-b border-slate-200">
<h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
<button id="btn-load-sample" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors">Load Sample</button>
</div>
<p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
<textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...
or one per line:
100.5
101.2
99.8"></textarea>
</div>
<div class="space-y-2">
<div class="flex justify-between items-center pb-2 border-b border-slate-200">
<h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
</div>
<textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
</div>
</div>
</div>
</div>
</section>
</div>
<section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
<div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
<h2 class="text-lg font-bold text-slate-800 flex items-center">
<span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
Logic & Code Architecture
</h2>
<p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
</div>
<figure class="logic-figure" style="border: none; border-radius: 0;">
<button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
CODE
</button>
<div id="canvas-container" class="chart-scroll-wrapper">
<div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
flowchart TD;
subgraph INGESTION ["Phase 1: Ingestion"];
A[/"Receive Daily Price Changes"/];
B["Calculate Close-to-Close Movement"];
C["Separate Gains from Losses"];
end;
subgraph EVALUATION ["Phase 2: Evaluation"];
D["Measure Winning Day Magnitude"];
E["Measure Losing Day Magnitude"];
F["Build Gain and Loss History"];
end;
subgraph WEIGHTING ["Phase 3: Weighting"];
G["Apply Wilder Smoothing"];
H["Calculate Average Gain"];
I["Calculate Average Loss"];
end;
subgraph SYNTHESIS ["Phase 4: Synthesis"];
J["Compute Relative Strength Ratio"];
K["Normalize to 0-100 Scale"];
L["Track Threshold Levels"];
end;
subgraph OUTCOME ["Phase 5: Outcome"];
M{"Momentum Balance Assessment?"};
N["RSI > 70 = Buyers Dominating"];
O["RSI < 30 = Sellers Exhausted"];
P["Divergence = Momentum Shift Warning"];
Q[/"Generate Overbought-Oversold Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Overbought| N;
M -->|Oversold| O;
M -->|Diverging| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
</div>
</div>
<div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
<button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
<button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
<button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
</div>
<div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
<div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
<div class="flex gap-2">
<button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
<button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
</div>
<div class="flex items-center gap-2">
<button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
<button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
<button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
<svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
<path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
</svg>
<svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
<polyline points="20 6 9 17 4 12"></polyline>
</svg>
</button>
<button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
<svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
</svg>
<svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
</svg>
</button>
<button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
<line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
</svg>
</button>
</div>
</div>
<div class="code-panel-body custom-scrollbar p-4">
<div id="code-csharp-simple" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="k">using</span> System;</div><div class="code-line" style="white-space: pre;"><span class="k">using</span> System.Collections.Generic;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">namespace</span> TechnicalIndicators</div><div class="code-line" style="white-space: pre;">{</div><div class="code-line" style="white-space: pre;">    <span class="k">public</span> <span class="k">readonly</span> <span class="k">record</span> <span class="k">struct</span> CandleData(DateTime Timestamp, <span class="kt">decimal</span> Open, <span class="kt">decimal</span> High, <span class="kt">decimal</span> Low, <span class="kt">decimal</span> Close, <span class="kt">long</span> Volume);</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">/// Calculates the Relative Strength Index (RSI), a momentum oscillator that measures the speed and change of price movements.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;">    <span class="k">public</span> <span class="k">class</span> <span class="nc">RelativeStrengthIndex</span></div><div class="code-line" style="white-space: pre;">    {</div><div class="code-line" style="white-space: pre;">        <span class="c1">// Rationale: A tiny epsilon to prevent division by zero when AvgLoss is exactly 0.</span></div><div class="code-line" style="white-space: pre;">        <span class="k">private</span> <span class="k">const</span> <span class="kt">decimal</span> NearZeroThreshold = 1e-10m;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="kt">int</span> Period { <span class="k">get</span>; }</div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> List&lt;<span class="kt">decimal?</span>&gt; Values { <span class="k">get</span>; } = <span class="k">new</span>();</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// Initializes a new instance of the &lt;see cref=&quot;RelativeStrengthIndex&quot;/&gt; class.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;param name=&quot;period&quot;&gt;The lookback period (typically 14). Must be positive.&lt;/param&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> RelativeStrengthIndex(<span class="kt">int</span> period = 14)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (period &lt;= 0)</div><div class="code-line" style="white-space: pre;">                <span class="k">throw</span> <span class="k">new</span> ArgumentOutOfRangeException(<span class="k">nameof</span>(period), <span class="s">&quot;Period must be greater than 0&quot;</span>);</div><div class="code-line" style="white-space: pre;">            Period = period;</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// Computes the RSI values.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;param name=&quot;candles&quot;&gt;Input time series data.&lt;/param&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="k">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            Values.Clear();</div><div class="code-line" style="white-space: pre;">            <span class="kt">var</span> candleList = <span class="k">new</span> List&lt;CandleData&gt;(candles);</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (candleList.Count == 0) <span class="k">return</span>;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// Rationale: RSI is undefined for the first point as it requires a delta.</span></div><div class="code-line" style="white-space: pre;">            Values.Add(<span class="k">null</span>);</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (candleList.Count &lt; 2) <span class="k">return</span>;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> sumGains = 0;</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> sumLosses = 0;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="k">for</span> (<span class="kt">int</span> i = 1; i &lt; candleList.Count; i++)</div><div class="code-line" style="white-space: pre;">            {</div><div class="code-line" style="white-space: pre;">                <span class="c1">// Rationale: Calculate price change from previous day.</span></div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> change = candleList[i].Close - candleList[i - 1].Close;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> gain = change &gt; 0 ? change : 0;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> loss = change &lt; 0 ? -change : 0; <span class="c1">// Loss is stored as positive value</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// Rationale: Accumulate initial gains/losses for the first period (SMA initialization).</span></div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (i &lt; Period)</div><div class="code-line" style="white-space: pre;">                {</div><div class="code-line" style="white-space: pre;">                    sumGains += gain;</div><div class="code-line" style="white-space: pre;">                    sumLosses += loss;</div><div class="code-line" style="white-space: pre;">                    Values.Add(<span class="k">null</span>);</div><div class="code-line" style="white-space: pre;">                    <span class="k">continue</span>;</div><div class="code-line" style="white-space: pre;">                }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// Rationale: The first valid RSI calculation (at i == Period).</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// Uses Simple Moving Average of gains/losses.</span></div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (i == Period)</div><div class="code-line" style="white-space: pre;">                {</div><div class="code-line" style="white-space: pre;">                    sumGains += gain;</div><div class="code-line" style="white-space: pre;">                    sumLosses += loss;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> avgGain = sumGains / Period;</div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> avgLoss = sumLosses / Period;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> rsi = CalculateRsiValue(avgGain, avgLoss);</div><div class="code-line" style="white-space: pre;">                    Values.Add(rsi);</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="c1">// Update state variables to hold the Average, not the Sum, for the next iteration (Wilder&#x27;s Smoothing).</span></div><div class="code-line" style="white-space: pre;">                    sumGains = avgGain;</div><div class="code-line" style="white-space: pre;">                    sumLosses = avgLoss;</div><div class="code-line" style="white-space: pre;">                    <span class="k">continue</span>;</div><div class="code-line" style="white-space: pre;">                }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// Rationale: Wilder&#x27;s Smoothing for subsequent steps.</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// AvgGain_today = (AvgGain_prev * (N-1) + CurrentGain) / N</span></div><div class="code-line" style="white-space: pre;">                sumGains = (sumGains * (Period - 1) + gain) / Period;</div><div class="code-line" style="white-space: pre;">                sumLosses = (sumLosses * (Period - 1) + loss) / Period;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> rsiValue = CalculateRsiValue(sumGains, sumLosses);</div><div class="code-line" style="white-space: pre;">                Values.Add(rsiValue);</div><div class="code-line" style="white-space: pre;">            }</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// Rationale: Helper method to apply the final RSI formula: 100 - 100 / (1 + RS)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">private</span> <span class="k">static</span> <span class="kt">decimal</span> CalculateRsiValue(<span class="kt">decimal</span> avgGain, <span class="kt">decimal</span> avgLoss)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (Math.Abs(avgLoss) &lt; NearZeroThreshold)</div><div class="code-line" style="white-space: pre;">            {</div><div class="code-line" style="white-space: pre;">                <span class="c1">// If loss is 0, RS is infinite =&gt; RSI = 100.</span></div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (Math.Abs(avgGain) &lt; NearZeroThreshold)</div><div class="code-line" style="white-space: pre;">                    <span class="k">return</span> 50; <span class="c1">// No gain, No loss =&gt; Flat =&gt; 50</span></div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> 100;</div><div class="code-line" style="white-space: pre;">            }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> rs = avgGain / (avgLoss + NearZeroThreshold);</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> rsi = 100 - (100 / (1 + rs));</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> Math.Max(0, Math.Min(100, rsi));</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// Static convenience method to calculate RSI.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">/// &lt;/summary&gt;</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="k">static</span> List&lt;<span class="kt">decimal?</span>&gt; Calculate(IEnumerable&lt;CandleData&gt; candles, <span class="kt">int</span> period = 14)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="kt">var</span> rsi = <span class="k">new</span> RelativeStrengthIndex(period);</div><div class="code-line" style="white-space: pre;">            rsi.Calculate(candles);</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> rsi.Values;</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">    }</div><div class="code-line" style="white-space: pre;">}</div></div></div>
<div id="code-csharp-detailed" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// RELATIVE STRENGTH INDEX (RSI) - Extreme Tutorial Mode</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [What] Relative Strength Index (RSI) is the most famous momentum oscillator,</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        developed by J. Welles Wilder Jr. It measures the speed and magnitude</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        of recent price changes on a 0-100 scale.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Why]  Raw momentum values vary wildly across different stocks and timeframes.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        RSI normalizes momentum to a 0-100 scale, making it universal:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI &gt; 70: Overbought (price may be due for a pullback)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI &lt; 30: Oversold (price may be due for a bounce)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//        - RSI ≈ 50: Neutral (no strong momentum bias)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Visual] RSI Concept - The Gain/Loss Balance:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   Imagine a tug-of-war between bulls and bears:</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├──────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │  BULLS (Gains)                          BEARS (Losses)       │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │  ═══════════╗         RSI 50           ╔═══════════          │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │             ║                          ║                     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │  Average    ║     (Perfect Balance)    ║    Average          │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │  Gain       ║                          ║    Loss             │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │             ║                          ║                     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │  High RSI ──╝                          ╚── Low RSI           │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├──────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI 70+: Bulls dominating (overbought - may be exhausted)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI 30-: Bears dominating (oversold - may be exhausted)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [How] Algorithm Overview (Wilder&#x27;s Smoothing Method):</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ┌─────────────────────────────────────────────────────────────┐</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 1: Calculate price change for each bar                │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         change = Close[i] - Close[i-1]                     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├─────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 2: Separate gains and losses                          │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         Gain = max(change, 0), Loss = max(-change, 0)      │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├─────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 3: Initial averages (first Period bars)               │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         avgGain = SMA(Gains), avgLoss = SMA(Losses)        │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├─────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 4: Wilder&#x27;s Smoothing (subsequent bars)               │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         avgGain = (prevGain × (N-1) + currentGain) / N     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         avgLoss = (prevLoss × (N-1) + currentLoss) / N     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├─────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 5: Calculate Relative Strength                        │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         RS = avgGain / avgLoss                              │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   ├─────────────────────────────────────────────────────────────┤</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │ STEP 6: Convert to RSI                                     │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   │         RSI = 100 - (100 / (1 + RS))                       │</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   └─────────────────────────────────────────────────────────────┘</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// [Formula]</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RS = Average Gain / Average Loss</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//   RSI = 100 - (100 / (1 + RS))</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//       = 100 × avgGain / (avgGain + avgLoss)  [equivalent form]</span></div><div class="code-line" style="white-space: pre;"><span class="c1">//</span></div><div class="code-line" style="white-space: pre;"><span class="c1">// =============================================================================</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">using</span> System;</div><div class="code-line" style="white-space: pre;"><span class="k">using</span> System.Collections.Generic;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">namespace</span> TechnicalIndicators</div><div class="code-line" style="white-space: pre;">{</div><div class="code-line" style="white-space: pre;">    <span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">// [What] CandleData: Immutable record for OHLCV price bar data</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">public</span> <span class="k">readonly</span> <span class="k">record</span> <span class="k">struct</span> CandleData(</div><div class="code-line" style="white-space: pre;">        DateTime Timestamp,</div><div class="code-line" style="white-space: pre;">        <span class="kt">decimal</span> Open,</div><div class="code-line" style="white-space: pre;">        <span class="kt">decimal</span> High,</div><div class="code-line" style="white-space: pre;">        <span class="kt">decimal</span> Low,</div><div class="code-line" style="white-space: pre;">        <span class="kt">decimal</span> Close,</div><div class="code-line" style="white-space: pre;">        <span class="kt">long</span> Volume</div><div class="code-line" style="white-space: pre;">    );</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">// [What] RelativeStrengthIndex Class: Wilder&#x27;s momentum oscillator (0-100)</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">// =========================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">public</span> <span class="k">class</span> <span class="nc">RelativeStrengthIndex</span></div><div class="code-line" style="white-space: pre;">    {</div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] NearZeroThreshold: Prevents division by zero in calculations</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [Why]  When avgLoss is exactly 0, RS becomes infinite. This small</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//        value acts as a safety buffer.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="k">private</span> <span class="k">const</span> <span class="kt">decimal</span> NearZeroThreshold = 1e-10m;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] Period: Number of bars for RSI calculation</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [Why]  Default 14 is Wilder&#x27;s original recommendation</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="kt">int</span> Period { <span class="k">get</span>; }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] Values: Stores the calculated RSI (0-100) for each bar</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ---------------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> List&lt;<span class="kt">decimal?</span>&gt; Values { <span class="k">get</span>; } = <span class="k">new</span>();</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] Constructor: Initialize with lookback period</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> RelativeStrengthIndex(<span class="kt">int</span> period = 14)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (period &lt;= 0)</div><div class="code-line" style="white-space: pre;">                <span class="k">throw</span> <span class="k">new</span> ArgumentOutOfRangeException(<span class="k">nameof</span>(period), <span class="s">&quot;Period must be greater than 0&quot;</span>);</div><div class="code-line" style="white-space: pre;">            Period = period;</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] Calculate: Main computation method</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ┌──────────────────────────────────────────────────────────────────┐</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ INPUT:  candles - Collection of OHLCV price bars                │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ PROCESS: Compute avg gains/losses with Wilder smoothing, to RSI │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ OUTPUT: Values list with RSI (0-100) for each bar               │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// └──────────────────────────────────────────────────────────────────┘</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="k">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            Values.Clear();</div><div class="code-line" style="white-space: pre;">            <span class="kt">var</span> candleList = <span class="k">new</span> List&lt;CandleData&gt;(candles);</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (candleList.Count == 0) <span class="k">return</span>;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] First bar has no previous bar to compare</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Why]  Cannot calculate change, so output null</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            Values.Add(<span class="k">null</span>);</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (candleList.Count &lt; 2) <span class="k">return</span>;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] Accumulators for initial SMA calculation</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> sumGains = 0;</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> sumLosses = 0;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] Main loop: Process each bar from index 1 onwards</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Visual] Three Phases of RSI Calculation:</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   Phase A (i &lt; Period): Accumulate gains/losses, output null</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   ├─ Bar 1: +2, -0 → sumGains=2</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   ├─ Bar 2: +0, -1 → sumLosses=1</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   └─ ... (13 bars for Period=14)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   Phase B (i == Period): Calculate initial averages with SMA</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   └─ avgGain = sumGains/14, avgLoss = sumLosses/14</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   Phase C (i &gt; Period): Apply Wilder&#x27;s smoothing</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   └─ avgGain = (prevAvg × 13 + currentGain) / 14</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">for</span> (<span class="kt">int</span> i = 1; i &lt; candleList.Count; i++)</div><div class="code-line" style="white-space: pre;">            {</div><div class="code-line" style="white-space: pre;">                <span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [What] Calculate price change from previous bar</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> change = candleList[i].Close - candleList[i - 1].Close;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [What] Separate change into gain and loss components</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [Visual] Price Change Separation:</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   Price rose (+3):  Gain = 3, Loss = 0</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   Price fell (-2):  Gain = 0, Loss = 2</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   Price flat (0):   Gain = 0, Loss = 0</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> gain = change &gt; 0 ? change : 0;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> loss = change &lt; 0 ? -change : 0;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// PHASE A: Accumulate for Initial Average (Warm-up)</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (i &lt; Period)</div><div class="code-line" style="white-space: pre;">                {</div><div class="code-line" style="white-space: pre;">                    sumGains += gain;</div><div class="code-line" style="white-space: pre;">                    sumLosses += loss;</div><div class="code-line" style="white-space: pre;">                    Values.Add(<span class="k">null</span>);</div><div class="code-line" style="white-space: pre;">                    <span class="k">continue</span>;</div><div class="code-line" style="white-space: pre;">                }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// PHASE B: First RSI Calculation (Initial SMA)</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (i == Period)</div><div class="code-line" style="white-space: pre;">                {</div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [What] Add current bar&#x27;s values to complete the sum</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    sumGains += gain;</div><div class="code-line" style="white-space: pre;">                    sumLosses += loss;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [What] Calculate simple average for initial values</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [Why]  First RSI needs a starting point; SMA is standard</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> avgGain = sumGains / Period;</div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> avgLoss = sumLosses / Period;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [What] Calculate and store first RSI value</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="kt">decimal</span> rsi = CalculateRsiValue(avgGain, avgLoss);</div><div class="code-line" style="white-space: pre;">                    Values.Add(rsi);</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [What] Store averages for next iteration&#x27;s smoothing</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// [Why]  These become &quot;previous averages&quot; for Wilder formula</span></div><div class="code-line" style="white-space: pre;">                    <span class="c1">// ---------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                    sumGains = avgGain;</div><div class="code-line" style="white-space: pre;">                    sumLosses = avgLoss;</div><div class="code-line" style="white-space: pre;">                    <span class="k">continue</span>;</div><div class="code-line" style="white-space: pre;">                }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// PHASE C: Wilder&#x27;s Smoothing (Standard Calculation)</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// =============================================================</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [What] Apply Wilder&#x27;s smoothing formula</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [Formula]</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   newAvg = (prevAvg × (Period - 1) + currentValue) / Period</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [Why] Wilder&#x27;s smoothing is similar to EMA but gives more</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//       weight to historical data. It creates smoother RSI.</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// [Visual] Smoothing Effect:</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   prevAvgGain = 1.0, currentGain = 5.0, Period = 14</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   newAvgGain = (1.0 × 13 + 5.0) / 14 = 18 / 14 = 1.286</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//   (New value only contributes 1/14 ≈ 7% to the average)</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">                <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> currentGain = change &gt; 0 ? change : 0;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> currentLoss = change &lt; 0 ? -change : 0;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                sumGains = (sumGains * (Period - 1) + currentGain) / Period;</div><div class="code-line" style="white-space: pre;">                sumLosses = (sumLosses * (Period - 1) + currentLoss) / Period;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">                <span class="kt">decimal</span> rsiValue = CalculateRsiValue(sumGains, sumLosses);</div><div class="code-line" style="white-space: pre;">                Values.Add(rsiValue);</div><div class="code-line" style="white-space: pre;">            }</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] CalculateRsiValue: Helper to convert averages to RSI</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ┌──────────────────────────────────────────────────────────────────┐</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ INPUT:  avgGain, avgLoss - Smoothed average gains and losses    │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ PROCESS: Handle edge cases, apply RSI formula                   │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ OUTPUT: RSI value clamped to 0-100 range                        │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// └──────────────────────────────────────────────────────────────────┘</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="k">private</span> <span class="k">static</span> <span class="kt">decimal</span> CalculateRsiValue(<span class="kt">decimal</span> avgGain, <span class="kt">decimal</span> avgLoss)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] Handle edge case: No losses (avgLoss ≈ 0)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Why]  If avgLoss is 0, RS = avgGain/0 = infinity</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//        Need special handling to avoid division by zero</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Logic]</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   No losses AND no gains → RSI = 50 (neutral)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   No losses BUT has gains → RSI = 100 (maximum bullish)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> (Math.Abs(avgLoss) &lt; NearZeroThreshold)</div><div class="code-line" style="white-space: pre;">            {</div><div class="code-line" style="white-space: pre;">                <span class="k">if</span> (Math.Abs(avgGain) &lt; NearZeroThreshold)</div><div class="code-line" style="white-space: pre;">                    <span class="k">return</span> 50;  <span class="c1">// No movement at all</span></div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> 100;     <span class="c1">// All gains, no losses</span></div><div class="code-line" style="white-space: pre;">            }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] Standard RSI calculation</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Formula] RS = avgGain / avgLoss</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//           RSI = 100 - (100 / (1 + RS))</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Example]</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   avgGain = 0.5, avgLoss = 0.3</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   RS = 0.5 / 0.3 = 1.667</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   RSI = 100 - (100 / 2.667) = 100 - 37.5 = 62.5</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Why NearZeroThreshold in denominator?]</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//   Extra safety against floating-point edge cases</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> rs = avgGain / (avgLoss + NearZeroThreshold);</div><div class="code-line" style="white-space: pre;">            <span class="kt">decimal</span> rsi = 100 - (100 / (1 + rs));</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [What] Clamp result to valid 0-100 range</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// [Why]  Floating-point arithmetic might produce values slightly</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">//        outside range due to rounding errors</span></div><div class="code-line" style="white-space: pre;">            <span class="c1">// -----------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> Math.Max(0, Math.Min(100, rsi));</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [What] Calculate: Static convenience method</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// =====================================================================</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// [IPO Block]</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// ┌──────────────────────────────────────────────────────────────────┐</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ INPUT:  candles - Price bars, period - Lookback length          │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ PROCESS: Create instance, calculate, return results             │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// │ OUTPUT: List of RSI values (0-100) for each bar                 │</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">// └──────────────────────────────────────────────────────────────────┘</span></div><div class="code-line" style="white-space: pre;">        <span class="c1">//</span></div><div class="code-line" style="white-space: pre;">        <span class="k">public</span> <span class="k">static</span> List&lt;<span class="kt">decimal?</span>&gt; Calculate(IEnumerable&lt;CandleData&gt; candles, <span class="kt">int</span> period = 14)</div><div class="code-line" style="white-space: pre;">        {</div><div class="code-line" style="white-space: pre;">            <span class="kt">var</span> rsi = <span class="k">new</span> RelativeStrengthIndex(period);</div><div class="code-line" style="white-space: pre;">            rsi.Calculate(candles);</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> rsi.Values;</div><div class="code-line" style="white-space: pre;">        }</div><div class="code-line" style="white-space: pre;">    }</div><div class="code-line" style="white-space: pre;">}</div></div></div>
<div id="code-python-simple" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="k">class</span> <span class="nc">RelativeStrengthIndex</span>:</div><div class="code-line" style="white-space: pre;">    <span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    Calculates Relative Strength Index (RSI).</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">    Attributes:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        period (int): Lookback period.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        values (List[Optional[float]]): RSI values (0-100).</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">    NEAR_ZERO = 1e-10</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> __init__(self, period=14):</div><div class="code-line" style="white-space: pre;">        <span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Initializes RSI Calculator.</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">        Args:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            period (int): Period N.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        </span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Raises:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            ValueError: If period &lt;= 0.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> period &lt;= 0:</div><div class="code-line" style="white-space: pre;">            <span class="k">raise</span> ValueError(<span class="s2">&quot;</span><span class="s2">period</span><span class="s2">&quot;</span>)</div><div class="code-line" style="white-space: pre;">        self.period = period</div><div class="code-line" style="white-space: pre;">        self.values = []</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> calculate(self, candles):</div><div class="code-line" style="white-space: pre;">        <span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        Computes RSI.</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="sd">        Args:</span></div><div class="code-line" style="white-space: pre;"><span class="sd">            candles (List[dict]): Candle data.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">        &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">        self.values.clear()</div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> len(candles) == 0:</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># Rationale: Impossible to calculate change for the first candle.</span></div><div class="code-line" style="white-space: pre;">        self.values.append(<span class="kc">None</span>)</div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> len(candles) &lt; 2:</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        sum_gains = 0</div><div class="code-line" style="white-space: pre;">        sum_losses = 0</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="k">for</span> i <span class="ow">in</span> range(1, len(candles)):</div><div class="code-line" style="white-space: pre;">            change = candles[i][<span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span>] - candles[i - 1][<span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span>]</div><div class="code-line" style="white-space: pre;">            gain = change <span class="k">if</span> change &gt; 0 <span class="k">else</span> 0</div><div class="code-line" style="white-space: pre;">            loss = -change <span class="k">if</span> change &lt; 0 <span class="k">else</span> 0</div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: Accumulate sums for initial SMA.</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> i &lt; self.period:</div><div class="code-line" style="white-space: pre;">                sum_gains += gain</div><div class="code-line" style="white-space: pre;">                sum_losses += loss</div><div class="code-line" style="white-space: pre;">                self.values.append(<span class="kc">None</span>)</div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: First point uses SMA of Gain/Loss.</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> i == self.period:</div><div class="code-line" style="white-space: pre;">                sum_gains += gain</div><div class="code-line" style="white-space: pre;">                sum_losses += loss</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                avg_gain = sum_gains / self.period</div><div class="code-line" style="white-space: pre;">                avg_loss = sum_losses / self.period</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                rsi = self._calc_rsi(avg_gain, avg_loss)</div><div class="code-line" style="white-space: pre;">                self.values.append(rsi)</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Switch to Wilder&#x27;s Smoothing State</span></div><div class="code-line" style="white-space: pre;">                sum_gains = avg_gain</div><div class="code-line" style="white-space: pre;">                sum_losses = avg_loss</div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># Rationale: Wilder&#x27;s Smoothing.</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Avg = (Prev * (N-1) + Curr) / N</span></div><div class="code-line" style="white-space: pre;">            sum_gains = (sum_gains * (self.period - 1) + gain) / self.period</div><div class="code-line" style="white-space: pre;">            sum_losses = (sum_losses * (self.period - 1) + loss) / self.period</div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            rsi = self._calc_rsi(sum_gains, sum_losses)</div><div class="code-line" style="white-space: pre;">            self.values.append(rsi)</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> _calc_rsi(self, avg_gain, avg_loss):</div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> abs(avg_loss) &lt; self.NEAR_ZERO:</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span> 50 <span class="k">if</span> abs(avg_gain) &lt; self.NEAR_ZERO <span class="k">else</span> 100</div><div class="code-line" style="white-space: pre;">        rs = avg_gain / (avg_loss + self.NEAR_ZERO)</div><div class="code-line" style="white-space: pre;">        rsi = 100 - (100 / (1 + rs))</div><div class="code-line" style="white-space: pre;">        <span class="k">return</span> max(0, min(100, rsi))</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="k">def</span> calculate(candles, period=14):</div><div class="code-line" style="white-space: pre;">    <span class="sd">&quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    Static wrapper for RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="sd">    &quot;&quot;&quot;</span></div><div class="code-line" style="white-space: pre;">    rsi = RelativeStrengthIndex(period)</div><div class="code-line" style="white-space: pre;">    rsi.calculate(candles)</div><div class="code-line" style="white-space: pre;">    <span class="k">return</span> rsi.values</div></div></div>
<div id="code-python-detailed" class="code-content hidden"><div class="highlight"><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Logic Breakdown (Relative Strength Index)</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># This document provides a &quot;Deep Dive&quot; into the internal logic of the</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Relative Strength Index (RSI).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Core Concepts]</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 1. Internal Strength</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI compares the magnitude of recent Gains vs recent Losses.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - If Gains &gt; Losses -&gt; Market is Strong (RSI &gt; 50).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - If Losses &gt; Gains -&gt; Market is Weak (RSI &lt; 50).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 2. Wilder&#x27;s Smoothing (The &quot;Gotcha&quot;)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - Most people assume RSI uses a simple average (SMA).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - It actually uses Wilder&#x27;s Moving Average (SMMA).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - This creates &quot;Infinite Memory&quot;. The values from 100 days ago still</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#      have a microscopic effect on today&#x27;s RSI.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - Formula: NewAvg = (PrevAvg * (N-1) + Current) / N.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># 3. Normalization</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - The raw Ratio (RS) stretches from 0 to Inf.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI maps this to 0-100 for readability.</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#    - RSI = 100 - (100 / (1 + RS)).</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Type-Level Explanation: RelativeStrengthIndex (class)</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Why]  The industry standard for momentum.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [What] Oscillator (0-100).</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [How]  Uses Wilder&#x27;s Smoothing to calculate the average of gains and losses over N periods, then formats this ratio as an oscillator between 0 and 100.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Who]  J. Welles Wilder Jr. (1978).</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;"><span class="k">class</span> <span class="nc">RelativeStrengthIndex</span>:</div><div class="code-line" style="white-space: pre;">    </div><div class="code-line" style="white-space: pre;">    <span class="c1"># Constant to prevent Division By Zero</span></div><div class="code-line" style="white-space: pre;">    NEAR_ZERO = 1e-10</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># Constructor: __init__</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> __init__(self, period=14):</div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> period &lt;= 0:</div><div class="code-line" style="white-space: pre;">            <span class="k">raise</span> ValueError(<span class="s2">&quot;</span><span class="s2">period must be &gt; 0</span><span class="s2">&quot;</span>)</div><div class="code-line" style="white-space: pre;">        self.period = period</div><div class="code-line" style="white-space: pre;">        self.values = []</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># IPO: calculate</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Input]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># - candles: List[dict]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Process]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 1. Compute Change = Close - PrevClose.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 2. Separate into U (Gain) and D (Loss).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 3. First N periods: Calculate Simple Average of Gains and Losses.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 4. Subsequent periods: Apply Wilder&#x27;s Smoothing.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 5. Compute RS = AvgGain / AvgLoss.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># 6. Compute RSI.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1">#</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Output]</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># - None.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> calculate(self, candles):</div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Logic Step 1: Reset</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        self.values.clear()</div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> len(candles) == 0:</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">        <span class="c1"># The first bar has no &quot;change&quot;, so RSI is undefined</span></div><div class="code-line" style="white-space: pre;">        self.values.append(<span class="kc">None</span>)</div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> len(candles) &lt; 2:</div><div class="code-line" style="white-space: pre;">            <span class="k">return</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">        <span class="c1"># State Variables for Smoothing</span></div><div class="code-line" style="white-space: pre;">        sum_gains = 0.0</div><div class="code-line" style="white-space: pre;">        sum_losses = 0.0</div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Logic Step 2: Main Loop</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">        <span class="k">for</span> i <span class="ow">in</span> range(1, len(candles)):</div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Logic Step 2.1: Calculate Raw Change</span></div><div class="code-line" style="white-space: pre;">            change = candles[i][<span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span>] - candles[i - 1][<span class="s1">&#x27;</span><span class="s1">close</span><span class="s1">&#x27;</span>]</div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Logic Step 2.2: Separate Up/Down</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> change &gt; 0:</div><div class="code-line" style="white-space: pre;">                gain = change</div><div class="code-line" style="white-space: pre;">                loss = 0.0</div><div class="code-line" style="white-space: pre;">            <span class="k">else</span>:</div><div class="code-line" style="white-space: pre;">                gain = 0.0</div><div class="code-line" style="white-space: pre;">                loss = -change <span class="c1"># Make positive</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase A: Seed Period (Accumulation)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i &lt; N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> i &lt; self.period:</div><div class="code-line" style="white-space: pre;">                sum_gains += gain</div><div class="code-line" style="white-space: pre;">                sum_losses += loss</div><div class="code-line" style="white-space: pre;">                <span class="c1"># Not enough data for RSI yet</span></div><div class="code-line" style="white-space: pre;">                self.values.append(<span class="kc">None</span>)</div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase B: First RSI (Simple Average)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i == N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Why] Wilder initialized the Series with a Simple MA.</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> i == self.period:</div><div class="code-line" style="white-space: pre;">                sum_gains += gain</div><div class="code-line" style="white-space: pre;">                sum_losses += loss</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Calculate Initial Averages</span></div><div class="code-line" style="white-space: pre;">                avg_gain = sum_gains / self.period</div><div class="code-line" style="white-space: pre;">                avg_loss = sum_losses / self.period</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># Compute &amp; Store</span></div><div class="code-line" style="white-space: pre;">                rsi = self._compute_rsi_value(avg_gain, avg_loss)</div><div class="code-line" style="white-space: pre;">                self.values.append(rsi)</div><div class="code-line" style="white-space: pre;">                </div><div class="code-line" style="white-space: pre;">                <span class="c1"># [Crucial State Update]</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># For the NEXT step (Wilder&#x27;s Smoothing), the &quot;Previous Average&quot;</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># is the current Average we just calculated.</span></div><div class="code-line" style="white-space: pre;">                <span class="c1"># So we repurpose sum_gains/sum_losses to hold averages.</span></div><div class="code-line" style="white-space: pre;">                sum_gains = avg_gain</div><div class="code-line" style="white-space: pre;">                sum_losses = avg_loss</div><div class="code-line" style="white-space: pre;">                <span class="k">continue</span></div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># Phase C: Subsequent RSI (Wilder&#x27;s Smoothing)</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Limit] i &gt; N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># [Formula] NewAvg = (PrevAvg * (N-1) + Current) / N</span></div><div class="code-line" style="white-space: pre;">            <span class="c1"># -------------------------------------------------------------</span></div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Smooth the Averages</span></div><div class="code-line" style="white-space: pre;">            sum_gains = (sum_gains * (self.period - 1) + gain) / self.period</div><div class="code-line" style="white-space: pre;">            sum_losses = (sum_losses * (self.period - 1) + loss) / self.period</div><div class="code-line" style="white-space: pre;">            </div><div class="code-line" style="white-space: pre;">            <span class="c1"># Compute &amp; Store</span></div><div class="code-line" style="white-space: pre;">            rsi = self._compute_rsi_value(sum_gains, sum_losses)</div><div class="code-line" style="white-space: pre;">            self.values.append(rsi)</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># IPO: _compute_rsi_value (Helper)</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Input] AvgGain, AvgLoss.</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Process] RS = Gain/Loss. RSI = 100 - 100/(1+RS).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># [Output] RSI Value (0-100).</span></div><div class="code-line" style="white-space: pre;">    <span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;">    <span class="k">def</span> _compute_rsi_value(self, avg_gain, avg_loss):</div><div class="code-line" style="white-space: pre;">        <span class="c1"># [Fail Safe] Division by Zero</span></div><div class="code-line" style="white-space: pre;">        <span class="k">if</span> abs(avg_loss) &lt; self.NEAR_ZERO:</div><div class="code-line" style="white-space: pre;">            <span class="k">if</span> abs(avg_gain) &lt; self.NEAR_ZERO:</div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> 50.0 <span class="c1"># Flat line</span></div><div class="code-line" style="white-space: pre;">            <span class="k">else</span>:</div><div class="code-line" style="white-space: pre;">                <span class="k">return</span> 100.0 <span class="c1"># Vertical Up line</span></div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        rs = avg_gain / avg_loss</div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># [Visual]</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># Gain=10, Loss=2. RS=5.</span></div><div class="code-line" style="white-space: pre;">        <span class="c1"># RSI = 100 - (100 / 6) = 100 - 16.6 = 83.3.</span></div><div class="code-line" style="white-space: pre;">        rsi = 100.0 - (100.0 / (1.0 + rs))</div><div class="code-line" style="white-space: pre;">        </div><div class="code-line" style="white-space: pre;">        <span class="c1"># Clamp (floating point safety)</span></div><div class="code-line" style="white-space: pre;">        <span class="k">return</span> max(0.0, min(100.0, rsi))</div><div class="code-line" style="white-space: pre;">&#8203;</div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># Static Wrapper Function</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="c1">#</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Why] Functional API.</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># [Usage] rsi_values = calculate(candles, period=14)</span></div><div class="code-line" style="white-space: pre;"><span class="c1"># =============================================================================</span></div><div class="code-line" style="white-space: pre;"><span class="k">def</span> calculate(candles, period=14):</div><div class="code-line" style="white-space: pre;">    instance = RelativeStrengthIndex(period)</div><div class="code-line" style="white-space: pre;">    instance.calculate(candles)</div><div class="code-line" style="white-space: pre;">    <span class="k">return</span> instance.values</div></div></div>
</div>
</div>
</figure>
<div class="logic-legend">
<div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
<div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
<div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
<div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
<div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
</div>
</section>
<div class="flex flex-col lg:flex-row gap-12" id="documentation">
<article class="flex-1 min-w-0">
<div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
<h1 id="relative-strength-index-rsi">Relative Strength Index (RSI)</h1>
<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>
<h2 id="1-identity">1. Identity</h2>
<p class="mb-4">Full Name: Relative Strength Index  </p>
<p class="mb-4">Abbreviation: RSI  </p>
<p class="mb-4">Category: Western Momentum Oscillator  </p>
<p class="mb-4">Creator: J. Welles Wilder Jr. (1978)  </p>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: RSI is a normalized momentum oscillator that measures the ratio of average gains to average losses, bounded between 0 and 100, to identify overbought and oversold conditions.</blockquote>
<hr class="border-[#2a2e39] my-8">
<h2 id="2-calculation-logic">2. Calculation Logic</h2>
<h3 id="formula">Formula</h3>
<p class="mb-4">$$RSI = 100 - \frac{100}{1 + RS}$$</p>
<p class="mb-4">$$RS = \frac{Average\ Gain}{Average\ Loss}$$</p>
<p class="mb-4">Wilder's Smoothing Method:</p>
<p class="mb-4">$$Avg\ Gain_t = \frac{(Avg\ Gain_{t-1} \times (N-1)) + Current\ Gain}{N}$$</p>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Logic</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate daily changes (Close - Previous Close)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Determine direction</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">Separate gains (positive) and losses (negative absolute)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Decompose movement</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate Smoothed Average Gain and Loss</td><td class="px-4 py-2 border-b border-[#2a2e39]">Apply Wilder's smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate RS = Avg Gain / Avg Loss</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ratio of buying to selling pressure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">5</td><td class="px-4 py-2 border-b border-[#2a2e39]">Normalize to 0-100 scale</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bounded oscillator</td></tr>
</table></div>
<h3 id="real-world-analogy">Real-World Analogy</h3>
<p class="mb-4">Think of RSI as a tug-of-war scorer. If buyers win big every round (4 points) and sellers only win small (1 point), the buyer's side is dominating. RSI measures who's winning the daily battles and by how much. At RSI > 70, buyers have been winning overwhelmingly—perhaps too much. At RSI < 30, sellers dominate—perhaps exhausted.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="3-market-standards">3. Market Standards</h2>
<h3 id="default-parameters">Default Parameters</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">14</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's original, ~2 trading weeks</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard upper threshold</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">30</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard lower threshold</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Centerline</td><td class="px-4 py-2 border-b border-[#2a2e39]">50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equilibrium between bulls and bears</td></tr>
</table></div>
<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Period</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Scalping</td><td class="px-4 py-2 border-b border-[#2a2e39]">2-7</td><td class="px-4 py-2 border-b border-[#2a2e39]">1-5 min</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">9-14</td><td class="px-4 py-2 border-b border-[#2a2e39]">15-60 min</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">14</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">14-21</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily/Weekly</td></tr>
</table></div>
<h3 id="why-these-values">Why These Values?</h3>
<p class="mb-4">Wilder chose 14 periods representing half a lunar cycle and approximately two trading weeks. The 70/30 thresholds represent statistical extremes where the average gain significantly outpaces average loss (or vice versa).</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="4-market-context">4. Market Context</h2>
<h3 id="best-conditions">Best Conditions</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range-Bound Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI extremes reliably indicate reversals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pullbacks in Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI oversold in uptrend = buying opportunity</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price/RSI divergence signals momentum shift</td></tr>
</table></div>
<h3 id="limitations">Limitations</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Strong Trends</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI stays overbought/oversold for extended periods</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Low Volatility</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI clusters around 50, providing no signal</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Gapping Markets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gaps distort the gain/loss calculation</td></tr>
</table></div>
<h3 id="asset-class-suitability">Asset Class Suitability</h3>
<p class="mb-4">- Equities — Excellent for individual stocks</p>
<p class="mb-4">- Indices — Strong for market-wide momentum</p>
<p class="mb-4">- Forex — Works well for trending pairs</p>
<p class="mb-4">- Crypto — Adjust periods (7-9) for higher volatility</p>
<p class="mb-4">- Commodities — Good for cyclical analysis</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="5-entry-signals">5. Entry Signals</h2>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold Exit</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses above 30 from below</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought Exit</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses below 70 from above</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price Lower Low, RSI Higher Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Price Higher High, RSI Lower High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Failure Swing</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI < 30, rallies, holds > 30, breaks high</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish Failure Swing</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI > 70, drops, fails to reach 70, breaks low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Very Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Centerline Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI crosses 50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
</table></div>
<h3 id="primary-buy-signal">Primary Buy Signal</h3>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF RSI(14) &lt; 30 (previous bar)
AND RSI(14) &gt;= 30 (current bar)
AND Price &gt; SMA(200)
THEN → BUY (Oversold Reversion in Uptrend)
</code></pre>
<h3 id="primary-sell-signal">Primary Sell Signal</h3>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF RSI(14) &gt; 70 (previous bar)
AND RSI(14) &lt;= 70 (current bar)
AND Price &lt; SMA(200)
THEN → SELL (Overbought Reversion in Downtrend)
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="6-filter-usage">6. Filter Usage</h2>
<p class="mb-4">RSI is one of the most versatile confirmation and filter tools:</p>
<h3 id="filter-rules">Filter Rules</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI > 50</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take long entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI < 50</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Only take short entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI < 30</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for buy setups</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>RSI > 70</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for sell setups</td></tr>
</table></div>
<h3 id="recommended-pairings">Recommended Pairings</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">MACD</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI identifies extremes; MACD confirms trend change</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Moving Averages</td><td class="px-4 py-2 border-b border-[#2a2e39]">MA gives trend direction; RSI times entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVT/Volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI shows momentum; volume confirms conviction</td></tr>
</table></div>
<h3 id="example-combined-strategy">Example Combined Strategy</h3>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ENTRY CONDITIONS:
&nbsp;&nbsp;RSI(14) &lt; 30                     // Oversold
&nbsp;&nbsp;RSI(14) crosses above 30         // Reversal trigger
&nbsp;&nbsp;MACD Histogram turns positive    // Momentum confirmation
&nbsp;&nbsp;Price &gt; SMA(200)                 // Long-term uptrend
ACTION: BUY with momentum and trend confirmation
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="7-practical-cautions">7. Practical Cautions</h2>
<h3 id="lag-characteristics">Lag Characteristics</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">~15 bars (Period + 1)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Full Convergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">50+ bars for Wilder smoothing to stabilize</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Responsiveness</td><td class="px-4 py-2 border-b border-[#2a2e39]">Immediate at thresholds</td></tr>
</table></div>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: RSI values differ slightly across platforms due to Wilder's smoothing starting point. A 14-period RSI starting Jan 1 will differ from one starting Feb 1.</blockquote>
<h3 id="false-signal-scenarios">False Signal Scenarios</h3>
<p class="mb-4">1. The Trending Trap  </p>
<p class="mb-4">   RSI stays > 70 for weeks in strong uptrend. Selling every touch of 70 loses money.</p>
<p class="mb-4">2. Premature Reversal  </p>
<p class="mb-4">   Entering on first touch of 30 before momentum actually shifts.</p>
<p class="mb-4">3. Divergence Failure  </p>
<p class="mb-4">   Divergence identified but price continues in original direction for weeks.</p>
<h3 id="mitigation-strategies">Mitigation Strategies</h3>
<p class="mb-4">- Regime-Adjusted Thresholds: In bull markets use 40/80; in bear markets use 20/60</p>
<p class="mb-4">- Wait for Failure Swing: More reliable than simple threshold crosses</p>
<p class="mb-4">- MACD Confirmation: Wait for MACD histogram to confirm RSI signal</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="8-pro-insights">8. Pro Insights</h2>
<h3 id="constance-brown's-range-shift">Constance Brown's Range Shift</h3>
<p class="mb-4">In Bull Markets, RSI oscillates between 40 and 80 (support moves up). In Bear Markets, it oscillates between 20 and 60 (resistance moves down). If RSI fails to reach 70 in a rally and reverses at 60, it confirms bearish regime.</p>
<h3 id="failure-swings—wilder's-favorite">Failure Swings—Wilder's Favorite</h3>
<p class="mb-4">J. Welles Wilder considered Failure Swings more reliable than divergence:</p>
<p class="mb-4">- Bullish: RSI drops below 30, rallies above 30, pulls back but stays above 30, then breaks above its rally high</p>
<p class="mb-4">- Bearish: Mirror pattern above 70</p>
<h3 id="the-2-period-rsi-connors">The 2-Period RSI (Connors)</h3>
<p class="mb-4">For mean-reversion scalping, RSI(2) provides extreme sensitivity:</p>
<p class="mb-4">- RSI(2) < 10 = Strong buy</p>
<p class="mb-4">- RSI(2) > 90 = Strong sell</p>
<p class="mb-4">Used with trend filters, this captures micro-reversals in strongly trending stocks.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="9-summary">9. Summary</h2>
<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"RSI tells you who's winning the daily tug-of-war—when one side wins too much, expect the other team to start pulling back."</blockquote>
<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>
<h2 id="1-core-concept">1. Core Concept</h2>
<p class="mb-4">RSI answers one question: "Are buyers or sellers winning, and by how much?"</p>
<p class="mb-4">The calculation is elegant: separate each day's movement into gains and losses. Average them over N periods using Wilder's smoothing. Divide average gain by average loss to get Relative Strength (RS). Convert to a 0-100 scale.</p>
<p class="mb-4">This bounded nature is RSI's killer feature. Unlike unbounded oscillators (ROC), RSI always fits on the same scale, making 30/70 universally applicable across any asset.</p>
<p class="mb-4">The smoothing method creates "memory"—today's RSI is influenced by all historical data, not just the last N days. This provides stability but means RSI values depend on starting point.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="2-statistical-edge">2. Statistical Edge</h2>
<h3 id="backtest-evidence">Backtest Evidence</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI Signal</td><td class="px-4 py-2 border-b border-[#2a2e39]">Next 5-Day Performance</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI < 30</td><td class="px-4 py-2 border-b border-[#2a2e39]">+1.8% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI cross below 70</td><td class="px-4 py-2 border-b border-[#2a2e39]">-0.9% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">+2.3% average</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Failure Swing (Bull)</td><td class="px-4 py-2 border-b border-[#2a2e39]">+3.1% average</td></tr>
</table></div>
<h3 id="why-it-works">Why It Works</h3>
<p class="mb-4">RSI exploits the mean-reversion tendency of momentum. When buyers dominate (RSI > 70), they become exhausted; when sellers dominate (RSI < 30), they're often in capitulation. The bounded scale makes these extremes consistent and tradeable.</p>
<h3 id="academic-reference">Academic Reference</h3>
<p class="mb-4">Wilder's RSI was introduced in *New Concepts in Technical Trading Systems* (1978), one of the most influential technical analysis books ever written. Studies have confirmed RSI's edge in counter-trend strategies.</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>
<h3 id="strategy-name:-"the-signal-reinforcement-entry"">Strategy Name: "The Signal Reinforcement Entry"</h3>
<p class="mb-4">Concept: Use RSI for timing, MACD for confirmation—never enter on RSI alone.</p>
<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. Price > SMA(200) (uptrend context)</p>
<p class="mb-4">2. RSI(14) drops below 35 (close to oversold)</p>
<p class="mb-4">Entry Trigger:</p>
<p class="mb-4">- RSI(14) crosses back above 30</p>
<p class="mb-4">- MACD Histogram turns positive (or MACD crosses above Signal)</p>
<p class="mb-4">Position Sizing:</p>
<p class="mb-4">- Full size when RSI < 25 before bounce</p>
<p class="mb-4">- Half size when RSI 25-30 before bounce</p>
<p class="mb-4">Exit Rules:</p>
<p class="mb-4">1. Primary Exit: RSI(14) > 70 and turns down</p>
<p class="mb-4">2. Stop Loss: Below recent swing low</p>
<p class="mb-4">3. Time Stop: 10 bars if RSI doesn't reach 50</p>
<p class="mb-4">Example:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Stock XYZ shows:
&nbsp;&nbsp;Price = $48, above $42 SMA(200) ✓
&nbsp;&nbsp;RSI(14) = 26, rises to 32 → RSI signal ✓
&nbsp;&nbsp;MACD Histogram = -0.15 → +0.05 → MACD confirmation ✓
&nbsp;&nbsp;
&nbsp;&nbsp;Entry: $48
&nbsp;&nbsp;Stop: $45 (recent low)
&nbsp;&nbsp;
&nbsp;&nbsp;RSI rises to 72 and hooks down
&nbsp;&nbsp;Exit: $58 (+21%)
</code></pre>
<hr class="border-[#2a2e39] my-8">
<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>
<h3 id="failure-patterns">Failure Patterns</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Extended Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI > 70 for weeks in strong trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use regime-adjusted levels</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Platform Discrepancy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Different data lengths = different RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use relative changes, not absolutes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Division by Zero</td><td class="px-4 py-2 border-b border-[#2a2e39]">All gains, no losses = undefined</td><td class="px-4 py-2 border-b border-[#2a2e39]">Code handles: if AvgLoss = 0, RSI = 100</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Smooth Decay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's smoothing never fully forgets</td><td class="px-4 py-2 border-b border-[#2a2e39]">Accept as feature</td></tr>
</table></div>
<h3 id="psychological-traps">Psychological Traps</h3>
<p class="mb-4">1. The "RSI 70 = Sell" Reflexive Trap  </p>
<p class="mb-4">   In bull markets, RSI can stay above 70 for extended periods. Selling every touch shortens winners.</p>
<p class="mb-4">2. Waiting for 30 Forever  </p>
<p class="mb-4">   Strong uptrends may never offer RSI < 30. Use 40 as the new "oversold" in bull regimes.</p>
<p class="mb-4">3. Divergence Obsession  </p>
<p class="mb-4">   Divergences can persist for weeks before resolving. They're warnings, not triggers.</p>
<h3 id="common-misinterpretations">Common Misinterpretations</h3>
<p class="mb-4">- "RSI > 70 = overbought = sell" → In trends, 70 is just high, not necessarily reversal</p>
<p class="mb-4">- "Divergence = immediate reversal" → Divergence can precede price by weeks</p>
<p class="mb-4">- "RSI shows direction" → RSI shows momentum strength, not trend direction</p>
<hr class="border-[#2a2e39] my-8">
<h2 id="5-further-study">5. Further Study</h2>
<h3 id="creator-attribution">Creator Attribution</h3>
<p class="mb-4">J. Welles Wilder Jr. introduced RSI in his legendary 1978 book *New Concepts in Technical Trading Systems*. The book also introduced ATR, Parabolic SAR, and ADX—making it one of the most impactful works in technical analysis history.</p>
<h3 id="parent/child-indicators">Parent/Child Indicators</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Stochastic RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child — RSI applied to RSI values</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Connors RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Child — Composite RSI with streak and ROC</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder's Smoothing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Foundation — EMA variant used in calculation</td></tr>
</table></div>
<h3 id="recommended-readings">Recommended Readings</h3>
<p class="mb-4">1. *New Concepts in Technical Trading Systems* — J. Welles Wilder Jr.</p>
<p class="mb-4">2. *Short-Term Trading Strategies That Work* — Larry Connors</p>
<p class="mb-4">3. *Technical Analysis Using Multiple Timeframes* — Brian Shannon</p>
<hr class="border-[#2a2e39] my-8">
<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Stochastic</td><td class="px-4 py-2 border-b border-[#2a2e39]">CCI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Williams %R</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Measures</td><td class="px-4 py-2 border-b border-[#2a2e39]">Gain/loss ratio</td><td class="px-4 py-2 border-b border-[#2a2e39]">Position in range</td><td class="px-4 py-2 border-b border-[#2a2e39]">Deviation from mean</td><td class="px-4 py-2 border-b border-[#2a2e39]">Inverse stochastic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Range</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">0-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">Unbounded</td><td class="px-4 py-2 border-b border-[#2a2e39]">-100 to 0</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">70</td><td class="px-4 py-2 border-b border-[#2a2e39]">80</td><td class="px-4 py-2 border-b border-[#2a2e39]">+100</td><td class="px-4 py-2 border-b border-[#2a2e39]">-20</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">30</td><td class="px-4 py-2 border-b border-[#2a2e39]">20</td><td class="px-4 py-2 border-b border-[#2a2e39]">-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">-80</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Smoothing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Wilder (heavy)</td><td class="px-4 py-2 border-b border-[#2a2e39]">SMA (light)</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td><td class="px-4 py-2 border-b border-[#2a2e39]">None</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Momentum strength</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short-term timing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mean reversion</td><td class="px-4 py-2 border-b border-[#2a2e39]">Quick extremes</td></tr>
</table></div>
<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- RSI — Primary momentum assessment, divergence trading</p>
<p class="mb-4">- Stochastic — Fast entry timing in ranges</p>
<p class="mb-4">- CCI — Unbounded mean reversion signals</p>
<p class="mb-4">- Williams %R — Quick overbought/oversold reads</p>
<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>
<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>
<h3 id="threshold-matrix">Threshold Matrix</h3>
<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI Level</td><td class="px-4 py-2 border-b border-[#2a2e39]">Regime Context</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">80-100</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extremely strong</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trail stops; don't short</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">70-80</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong, normal overbought</td><td class="px-4 py-2 border-b border-[#2a2e39]">Hold; tighten stops</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">50-70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Healthy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Buy pullbacks</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">40-50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback zone</td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">30-40</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Oversold</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong buy zone</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">60-70</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Resistance zone</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short rallies</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">40-60</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Neutral</td><td class="px-4 py-2 border-b border-[#2a2e39]">Avoid</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">20-40</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weak selling</td><td class="px-4 py-2 border-b border-[#2a2e39]">Look for cover</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">0-20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Extreme panic</td><td class="px-4 py-2 border-b border-[#2a2e39]">Contrarian buy</td></tr>
</table></div>
<h3 id="signal-patterns">Signal Patterns</h3>
<h4 id="buy-signal-oversold-exit">Buy Signal (Oversold Exit)</h4>
<p class="mb-4">This classic Wilder signal triggers when RSI crosses back above 30 from oversold territory while in a bull trend context. The oversold condition (RSI < 30) indicates sellers have dominated recently, but the cross above 30 signals exhaustion and reversal. Historical backtests show +1.8% average performance over 5 days for this pattern.</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def rsi_buy_signal(rsi_values, price, sma_200):
&nbsp;&nbsp;&nbsp;&nbsp;condition_1 = rsi_values[-2] &lt; 30          # Was oversold
&nbsp;&nbsp;&nbsp;&nbsp;condition_2 = rsi_values[-1] &gt;= 30         # Crossed above
&nbsp;&nbsp;&nbsp;&nbsp;condition_3 = price &gt; sma_200              # Bull trend
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return all([condition_1, condition_2, condition_3])
</code></pre>
<h4 id="failure-swing-bullish">Failure Swing (Bullish)</h4>
<p class="mb-4">Wilder considered Failure Swings more reliable than simple oversold readings—they require a specific sequence: dip below 30, rally above 30, pullback that holds above 30, then break above the rally high. This pattern confirms support has formed and buyers are gaining control. Historical backtests show +3.1% average performance, making it RSI's strongest signal.</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def rsi_bullish_failure_swing(rsi_values):
&nbsp;&nbsp;&nbsp;&nbsp;# Find: dip below 30, rally, hold above 30, break high
&nbsp;&nbsp;&nbsp;&nbsp;recent_min = min(rsi_values[-10:-5])
&nbsp;&nbsp;&nbsp;&nbsp;rally_high = max(rsi_values[-5:-2])
&nbsp;&nbsp;&nbsp;&nbsp;pullback_low = min(rsi_values[-3:-1])
&nbsp;&nbsp;&nbsp;&nbsp;current = rsi_values[-1]
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;dip_below_30 = recent_min &lt; 30
&nbsp;&nbsp;&nbsp;&nbsp;held_above_30 = pullback_low &gt; 30
&nbsp;&nbsp;&nbsp;&nbsp;broke_high = current &gt; rally_high
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return dip_below_30 and held_above_30 and broke_high
</code></pre>
<h4 id="regime-detection">Regime Detection</h4>
<p class="mb-4">Constance Brown's insight: in bull markets, RSI oscillates between 40-80, while in bear markets it oscillates between 20-60. This function detects the current regime by averaging recent RSI values. Use 40/80 thresholds in bull regimes and 20/60 in bear regimes for dramatically improved signal quality.</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def rsi_regime(rsi_values, lookback=50):
&nbsp;&nbsp;&nbsp;&nbsp;avg = sum(rsi_values[-lookback:]) / lookback
&nbsp;&nbsp;&nbsp;&nbsp;if avg &gt; 55:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;BULL&quot;  # Use 40/80 levels
&nbsp;&nbsp;&nbsp;&nbsp;elif avg &lt; 45:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;BEAR&quot;  # Use 20/60 levels
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;NEUTRAL&quot;  # Standard 30/70
</code></pre>
<h3 id="screening-filters">Screening Filters</h3>
<h4 id="oversold-in-uptrend-scanner">Oversold in Uptrend Scanner</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
RSI(14) &lt; 30
AND RSI(14) &gt; RSI(14)[1]
AND Close &gt; SMA(Close, 200)
</code></pre>
<h4 id="failure-swing-setup">Failure Swing Setup</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
RSI(14) crossed below 30 within last 5 bars
AND MIN(RSI(14), last 5 bars) &gt; 30
AND RSI(14) &gt; MAX(RSI(14), bars 2-5)
</code></pre>
<h4 id="connors-rsi-extreme">Connors RSI Extreme</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
RSI(2) &lt; 10
AND Close &gt; SMA(Close, 200)
AND ADX(14) &gt; 20
</code></pre>
<h3 id="combination-strategies">Combination Strategies</h3>
<h4 id="rsi-+-macd-confirmation">RSI + MACD Confirmation</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SETUP:
&nbsp;&nbsp;Price &gt; SMA(200)
&nbsp;&nbsp;RSI(14) &lt; 35
ENTRY:
&nbsp;&nbsp;RSI(14) crosses above 30
&nbsp;&nbsp;AND MACD Histogram &gt; MACD Histogram[1]
STOP_LOSS:
&nbsp;&nbsp;Recent swing low
TAKE_PROFIT:
&nbsp;&nbsp;RSI(14) &gt; 70 AND RSI(14) &lt; RSI(14)[1]
</code></pre>
<h4 id="connors-2-period-mean-reversion">Connors 2-Period Mean Reversion</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FILTER:
&nbsp;&nbsp;Close &gt; SMA(200)
&nbsp;&nbsp;ADX(14) &gt; 20
ENTRY:
&nbsp;&nbsp;RSI(2) &lt; 10
STOP_LOSS:
&nbsp;&nbsp;Close &lt; SMA(200)
TAKE_PROFIT:
&nbsp;&nbsp;RSI(2) &gt; 70
&nbsp;&nbsp;OR Close &gt; 5-day high
</code></pre>
</div>
</article>
<aside class="hidden lg:block w-64 flex-shrink-0">
<div class="sticky top-24">
<h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
On this page
</h3>
<nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
<a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#why-these-values" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why These Values?</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal</a>
<a href="#primary-sell-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Sell Signal</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#constance-brown's-range-shift" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Constance Brown's Range Shift</a>
<a href="#failure-swings—wilder's-favorite" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Swings—Wilder's Favorite</a>
<a href="#the-2-period-rsi-connors" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The 2-Period RSI (Connors)</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#backtest-evidence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Backtest Evidence</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#academic-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Academic Reference</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"the-signal-reinforcement-entry"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "The Signal Reinforcement Entry"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>
</nav>
<div class="mt-8 pt-4 border-t border-slate-100">
<a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
Back to Top
</a>
</div>
</div>
</aside>
</div>
</div>
<footer class="bg-white border-t border-slate-200 mt-12">
<div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
<p class="text-center text-slate-400 text-sm">
&copy; 2023-2025 I ant I Investigates. All rights reserved.
</p>
</div>
</footer>
<script>
window.IndicatorLogic = {
name: "RSI",
params: [],
calculate: null
};
(function() {
try {
const injectedCode = `
window.IndicatorLogic = {
calculate: (data, params) => {
// Use PlaygroundController's built-in RSI calculation
if (window.PlaygroundController && window.PlaygroundController.calculateRSI) {
return window.PlaygroundController.calculateRSI(data, params.period || 14);
}
throw new Error("PlaygroundController.calculateRSI is not available.");
}
};
`;
const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('PLAYGROUND_LOGIC');
if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
new Function(injectedCode)();
} else {
console.warn("Playground Logic: Running in Preview/Fallback mode.");
window.IndicatorLogic.calculate = () => [];
}
} catch (e) {
console.error("Critical Error in Logic Injection:", e);
window.IndicatorLogic.calculate = () => [];
}
})();
</script>
<script>
mermaid.initialize({ startOnLoad: true, theme: 'neutral', securityLevel: 'loose' });
</script>
<script src="../../assets/js/script.js" defer></script>
<script>
// --- 1. Code Panel Logic ---
const AppState = {
activeLang: 'csharp',
codeType: 'simple',
isPanelVisible: false,  // Start hidden to show flowchart
isPanelExpanded: false,
};
// --- 2. Canvas State (Full Pan/Zoom from 0117) ---
const CanvasState = {
scale: 1, panX: 0, panY: 0,
isDragging: false, startX: 0, startY: 0,
minScale: 0.1, maxScale: 5.0
};
// Element references (populated after DOM ready)
let els = {};
function updateView() {
// 1. Code Content Visibility
document.querySelectorAll('.code-content').forEach(el => el.classList.add('hidden'));
const activeId = `code-${AppState.activeLang}-${AppState.codeType}`;
const activeEl = document.getElementById(activeId);
if (activeEl) activeEl.classList.remove('hidden');
// 2. Overlay Visibility
const overlay = document.getElementById('code-panel-overlay');
if (overlay) {
if (AppState.isPanelVisible) overlay.classList.remove('panel-hidden');
else overlay.classList.add('panel-hidden');
if (AppState.isPanelExpanded) {
overlay.classList.add('panel-expanded');
const iconExp = document.getElementById('icon-expand');
const iconCol = document.getElementById('icon-collapse');
if(iconExp) iconExp.classList.add('hidden');
if(iconCol) iconCol.classList.remove('hidden');
} else {
overlay.classList.remove('panel-expanded');
const iconExp = document.getElementById('icon-expand');
const iconCol = document.getElementById('icon-collapse');
if(iconExp) iconExp.classList.remove('hidden');
if(iconCol) iconCol.classList.add('hidden');
}
}
// 3. Button States
const btnCs = document.getElementById('btn-lang-csharp');
const btnPy = document.getElementById('btn-lang-python');
[btnCs, btnPy].forEach(btn => {
if(btn) btn.className = "px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100";
});
if (AppState.activeLang === 'csharp' && btnCs) {
btnCs.className = "px-2 py-1 text-xs rounded transition-colors btn-lang-active";
} else if (AppState.activeLang === 'python' && btnPy) {
btnPy.className = "px-2 py-1 text-xs rounded transition-colors btn-lang-active";
}
const btnSimple = document.getElementById('btn-type-simple');
const btnDetailed = document.getElementById('btn-type-detailed');
if(btnSimple) btnSimple.className = `text-xs transition-colors ${AppState.codeType === 'simple' ? 'btn-type-active' : 'text-slate-500 hover:text-indigo-600'}`;
if(btnDetailed) btnDetailed.className = `text-xs transition-colors ${AppState.codeType === 'detailed' ? 'btn-type-active' : 'text-slate-500 hover:text-indigo-600'}`;
}
// Global exports for inline onclick handlers
window.setLang = (lang) => { AppState.activeLang = lang; updateView(); }
window.setType = (type) => { AppState.codeType = type; updateView(); }
window.toggleCodePanel = () => { AppState.isPanelVisible = !AppState.isPanelVisible; updateView(); }
window.toggleExpand = () => { AppState.isPanelExpanded = !AppState.isPanelExpanded; updateView(); }
window.copyCode = async () => {
const activeId = `code-${AppState.activeLang}-${AppState.codeType}`;
const el = document.getElementById(activeId);
if (!el) return;
let text = "";
const lines = el.querySelectorAll('.code-line');
if (lines.length > 0) {
text = Array.from(lines).map(line => line.textContent).join('\n');
} else {
text = el.textContent;
}
try {
await navigator.clipboard.writeText(text);
const iconCopy = document.getElementById('icon-copy');
const iconDone = document.getElementById('icon-copy-done');
if (iconCopy && iconDone) {
iconCopy.classList.add('hidden');
iconDone.classList.remove('hidden');
setTimeout(() => {
iconCopy.classList.remove('hidden');
iconDone.classList.add('hidden');
}, 2000);
}
} catch (err) { console.error("Failed to copy:", err); }
}
// --- Canvas Transform Functions (Full Pan/Zoom) ---
// PlaygroundController (Ported from template_0117.html)
window.PlaygroundController = {
instanceChart: null,
showError: (msg) => {
console.error('Playground Error:', msg);
const outputEl = document.getElementById('output-data');
if (outputEl) outputEl.value = 'Error: ' + msg;
},
clearError: () => {},
init: () => {
try {
// Generate Random Sample Data
const defaultData = [];
let price = 100;
for (let i = 0; i < 50; i++) {
price = price + (Math.random() - 0.5) * 5;
defaultData.push(parseFloat(price.toFixed(2)));
}
const inputEl = document.getElementById('input-data');
if (inputEl) inputEl.value = defaultData.join(', ');
PlaygroundController.update();
} catch(e) { PlaygroundController.showError(e.message); }
},
update: () => {
PlaygroundController.clearError();
// Get period param
const periodEl = document.getElementById('param-period');
const period = periodEl ? parseInt(periodEl.value) || 14 : 14;
const params = { period: period };
const rawData = document.getElementById('input-data').value.trim();
let lines = [];
// Robust split: handle comma, newline, or mixed
if (rawData.includes('\n')) {
// Split by newline first
lines = rawData.split('\n').map(l => l.trim()).filter(l => l);
// If it's NOT multi-column (header check), and lines contain commas, try to flatten
const firstVal = parseFloat(lines[0].split(/[,\t]/)[0]);
const isHeader = isNaN(firstVal) && /[a-zA-Z]/.test(lines[0]);
if (!isHeader && lines.some(l => l.includes(','))) {
// Flatten mixed content like "100, 101\n102, 103"
lines = rawData.split(/[\n,]+/).map(l => l.trim()).filter(l => l);
}
} else {
// Single line, split by comma
lines = rawData.split(',').map(l => l.trim()).filter(l => l);
}
let parsedData = [];
const firstLine = lines[0] || "";
const firstVal = parseFloat(firstLine.split(/[,\t]/)[0]);
const isMultiColumn = isNaN(firstVal) && /[a-zA-Z]/.test(firstLine);
if (isMultiColumn && lines.length > 1) {
const headers = firstLine.split(/[,\t]+/).map(h => h.trim().toLowerCase());
for (let i = 1; i < lines.length; i++) {
const parts = lines[i].split(/[,\t]+/).map(v => parseFloat(v));
if (parts.some(isNaN)) continue;
const row = { time: i - 1 };
headers.forEach((h, idx) => { row[h] = parts[idx]; });
if (row.close === undefined && row.c !== undefined) row.close = row.c;
parsedData.push(row);
}
} else {
parsedData = lines.map((l, i) => {
const val = parseFloat(l);
return isNaN(val) ? null : { time: i, close: val };
}).filter(d => d);
}
if (parsedData.length < 2) {
PlaygroundController.showError("Insufficient data.");
return;
}
let indicatorValues = [];
try {
if (typeof IndicatorLogic !== 'undefined' && IndicatorLogic.calculate) {
indicatorValues = IndicatorLogic.calculate(parsedData, params);
} else {
// Fallback: Simple RSI calculation for demo
indicatorValues = PlaygroundController.calculateRSI(parsedData, params.period);
}
} catch (e) {
console.error("Calculation Error", e);
PlaygroundController.showError("Calculation Error: " + e.message);
return;
}
let outputText = "";
if (Array.isArray(indicatorValues)) {
outputText = indicatorValues.map(v => v !== null ? v.toFixed(2) : 'null').join(', ');
} else {
outputText = JSON.stringify(indicatorValues, null, 2);
}
document.getElementById('output-data').value = outputText;
PlaygroundController.renderChart(parsedData, indicatorValues);
},
calculateRSI: (data, period) => {
// Simple RSI fallback
const values = [];
values.push(null); // First value is null
if (data.length < 2) return values;
let sumGains = 0, sumLosses = 0;
for (let i = 1; i < data.length; i++) {
const change = data[i].close - data[i-1].close;
const gain = change > 0 ? change : 0;
const loss = change < 0 ? -change : 0;
if (i < period) {
sumGains += gain; sumLosses += loss;
values.push(null);
continue;
}
if (i === period) {
sumGains += gain; sumLosses += loss;
const avgGain = sumGains / period;
const avgLoss = sumLosses / period;
const rs = avgLoss < 0.0001 ? 100 : avgGain / avgLoss;
values.push(100 - (100 / (1 + rs)));
sumGains = avgGain; sumLosses = avgLoss;
continue;
}
sumGains = (sumGains * (period - 1) + gain) / period;
sumLosses = (sumLosses * (period - 1) + loss) / period;
const rs = sumLosses < 0.0001 ? 100 : sumGains / sumLosses;
values.push(100 - (100 / (1 + rs)));
}
return values;
},
renderChart: (prices, indicatorValues) => {
const canvas = document.getElementById('indicatorChart');
if (!canvas) return;
const ctx = canvas.getContext('2d');
const labels = prices.map((_, i) => i);
if (PlaygroundController.instanceChart) PlaygroundController.instanceChart.destroy();
const datasets = [
{
label: 'Indicator',
data: indicatorValues,
borderColor: '#4F46E5',
backgroundColor: 'transparent',
tension: 0.1, pointRadius: 0, borderWidth: 2
}
];
PlaygroundController.instanceChart = new Chart(ctx, {
type: 'line',
data: { labels: labels, datasets: datasets },
options: {
responsive: true, maintainAspectRatio: false,
interaction: { mode: 'index', intersect: false },
scales: {
y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Value' } }
}
}
});
}
};
function updateTransform() {
if (els.content) {
els.content.style.transform = `translate(${CanvasState.panX}px, ${CanvasState.panY}px) scale(${CanvasState.scale})`;
}
}
function handleWheel(e) {
e.preventDefault();
const rect = els.container.getBoundingClientRect();
const mouseX = e.clientX - rect.left;
const mouseY = e.clientY - rect.top;
const zoomSensitivity = 0.001;
const delta = -e.deltaY * zoomSensitivity;
let newScale = CanvasState.scale * (1 + delta);
newScale = Math.max(CanvasState.minScale, Math.min(CanvasState.maxScale, newScale));
const scaleRatio = newScale / CanvasState.scale;
CanvasState.panX = mouseX - (mouseX - CanvasState.panX) * scaleRatio;
CanvasState.panY = mouseY - (mouseY - CanvasState.panY) * scaleRatio;
CanvasState.scale = newScale;
updateTransform();
}
function startDrag(e) {
if (e.button !== 0 && e.button !== 1) return;
CanvasState.isDragging = true;
CanvasState.startX = e.clientX;
CanvasState.startY = e.clientY;
els.container.style.cursor = 'grabbing';
}
function drag(e) {
if (!CanvasState.isDragging) return;
e.preventDefault();
const dx = e.clientX - CanvasState.startX;
const dy = e.clientY - CanvasState.startY;
CanvasState.panX += dx;
CanvasState.panY += dy;
CanvasState.startX = e.clientX;
CanvasState.startY = e.clientY;
updateTransform();
}
function stopDrag() {
CanvasState.isDragging = false;
if (els.container) els.container.style.cursor = 'grab';
}
window.zoomAction = (direction) => {
if (!els.container || !els.content) return;
const factor = direction === 'in' ? 1.2 : 0.8;
let newScale = CanvasState.scale * factor;
newScale = Math.max(CanvasState.minScale, Math.min(CanvasState.maxScale, newScale));
const rect = els.container.getBoundingClientRect();
const cx = rect.width / 2;
const cy = rect.height / 2;
const scaleRatio = newScale / CanvasState.scale;
CanvasState.panX = cx - (cx - CanvasState.panX) * scaleRatio;
CanvasState.panY = cy - (cy - CanvasState.panY) * scaleRatio;
CanvasState.scale = newScale;
updateTransform();
}
window.resetView = () => { centerContent(); }
function centerContent() {
if (!els.content || !els.container) return;
const containerRect = els.container.getBoundingClientRect();
const unscaledWidth = els.content.scrollWidth;
const unscaledHeight = els.content.scrollHeight;
let initialScale = 1.0;
if (unscaledWidth > containerRect.width) {
initialScale = (containerRect.width / unscaledWidth) * 0.9;
}
initialScale = Math.max(0.5, Math.min(1.0, initialScale));
CanvasState.scale = initialScale;
CanvasState.panX = (containerRect.width - unscaledWidth * initialScale) / 2;
CanvasState.panY = (containerRect.height - unscaledHeight * initialScale) / 2;
CanvasState.panY = Math.max(20, CanvasState.panY);
updateTransform();
}
// --- 3. Init ---
document.addEventListener('DOMContentLoaded', async () => {
// Bind element references
els.container = document.getElementById('canvas-container');
els.content = document.getElementById('canvas-content');
// Init code panel state
updateView();
// Init Playground
if (window.PlaygroundController) PlaygroundController.init();
// Mermaid rendering + center
if (window.mermaid) {
try {
const nodes = document.querySelectorAll('.mermaid');
if (nodes.length > 0) {
await mermaid.run({ nodes: nodes });
setTimeout(centerContent, 100);
}
} catch (e) { console.error("Mermaid render failed", e); }
}
// Canvas Events (Wheel zoom + Drag pan)
if (els.container) {
els.container.addEventListener('wheel', handleWheel, { passive: false });
els.container.addEventListener('mousedown', startDrag);
window.addEventListener('mousemove', drag);
window.addEventListener('mouseup', stopDrag);
}
// KaTeX Auto Render
if (window.renderMathInElement) {
renderMathInElement(document.body, {
delimiters: [
{left: '$$', right: '$$', display: true},
{left: '$', right: '$', display: false},
{left: '\\(', right: '\\)', display: false},
{left: '\\[', right: '\\]', display: true}
],
throwOnError: false
});
}
// TOC ScrollSpy
const tocLinks = document.querySelectorAll('.toc-link');
if (tocLinks.length > 0) {
const headings = document.querySelectorAll('article h2[id], article h3[id]');
const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
tocLinks.forEach(link => link.classList.remove('active'));
const id = entry.target.getAttribute('id');
const activeLink = document.querySelector(`.toc-link[href="#${id}"]`);
if (activeLink) activeLink.classList.add('active');
}
});
}, { rootMargin: '-20% 0px -60% 0px' });
headings.forEach(h => observer.observe(h));
}
// Load Sample button
const loadSampleBtn = document.getElementById('btn-load-sample');
if (loadSampleBtn) {
loadSampleBtn.addEventListener('click', () => {
const sampleData = [];
let price = 100;
for (let i = 0; i < 50; i++) {
price = price + (Math.random() - 0.5) * 5;
sampleData.push(price.toFixed(2));
}
const inputEl = document.getElementById('input-data');
if (inputEl) inputEl.value = sampleData.join(', ');
// Trigger calculation after loading sample
if (window.PlaygroundController) PlaygroundController.update();
});
}
});
</script>
</body>
</html>