<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PositiveVolumeIndex - I ant I Investigates</title>
    <meta name="description" content="PositiveVolumeIndex - Technical Indicator">
    <meta name="keywords" content="PositiveVolumeIndex, technical indicator, stock analysis">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3375094177283762"
         crossorigin="anonymous"></script>
    <!-- Canonical URL -->
    <link rel="canonical" href="https://akuro17.github.io/indicators/positivevolumeindex.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="PositiveVolumeIndex - I ant I Investigates">
    <meta property="og:description" content="PositiveVolumeIndex - Technical Indicator">
    <meta property="og:url" content="https://akuro17.github.io/indicators/positivevolumeindex.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://akuro17.github.io/assets/images/ogp/positivevolumeindex.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PositiveVolumeIndex">
    <meta name="twitter:description" content="PositiveVolumeIndex - Technical Indicator">
    <meta name="twitter:image" content="https://akuro17.github.io/assets/images/ogp/positivevolumeindex.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
        {
    "@context": "https://schema.org",
    "@graph": [
        {
            "@context": "https://schema.org",
            "@type": "TechArticle",
            "headline": "PositiveVolumeIndex Technical Indicator",
            "description": "PVI tracks price changes exclusively on high-volume days, revealing the behavior of the \"crowd\" or retail traders who tend to dominate active trading sessions.",
            "image": "https://akuro17.github.io/assets/images/ogp/positivevolumeindex.png",
            "author": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "url": "https://akuro17.github.io"
            },
            "publisher": {
                "@type": "Organization",
                "name": "I ant I Investigates",
                "logo": {
                    "@type": "ImageObject",
                    "url": "https://akuro17.github.io/assets/images/logo.png"
                }
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://akuro17.github.io/indicators/positivevolumeindex.html"
            },
            "about": {
                "@type": "SoftwareSourceCode",
                "name": "PositiveVolumeIndex Indicator Code",
                "programmingLanguage": [
                    "C#",
                    "Python"
                ]
            }
        },
        {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://akuro17.github.io/"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Indicators",
                    "item": "https://akuro17.github.io/indicators/"
                },
                {
                    "@type": "ListItem",
                    "position": 3,
                    "name": "PositiveVolumeIndex",
                    "item": "https://akuro17.github.io/indicators/positivevolumeindex.html"
                }
            ]
        }
    ]
}
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">PositiveVolumeIndex</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">PositiveVolumeIndex</h1>
                <p class="text-lg text-slate-600 leading-relaxed">PVI tracks price changes exclusively on high-volume days, revealing the behavior of the "crowd" or retail traders who tend to dominate active trading sessions.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive Price + Volume Data"/];
B["Capture Daily Volume Levels"];
C["Identify Active Trading Days"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Compare Volume to Prior Day"];
E["Isolate High-Volume Sessions"];
F["Track Crowd Activity"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
G["Weight Price Change by Volume"];
H["Accumulate Crowd Sentiment"];
I["Build Cumulative Index"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
J["Generate Long-Term Signal Line"];
K["Compare PVI to 255-EMA"];
L["Assess Crowd Sentiment Regime"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
M{"Regime Assessment?"};
N["PVI > EMA = 79% Bull Probability"];
O["PVI < EMA = Crowd Uncertain"];
P["PVI Rising + NVI Falling = Distribution Warning"];
Q[/"Generate Crowd Sentiment Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L --> M;
M -->|Bullish| N;
M -->|Uncertain| O;
M -->|Distribution| P;
N --> Q;
O --> Q;
P --> Q;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/PositiveVolumeIndex.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="positive-volume-index-pvi">Positive Volume Index (PVI)</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Positive Volume Index  </p>
<p class="mb-4">Abbreviation: PVI  </p>
<p class="mb-4">Category: Volume / Crowd Sentiment  </p>
<p class="mb-4">Creator: Paul Dysart (1936), Refined by Norman Fosback (1976)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: PVI tracks price changes exclusively on high-volume days, revealing the behavior of the "crowd" or retail traders who tend to dominate active trading sessions.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<p class="mb-4">$$PVI_t = \begin{cases} PVI_{t-1} + \left( \frac{Close_t - Close_{t-1}}{Close_{t-1}} \times PVI_{t-1} \right) & \text{if } Volume_t > Volume_{t-1} \\ PVI_{t-1} & \text{if } Volume_t \leq Volume_{t-1} \end{cases}$$</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Step</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">1</td><td class="px-4 py-2 border-b border-[#2a2e39]">Initialize</td><td class="px-4 py-2 border-b border-[#2a2e39]">$PVI_0 = 1000$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Arbitrary starting point for comparison</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">2</td><td class="px-4 py-2 border-b border-[#2a2e39]">If $Volume_t > Volume_{t-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Calculate ROC and update PVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd activity day</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">3</td><td class="px-4 py-2 border-b border-[#2a2e39]">If $Volume_t \leq Volume_{t-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI remains unchanged</td><td class="px-4 py-2 border-b border-[#2a2e39]">Quiet day (ignored)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">4</td><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">$EMA_{255}(PVI)$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Long-term trend of crowd sentiment</td></tr>
</table></div>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of PVI like a concert attendance tracker on loud nights. When the venue is packed and noisy (high volume), you're capturing the energy of the general public—their enthusiasm or panic. PVI tells you what happens when the crowd shows up. If prices rise on these loud nights, the crowd is buying; if prices fall, the crowd is selling.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<h3 id="default-parameters">Default Parameters</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Standard Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rationale</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Initial Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">1000</td><td class="px-4 py-2 border-b border-[#2a2e39]">Arbitrary baseline for easy comparison</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">255-day EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">One trading year; matches NVI for comparison</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bull Probability</td><td class="px-4 py-2 border-b border-[#2a2e39]">79% when PVI > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fosback's statistical finding</td></tr>
</table></div>

<h3 id="timeframe-recommendations">Timeframe Recommendations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trading Style</td><td class="px-4 py-2 border-b border-[#2a2e39]">Timeframe</td><td class="px-4 py-2 border-b border-[#2a2e39]">Notes</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Position Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Daily</td><td class="px-4 py-2 border-b border-[#2a2e39]">Primary use case for PVI</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Long-Term Investing</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weekly</td><td class="px-4 py-2 border-b border-[#2a2e39]">Captures multi-month sentiment cycles</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Day Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Not Recommended</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI is too slow for intraday use</td></tr>
</table></div>

<h3 id="why-255-day-ema">Why 255-Day EMA?</h3>

<p class="mb-4">Consistency with NVI allows direct comparison of smart money vs. crowd behavior. Fosback found the one-year average effectively filtered out seasonal noise while capturing meaningful shifts in crowd sentiment.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<h3 id="best-conditions">Best Conditions</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Why It Works</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Late-Stage Bull Confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd participation validates sustainability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Distribution Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Rising PVI + Falling NVI = Pros selling to retail</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Trend Sustainability Check</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bulls need crowd participation eventually</td></tr>
</table></div>

<h3 id="limitations">Limitations</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Problem</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Early Trend Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI lags; crowd arrives late</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bear Market Precision</td><td class="px-4 py-2 border-b border-[#2a2e39]">67% bear probability (less reliable than NVI bull)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">News-Driven Spikes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single event volume distorts readings</td></tr>
</table></div>

<h3 id="asset-class-suitability">Asset Class Suitability</h3>

<p class="mb-4">- Market Indices — Ideal for broad crowd sentiment measurement</p>
<p class="mb-4">- Large-Cap Equities — Works on stocks with retail interest</p>
<p class="mb-4">- Small-Caps — More retail-driven anyway; signal less meaningful</p>
<p class="mb-4">- Forex — No centralized volume; not applicable</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Golden Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI crosses above 255-EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate (79%)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Dead Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI crosses below 255-EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate (67%)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rising PVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI slope positive</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd Buying</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">NVI/PVI Convergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Both above their EMAs</td><td class="px-4 py-2 border-b border-[#2a2e39]">Full Participation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
</table></div>

<h3 id="primary-buy-signal">Primary Buy Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF PVI &gt; EMA(PVI, 255)
AND NVI &gt; EMA(NVI, 255)
THEN → &quot;FULL PARTICIPATION BULL&quot; (Maximum confidence)
</code></pre>

<h3 id="primary-caution/exit-signal">Primary Caution/Exit Signal</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF NVI &lt; EMA(NVI, 255)      // Smart money exiting
AND PVI &gt; EMA(PVI, 255)     // But crowd still buying
THEN → &quot;DISTRIBUTION PHASE&quot; (Major warning)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<p class="mb-4">PVI is best used as a confirmation and sustainability filter, not a primary signal generator. It answers: "Is the crowd supporting this move?"</p>

<h3 id="filter-rules">Filter Rules</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Rule</td><td class="px-4 py-2 border-b border-[#2a2e39]">Application</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>PVI > 255-EMA</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd is bullish; rallies have fuel</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>PVI < 255-EMA</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd is disinterested or bearish</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>PVI rising + NVI falling</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Dangerous distribution pattern</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]"><code>PVI + NVI both rising</code></td><td class="px-4 py-2 border-b border-[#2a2e39]">Healthiest bull market condition</td></tr>
</table></div>

<h3 id="recommended-pairings">Recommended Pairings</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy Logic</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">NVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Essential pairing—smart money vs. crowd comparison</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI confirms crowd sentiment; OBV for divergence</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Breadth Indicators</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI + Advance/Decline for market health</td></tr>
</table></div>

<h3 id="example-combined-strategy">Example Combined Strategy</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
REGIME MATRIX:
&nbsp;&nbsp;NVI &gt; EMA(255) + PVI &gt; EMA(255) = &quot;Full Bull&quot; → 100% Long
&nbsp;&nbsp;NVI &gt; EMA(255) + PVI &lt; EMA(255) = &quot;Early Bull&quot; → 75% Long
&nbsp;&nbsp;NVI &lt; EMA(255) + PVI &gt; EMA(255) = &quot;Distribution&quot; → EXIT LONGS
&nbsp;&nbsp;NVI &lt; EMA(255) + PVI &lt; EMA(255) = &quot;Bear&quot; → 0% Long
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<h3 id="lag-characteristics">Lag Characteristics</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximate Lag</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">First Valid PVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">2 bars</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Line (255-EMA)</td><td class="px-4 py-2 border-b border-[#2a2e39]">~255 bars for accuracy</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Regime Change Detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weeks to months</td></tr>
</table></div>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Reality Check: PVI tracks the crowd, and the crowd is late. By the time PVI confirms a bull market, smart money (NVI) has already been in for months.</blockquote>

<h3 id="false-signal-scenarios">False Signal Scenarios</h3>

<p class="mb-4">1. The "Greater Fool" Trap  </p>
<p class="mb-4">   PVI rising when NVI is falling is the classic distribution pattern. The rally looks strong but lacks professional backing.</p>

<p class="mb-4">2. Earnings Volume Distortion  </p>
<p class="mb-4">   Massive earnings-day volume creates outsized PVI moves that don't reflect true crowd sentiment.</p>

<p class="mb-4">3. Index Rebalancing  </p>
<p class="mb-4">   ETF rebalancing creates artificial high-volume days skewing PVI.</p>

<h3 id="mitigation-strategies">Mitigation Strategies</h3>

<p class="mb-4">- Always Cross-Reference with NVI: PVI in isolation is dangerous</p>
<p class="mb-4">- Ignore Single-Day Spikes: Focus on multi-week trends</p>
<p class="mb-4">- Use Monthly Checks: Too frequent monitoring leads to overtrading</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<h3 id="the-"distribution"-death-pattern">The "Distribution" Death Pattern</h3>

<p class="mb-4">The single most valuable PVI pattern: NVI falling below its EMA while PVI remains above. This means:</p>
<p class="mb-4">- Smart money is exiting</p>
<p class="mb-4">- Retail traders are still buying enthusiastically</p>
<p class="mb-4">- Professionals are selling their positions to the crowd</p>

<p class="mb-4">This pattern often precedes major market tops by 1-3 months.</p>

<h3 id="the-confirmation-lag-advantage">The Confirmation Lag Advantage</h3>

<p class="mb-4">PVI's lag is actually a feature, not a bug. A sustained bull market *needs* eventually the crowd to participate. If NVI has been bullish for months but PVI finally confirms, the trend has legs. A rally that never gets PVI confirmation is a "liquidity trap" waiting to collapse.</p>

<h3 id="nvi/pvi-regime-matrix">NVI/PVI Regime Matrix</h3>

<p class="mb-4">Track both indicators monthly and classify market regimes:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Regime</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI State</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Full Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Above EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Above EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">90%+ bull probability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Early Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Above EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Below EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Smart money in, crowd skeptical</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Distribution</td><td class="px-4 py-2 border-b border-[#2a2e39]">Below EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Above EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">DANGER: Pros exiting</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Full Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Below EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Below EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">70%+ bear probability</td></tr>
</table></div>

<h3 id="sector-application">Sector Application</h3>

<p class="mb-4">Apply NVI/PVI to sector ETFs to identify:</p>
<p class="mb-4">- Which sectors smart money is accumulating (NVI > EMA)</p>
<p class="mb-4">- Which sectors retail is chasing (PVI > EMA, NVI < EMA)</p>
<p class="mb-4">- Avoid sectors where only crowd is buying</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"PVI is your crowd meter—when combined with NVI, it reveals whether market rallies are backed by both professionals and the public, or dangerously propped up by retail traders buying from exiting smart money."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">PVI answers the question: "What is the general public doing?"</p>

<p class="mb-4">It's the mirror image of NVI. While NVI tracks quiet days (smart money), PVI tracks loud days (crowd activity). On high-volume days, retail investors, day traders, and emotional participants dominate trading. By isolating these days, PVI captures crowd sentiment.</p>

<p class="mb-4">The calculation only updates when today's volume is *higher* than yesterday's:</p>
<p class="mb-4">- Volume Up Day + Price Up = Crowd is buying enthusiastically (PVI rises)</p>
<p class="mb-4">- Volume Up Day + Price Down = Crowd is panic selling (PVI falls)</p>
<p class="mb-4">- Volume Down Day = PVI ignores it (smart money day)</p>

<p class="mb-4">The crowd is usually right during the *middle* of trends but wrong at *turning points*. This makes PVI a great confirmation tool but a poor prediction tool.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<h3 id="backtest-evidence">Backtest Evidence</h3>

<p class="mb-4">Norman Fosback's research (1976) established:</p>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI State</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull Market Probability</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear Market Probability</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Above 255-EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">79%</td><td class="px-4 py-2 border-b border-[#2a2e39]">21%</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Below 255-EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">33%</td><td class="px-4 py-2 border-b border-[#2a2e39]">67%</td></tr>
</table></div>

<h3 id="why-it-works">Why It Works</h3>

<p class="mb-4">The edge comes from trend persistence. When the crowd finally joins a trend (PVI rises), it often adds fuel that extends the move. However, because crowd participation is a lagging phenomenon, PVI above EMA often occurs mid-trend rather than at the start.</p>

<h3 id="academic-reference">Academic Reference</h3>

<p class="mb-4">Fosback's *Stock Market Logic* (1976) documented PVI alongside NVI. His statistical validation showed that while PVI is less reliable than NVI for regime identification, the *combination* of both provides superior market timing.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-actionable-strategy">3. Actionable Strategy</h2>

<h3 id="strategy-name:-"full-participation-filter"">Strategy Name: "Full Participation Filter"</h3>

<p class="mb-4">Concept: Authorize maximum equity exposure only when both smart money and crowd confirm.</p>

<p class="mb-4">Setup Requirements:</p>
<p class="mb-4">1. NVI > EMA(NVI, 255) — Smart money bullish</p>
<p class="mb-4">2. PVI > EMA(PVI, 255) — Crowd also bullish</p>
<p class="mb-4">3. Both have been rising for 10+ days</p>

<p class="mb-4">Allocation:</p>
<p class="mb-4">- All three conditions met: 100% equity</p>
<p class="mb-4">- Only NVI > EMA: 70% equity (early bull)</p>
<p class="mb-4">- Only PVI > EMA: 30% equity (distribution risk)</p>
<p class="mb-4">- Neither: 0-20% equity (bear risk)</p>

<p class="mb-4">Monthly Review:</p>
<p class="mb-4">- Check conditions on first trading day each month</p>
<p class="mb-4">- Adjust allocation only when regime changes</p>

<p class="mb-4">Example:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
Monthly Check:
&nbsp;&nbsp;NVI = 1180, EMA(255) = 1120 → NVI &gt; EMA ✓
&nbsp;&nbsp;PVI = 1095, EMA(255) = 1100 → PVI &lt; EMA ✗
&nbsp;&nbsp;
Regime: &quot;Early Bull&quot; → 70% Equity Allocation
Note: Smart money is in, but crowd hasn&#x27;t confirmed yet
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<h3 id="failure-patterns">Failure Patterns</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Pattern</td><td class="px-4 py-2 border-b border-[#2a2e39]">Description</td><td class="px-4 py-2 border-b border-[#2a2e39]">Mitigation</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd is Late</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI confirms after major move done</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use NVI for early signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Distribution Blindness</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI rising doesn't mean safe</td><td class="px-4 py-2 border-b border-[#2a2e39]">Always check NVI simultaneously</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Volume Spikes</td><td class="px-4 py-2 border-b border-[#2a2e39]">Single events distort readings</td><td class="px-4 py-2 border-b border-[#2a2e39]">Use weekly data for smoother signals</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Emotional Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd action is erratic</td><td class="px-4 py-2 border-b border-[#2a2e39]">Focus on multi-week trends</td></tr>
</table></div>

<h3 id="psychological-traps">Psychological Traps</h3>

<p class="mb-4">1. The "Everyone's Buying" Trap  </p>
<p class="mb-4">   Rising PVI feels safe because the crowd agrees. But if NVI is falling, you're the greater fool.</p>

<p class="mb-4">2. Ignoring Distribution  </p>
<p class="mb-4">   PVI > EMA with NVI < EMA is the most dangerous state. Don't be comforted by crowd enthusiasm.</p>

<p class="mb-4">3. Expecting Precision  </p>
<p class="mb-4">   PVI is a blunt tool. Don't expect tactical timing—it's for strategic allocation.</p>

<h3 id="common-misinterpretations">Common Misinterpretations</h3>

<p class="mb-4">- "High PVI means the market is strong" → Only relative to EMA matters</p>
<p class="mb-4">- "PVI confirms smart money" → PVI tracks crowd, not pros (that's NVI)</p>
<p class="mb-4">- "PVI bearish = short" → Only 67% accuracy; insufficient for directional bets</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-further-study">5. Further Study</h2>

<h3 id="creator-attribution">Creator Attribution</h3>

<p class="mb-4">Paul Dysart created the original concept in the 1930s, tracking price behavior on different volume conditions. Norman Fosback modernized PVI in *Stock Market Logic* (1976), adding the percentage-change formula and the 255-day EMA signal line. Fosback's statistical validation remains the definitive reference.</p>

<h3 id="parent/child-indicators">Parent/Child Indicators</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Indicator</td><td class="px-4 py-2 border-b border-[#2a2e39]">Relationship</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">NVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Sibling — The essential counterpart tracking smart money</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — Cumulative volume without crowd distinction</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd Sentiment</td><td class="px-4 py-2 border-b border-[#2a2e39]">Related — PVI is a proxy for crowd behavior</td></tr>
</table></div>

<h3 id="recommended-readings">Recommended Readings</h3>

<p class="mb-4">1. *Stock Market Logic* — Norman Fosback</p>
<p class="mb-4">2. *Technical Analysis Explained* — Martin Pring</p>
<p class="mb-4">3. *The Complete Guide to Market Breadth Indicators* — Gregory Morris</p>

<hr class="border-[#2a2e39] my-8">

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">PVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">OBV</td><td class="px-4 py-2 border-b border-[#2a2e39]">Chaikin A/D</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Focus</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd (high vol)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Smart money (low vol)</td><td class="px-4 py-2 border-b border-[#2a2e39]">All volume</td><td class="px-4 py-2 border-b border-[#2a2e39]">Range-weighted</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Updates</td><td class="px-4 py-2 border-b border-[#2a2e39]">High-volume days</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low-volume days</td><td class="px-4 py-2 border-b border-[#2a2e39]">Every day</td><td class="px-4 py-2 border-b border-[#2a2e39]">Every day</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Line</td><td class="px-4 py-2 border-b border-[#2a2e39]">255-day EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">255-day EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Optional MA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Optional MA</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Crowd confirmation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bull regime ID</td><td class="px-4 py-2 border-b border-[#2a2e39]">Divergence</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Bull Probability</td><td class="px-4 py-2 border-b border-[#2a2e39]">79%</td><td class="px-4 py-2 border-b border-[#2a2e39]">96%</td><td class="px-4 py-2 border-b border-[#2a2e39]">Variable</td><td class="px-4 py-2 border-b border-[#2a2e39]">Variable</td></tr>
</table></div>

<p class="mb-4">When to Use Which:</p>
<p class="mb-4">- PVI — Confirm crowd participation; detect distribution patterns</p>
<p class="mb-4">- NVI — Primary regime identification with 96% accuracy</p>
<p class="mb-4">- OBV — Tactical divergence and breakout confirmation</p>
<p class="mb-4">- Together — NVI + PVI matrix for complete market picture</p>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h2 id="advanced-signal-reference">Advanced Signal Reference</h2>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI vs EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Combined with NVI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Market Regime</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Full Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Maximum long exposure</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI < EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Distribution</td><td class="px-4 py-2 border-b border-[#2a2e39]">EXIT immediately</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI < EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Early Bull</td><td class="px-4 py-2 border-b border-[#2a2e39]">Accumulate, patient</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">PVI < EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">NVI < EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bear</td><td class="px-4 py-2 border-b border-[#2a2e39]">Defensive positioning</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="distribution-warning">Distribution Warning</h4>
<p class="mb-4">This is the most dangerous market pattern: smart money exiting (NVI below EMA) while the crowd remains enthusiastic (PVI above EMA). The "greater fool" dynamic is active—institutions are selling to retail traders at the top. This divergence historically precedes major market tops by 1-3 months and warrants immediate risk reduction.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def distribution_warning(nvi, pvi, nvi_ema, pvi_ema):
&nbsp;&nbsp;&nbsp;&nbsp;smart_money_exit = nvi &lt; nvi_ema
&nbsp;&nbsp;&nbsp;&nbsp;crowd_buying = pvi &gt; pvi_ema
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return smart_money_exit and crowd_buying  # DANGER
</code></pre>

<h4 id="full-participation-confirmation">Full Participation Confirmation</h4>
<p class="mb-4">The healthiest bull market occurs when both smart money and the crowd are aligned and actively buying. Full participation with rising values indicates sustained institutional and retail conviction. This condition authorizes maximum long exposure with 90%+ bull market probability.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def full_participation(nvi, pvi, nvi_ema, pvi_ema):
&nbsp;&nbsp;&nbsp;&nbsp;smart_money_in = nvi &gt; nvi_ema
&nbsp;&nbsp;&nbsp;&nbsp;crowd_in = pvi &gt; pvi_ema
&nbsp;&nbsp;&nbsp;&nbsp;both_rising = (nvi &gt; nvi_prev) and (pvi &gt; pvi_prev)
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return smart_money_in and crowd_in and both_rising
</code></pre>

<h4 id="late-bull-detection">Late Bull Detection</h4>
<p class="mb-4">This pattern identifies when the crowd finally confirms a bull market that smart money identified earlier. PVI crossing above its EMA after NVI has been bullish for an extended period signals the trend now has full participation and legs. Late bull detection is a trend continuation signal rather than a new entry opportunity.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def late_bull_detection(nvi, pvi, nvi_ema, pvi_ema):
&nbsp;&nbsp;&nbsp;&nbsp;nvi_bullish_long = nvi &gt; nvi_ema  # For extended period
&nbsp;&nbsp;&nbsp;&nbsp;pvi_just_crossing = pvi &gt; pvi_ema and pvi_prev &lt; pvi_ema_prev
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return nvi_bullish_long and pvi_just_crossing
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<h4 id="full-participation-market-scan">Full Participation Market Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
NVI &gt; EMA(NVI, 255)
AND PVI &gt; EMA(PVI, 255)
AND Close &gt; SMA(Close, 200)
</code></pre>

<h4 id="distribution-warning-scan">Distribution Warning Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
NVI &lt; EMA(NVI, 255)
AND PVI &gt; EMA(PVI, 255)
AND Volume[20-day avg] &gt; Volume[50-day avg]
</code></pre>

<h4 id="crowd-capitulation-scan">Crowd Capitulation Scan</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
PVI &lt; EMA(PVI, 255)
AND PVI &lt; PVI[20]
AND NVI &gt; EMA(NVI, 255)
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<h4 id="nvi/pvi-regime-strategy">NVI/PVI Regime Strategy</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
MONTHLY REBALANCE:

IF NVI &gt; EMA(255) AND PVI &gt; EMA(255):
&nbsp;&nbsp;ALLOCATION: 100% Equity
&nbsp;&nbsp;STATUS: &quot;Full Bull - All In&quot;

IF NVI &gt; EMA(255) AND PVI &lt; EMA(255):
&nbsp;&nbsp;ALLOCATION: 75% Equity  
&nbsp;&nbsp;STATUS: &quot;Early Bull - Accumulating&quot;

IF NVI &lt; EMA(255) AND PVI &gt; EMA(255):
&nbsp;&nbsp;ALLOCATION: 30% Equity
&nbsp;&nbsp;STATUS: &quot;DISTRIBUTION - Exit Longs&quot;

IF NVI &lt; EMA(255) AND PVI &lt; EMA(255):
&nbsp;&nbsp;ALLOCATION: 10% Equity
&nbsp;&nbsp;STATUS: &quot;Bear - Defensive&quot;
</code></pre>

<h4 id="the-"greater-fool"-warning-system">The "Greater Fool" Warning System</h4>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
ALERT IF:
&nbsp;&nbsp;PVI rising for 20+ days
&nbsp;&nbsp;AND NVI falling for 10+ days
&nbsp;&nbsp;AND Price at 52-week high
&nbsp;&nbsp;
ACTION: Immediate risk reduction regardless of other signals
REASON: Smart money is selling to crowd at extreme prices
</code></pre>





                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#default-parameters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Default Parameters</a>
<a href="#timeframe-recommendations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Timeframe Recommendations</a>
<a href="#why-255-day-ema" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why 255-Day EMA?</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#best-conditions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Best Conditions</a>
<a href="#limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Limitations</a>
<a href="#asset-class-suitability" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Asset Class Suitability</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal</a>
<a href="#primary-caution/exit-signal" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Caution/Exit Signal</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rules" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rules</a>
<a href="#recommended-pairings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Pairings</a>
<a href="#example-combined-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Example Combined Strategy</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#lag-characteristics" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Lag Characteristics</a>
<a href="#false-signal-scenarios" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">False Signal Scenarios</a>
<a href="#mitigation-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Mitigation Strategies</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#the-"distribution"-death-pattern" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The "Distribution" Death Pattern</a>
<a href="#the-confirmation-lag-advantage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">The Confirmation Lag Advantage</a>
<a href="#nvi/pvi-regime-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">NVI/PVI Regime Matrix</a>
<a href="#sector-application" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Sector Application</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#backtest-evidence" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Backtest Evidence</a>
<a href="#why-it-works" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Why It Works</a>
<a href="#academic-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Academic Reference</a>
<a href="#3-actionable-strategy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy</a>
<a href="#strategy-name:-"full-participation-filter"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Strategy Name: "Full Participation Filter"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#failure-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Failure Patterns</a>
<a href="#psychological-traps" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Psychological Traps</a>
<a href="#common-misinterpretations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Common Misinterpretations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#creator-attribution" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Creator Attribution</a>
<a href="#parent/child-indicators" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Parent/Child Indicators</a>
<a href="#recommended-readings" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Recommended Readings</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#advanced-signal-reference" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">Advanced Signal Reference</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2026 I ant I Investigates
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "PositiveVolumeIndex",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = PositiveVolumeIndex.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/PositiveVolumeIndex.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "PositiveVolumeIndex", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 14;
                const result = PositiveVolumeIndex.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>