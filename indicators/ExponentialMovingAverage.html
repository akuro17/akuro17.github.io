<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExponentialMovingAverage - I ant I Investigates</title>
    <meta name="description" content="ExponentialMovingAverage - Technical Indicator">
    <meta name="keywords" content="ExponentialMovingAverage, technical indicator, stock analysis">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://iantinvestigates.com/indicators/exponentialmovingaverage.html">
    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="ExponentialMovingAverage - I ant I Investigates">
    <meta property="og:description" content="ExponentialMovingAverage - Technical Indicator">
    <meta property="og:url" content="https://iantinvestigates.com/indicators/exponentialmovingaverage.html">
    <meta property="og:site_name" content="I ant I Investigates">
    <meta property="og:image" content="https://iantinvestigates.com/assets/images/ogp/exponentialmovingaverage.png">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ExponentialMovingAverage">
    <meta name="twitter:description" content="ExponentialMovingAverage - Technical Indicator">
    <meta name="twitter:image" content="https://iantinvestigates.com/assets/images/ogp/exponentialmovingaverage.png">
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    </script>
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/indicator.css">
    <!-- KaTeX (Math) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Libraries (defer for non-blocking load) -->
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <!-- Pygments Syntax Highlighting (Externalized) -->
    <link rel="stylesheet" href="../assets/css/pygments.css">

</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased relative">
        <!-- Navigation -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center mr-6">
                        <a href="../index.html" class="font-bold text-xl text-indigo-600">
                            I ant I Investigates
                        </a>
                    </div>
                    <!-- Breadcrumbs (Moved Here) -->
                    <nav class="flex text-sm text-slate-500 mr-8" aria-label="Breadcrumb">
                        <ol class="flex items-center space-x-2">
                            <li><a href="../index.html" class="hover:text-indigo-600 transition-colors">home</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><a href="./" class="hover:text-indigo-600 transition-colors">indicators</a></li>
                            <li><span class="mx-1">/</span></li>
                            <li><span class="font-medium text-slate-900">ExponentialMovingAverage</span></li>
                        </ol>
                    </nav>

                    <!-- Page Top Nav (Anchor Links) -->
                    <div class="flex space-x-4 items-center">
                        <a href="#interactive-playground" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Chart
                        </a>
                        <a href="#logic-visualization" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Logic
                        </a>
                        <a href="#documentation" class="text-slate-600 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">
                            Docs
                        </a>
                    </div>
                </div>
                <!-- External Links Placeholder -->
                <div class="hidden sm:flex items-center">
                </div>
            </div>
        </div>
    </nav>
    <!-- Main Container: 1-Column Stack -->
    <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">
        <!-- ======================================================= -->
        <!-- TOP SECTION: CONTEXT & PLAYGROUND                       -->
        <!-- ======================================================= -->
        <div class="flex flex-col gap-6">
            <!-- Hero Header -->
            <header>
                <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4 leading-tight">ExponentialMovingAverage</h1>
                <p class="text-lg text-slate-600 leading-relaxed">The Exponential Moving Average is a weighted moving average that places exponentially greater emphasis on recent prices, enabling earlier detection of trend changes compared to the Simple Moving Average.</p>
            </header>

            <!-- Interactive Playground -->
            <section id="interactive-playground" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
                <div class="border-b border-slate-200 bg-indigo-50 px-6 py-4">
                    <h2 class="text-lg font-bold text-slate-800 flex items-center">
                        <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">C</span>
                        Calculator
                    </h2>
                    <p class="text-sm text-slate-600 mt-2">Calculate indicator values from your price data.</p>
                </div>
                <div class="p-6">
                    <!-- Chart Area -->
                    <div class="relative h-[400px] w-full mb-6 border border-slate-100 rounded bg-slate-50">
                        <canvas id="indicatorChart"></canvas>
                    </div>

                    <!-- Controls Area -->
                    <div id="controls" class="grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-4 rounded border border-slate-200">
                        <!-- Parameters -->
                        <div class="md:col-span-1 space-y-4">
                            <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide border-b border-slate-200 pb-2">Parameters</h3>
                            <div id="settings-container">
                                <div class="space-y-3">
                                    <!-- Dynamic settings will be injected here -->
                                </div>
                            </div>
                            <button id="btn-run" onclick="PlaygroundController.update()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors shadow-sm flex items-center justify-center">
                                Calculate
                            </button>
                        </div>

                        <!-- Data I/O -->
                        <div class="md:col-span-2 space-y-4">
                            <!-- Input -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Input Data (CSV)</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-load-sample-ohlcv" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load OHLCV Sample Data">Shape (OHLCV)</button>
                                        <span class="text-slate-300">|</span>
                                        <button id="btn-load-sample-single" class="text-xs text-indigo-600 hover:text-indigo-800 hover:underline transition-colors" title="Load Single Value Sample Data">Single</button>
                                    </div>
                                </div>
                                <p class="text-xs text-slate-500">Enter CSV data (Date,Open,High,Low,Close,Volume) or single values.</p>
                                <textarea id="input-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 transition-shadow" placeholder="e.g. 100.5, 101.2, 99.8, 102.3, 103.1...

or one per line:
100.5
101.2
99.8"></textarea>
                            </div>
                            <!-- Output (Enabled) -->
                            <div class="space-y-2">
                                <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                                    <h3 class="font-bold text-sm text-slate-700 uppercase tracking-wide">Output Data (Result)</h3>
                                </div>
                                <textarea id="output-data" class="w-full h-24 p-2 text-xs font-mono border border-slate-300 rounded bg-slate-100 text-slate-600" readonly placeholder="Calculation results will appear here..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================================= -->
        <!-- MIDDLE SECTION: LOGIC & ARCHITECTURE (PORTED FROM 0117) -->
        <!-- ======================================================= -->
        <section id="logic-visualization" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Section Header (Styled like Playground) -->
            <div class="border-b border-slate-200 bg-emerald-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-800 flex items-center">
                    <span class="bg-emerald-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">L</span>
                    Logic & Code Architecture
                </h2>
                <p class="text-sm text-slate-600 mt-2">Visual flowchart showing how the indicator processes data.</p>
            </div>

            <!-- LOGIC FIGURE STRUCTURE -->
            <figure class="logic-figure" style="border: none; border-radius: 0;">
                <!-- 1. Code Panel Toggle Button -->
                <button id="code-panel-toggle-btn" onclick="toggleCodePanel()" title="View Source Code" class="font-bold text-xs">
                    CODE
                </button>

                <!-- 2. Infinite Canvas Layer -->
                <div id="canvas-container" class="chart-scroll-wrapper" 
                     tabindex="0"
                     role="application"
                     aria-label="Flowchart interaction area. Use arrow keys to pan, +/- to zoom, R to reset">
                    <div id="canvas-content" class="mermaid" style="position: absolute; top:0; left:0;">
                        flowchart TD;
subgraph INGESTION["Phase 1: Ingestion"];
A[/"Receive Price Data Stream"/];
B["Collect Closing Prices"];
C["Define Smoothing Period"];
end;
subgraph EVALUATION["Phase 2: Evaluation"];
D["Establish Initial Baseline via SMA"];
E["Determine Recency Importance"];
end;
subgraph WEIGHTING["Phase 3: Weighting"];
F["Calculate Exponential Smoothing Factor"];
G["Prioritize Recent Price Action"];
H["Diminish Historical Weight Exponentially"];
end;
subgraph SYNTHESIS["Phase 4: Synthesis"];
I["Blend Current Price with Prior Consensus"];
J["Generate Responsive Trend Line"];
K["Update Running Average Recursively"];
end;
subgraph OUTCOME["Phase 5: Outcome"];
L{"Trend Assessment?"};
M["Price Above EMA = Bullish Bias"];
N["Price Below EMA = Bearish Bias"];
O["EMA Crossovers = Trend Change"];
P[/"Generate Trend Direction Signal"/];
end;
A --> B;
B --> C;
C --> D;
D --> E;
E --> F;
F --> G;
G --> H;
H --> I;
I --> J;
J --> K;
K --> L;
L -->|Uptrend| M;
L -->|Downtrend| N;
L -->|Crossover| O;
M --> P;
N --> P;
O --> P;
style INGESTION fill:#e3f2fd;
style EVALUATION fill:#fff3e0;
style WEIGHTING fill:#e8f5e9;
style SYNTHESIS fill:#fce4ec;
style OUTCOME fill:#f3e5f5;
                    </div>
                </div>

                <!-- 3. Canvas Controls (Zoom) -->
                <div class="absolute top-4 right-4 flex flex-col gap-2 z-20">
                    <button onclick="if(window.resetView) window.resetView()" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Reset View">R</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('in')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom In">+</button>
                    <button onclick="if(window.zoomAction) window.zoomAction('out')" class="p-2 bg-white rounded shadow border border-slate-200 hover:bg-slate-50 text-slate-600 font-mono text-xs" title="Zoom Out">-</button>
                </div>

                <!-- 4. Code Panel Overlay (Slide-in) -->
                <div id="code-panel-overlay" class="panel-hidden" onmousedown="event.stopPropagation();">
                    <!-- Header -->
                    <div class="flex justify-between items-center p-3 border-b border-slate-200 bg-slate-50 shrink-0">
                        <div class="flex gap-2">
                            <button id="btn-lang-csharp" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('csharp')">C#</button>
                            <button id="btn-lang-python" class="px-2 py-1 text-xs rounded transition-colors text-slate-500 hover:bg-slate-100" onclick="setLang('python')">Python</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <button id="btn-type-simple" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('simple')">Simple</button>
                            <button id="btn-type-detailed" class="text-xs text-slate-500 hover:text-indigo-600 transition-colors" onclick="setType('detailed')">Detailed</button>
                            <!-- Copy -->
                            <button id="btn-copy-code" class="ml-2 text-slate-500 hover:text-slate-800 transition-colors" onclick="copyCode()" title="Copy Code">
                                <svg id="icon-copy" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <svg id="icon-copy-done" class="hidden text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                            <!-- Expand/Collapse -->
                            <button id="btn-panel-expand" class="text-slate-500 hover:text-slate-800 transition-colors" onclick="toggleExpand()" title="Toggle Width">
                                <svg id="icon-expand" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h6v6" /><path d="M9 21H3v-6" /><path d="M21 3l-7 7" /><path d="M3 21l7-7" />
                                </svg>
                                <svg id="icon-collapse" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 14h6v6" /><path d="M20 10h-6V4" /><path d="M14 10l7-7" /><path d="M10 14l-7 7" />
                                </svg>
                            </button>
                            <!-- Close -->
                            <button class="text-slate-500 hover:text-red-600 transition-colors" onclick="toggleCodePanel()" title="Close Panel">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <!-- Body -->
                    <div class="code-panel-body custom-scrollbar p-4" 
                         id="code-panel-body"
                         data-code-src="../data/codes/ExponentialMovingAverage.js">
                        <!-- Loading indicator -->
                        <div id="code-loading" class="hidden absolute inset-0 flex items-center justify-center bg-white/80 z-10">
                            <span class="text-slate-400 text-sm">Loading code...</span>
                        </div>
                        <!-- Code containers (populated via JS fetch) -->
                        <div id="code-csharp-simple" class="code-content hidden"></div>
                        <div id="code-csharp-detailed" class="code-content hidden"></div>
                        <div id="code-python-simple" class="code-content hidden"></div>
                        <div id="code-python-detailed" class="code-content hidden"></div>
                    </div>
                </div>
            </figure>

            <!-- Legend (5-Step Model) -->
            <div class="logic-legend">
                <div class="legend-item"><span class="legend-dot l-ingestion"></span>Ingestion</div>
                <div class="legend-item"><span class="legend-dot l-evaluation"></span>Evaluation</div>
                <div class="legend-item"><span class="legend-dot l-weighting"></span>Weighting</div>
                <div class="legend-item"><span class="legend-dot l-synthesis"></span>Synthesis</div>
                <div class="legend-item"><span class="legend-dot l-outcome"></span>Outcome</div>
                <div class="text-xs text-slate-500 ml-auto">Keyboard: Arrows(pan) / +-(zoom) / R(reset)</div>
            </div>
        </section>

        <!-- ======================================================= -->
        <!-- BOTTOM SECTION: DOCS & TOC                              -->
        <!-- ======================================================= -->
        <section id="documentation" class="bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden scroll-mt-24">
            <!-- Documentation Header -->
            <div class="border-b border-orange-200 bg-orange-50 px-6 py-4">
                <h2 class="text-lg font-bold text-slate-900 flex items-center">
                    <span class="bg-indigo-600 text-white p-1 rounded mr-3 text-xs shadow-sm font-mono">D</span>
                    Technical Documentation
                </h2>
                <p class="text-slate-600 text-xs mt-1 ml-9">
                    Detailed technical explanation of the indicator's logic, math, and implementation details.
                </p>
            </div>
            <!-- Content Body -->
            <div class="p-6 flex flex-col lg:flex-row gap-12">
                <!-- Left: Article -->
                <article class="flex-1 min-w-0">
                    <div class="prose prose-slate max-w-none prose-headings:scroll-mt-24 prose-headings:font-bold prose-h2:text-2xl prose-h2:border-b prose-h2:pb-2 prose-h2:mt-8 prose-a:text-indigo-600 hover:prose-a:text-indigo-800">
                        <h1 id="exponential-moving-average">Exponential Moving Average</h1>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 1: MAIN GUIDE</h2></p>

<h2 id="1-identity">1. Identity</h2>

<p class="mb-4">Full Name: Exponential Moving Average  </p>
<p class="mb-4">Abbreviation: EMA  </p>
<p class="mb-4">Category: Trend Following / Smoothing  </p>
<p class="mb-4">Creator: Pete Haurlan (Popularizer in Finance, 1960s)  </p>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">One-Sentence Definition: The Exponential Moving Average is a weighted moving average that places exponentially greater emphasis on recent prices, enabling earlier detection of trend changes compared to the Simple Moving Average.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="2-calculation-logic">2. Calculation Logic</h2>

<h3 id="formula">Formula</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Component</td><td class="px-4 py-2 border-b border-[#2a2e39]">Formula</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Multiplier</td><td class="px-4 py-2 border-b border-[#2a2e39]">$K = \frac{2}{N + 1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weight for current price</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">$EMA_t = (P_t - EMA_{t-1}) \times K + EMA_{t-1}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Recursive smoothing</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Seed Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">$SMA_N = \frac{\sum_{i=1}^{N} P_i}{N}$</td><td class="px-4 py-2 border-b border-[#2a2e39]">Initial EMA value</td></tr>
</table></div>

<p class="mb-4">Variables:</p>
<p class="mb-4">- $P_t$ = Current closing price</p>
<p class="mb-4">- $EMA_{t-1}$ = Previous EMA value</p>
<p class="mb-4">- $N$ = Period (e.g., 20)</p>
<p class="mb-4">- $K$ = Smoothing constant (multiplier)</p>

<p class="mb-4">Step-by-Step Logic:</p>
<p class="mb-4">1. Calculate the SMA of the first $N$ periods as the seed value</p>
<p class="mb-4">2. Compute multiplier: $K = 2 / (N + 1)$</p>
<p class="mb-4">3. For each subsequent bar: $EMA = (Close - prevEMA) \times K + prevEMA$</p>
<p class="mb-4">4. The recursive nature creates an "Infinite Impulse Response" filter—old data never fully disappears but becomes infinitesimally small</p>

<h3 id="real-world-analogy">Real-World Analogy</h3>

<p class="mb-4">Think of the EMA like a news anchor's reaction speed. The SMA is an old-fashioned anchor who gives equal weight to news from 200 days ago and yesterday. The EMA is a modern anchor who focuses heavily on what happened today while still aware of the past, but with fading memory. This makes the EMA turn corners faster when the story changes.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="3-market-standards">3. Market Standards</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Parameter</td><td class="px-4 py-2 border-b border-[#2a2e39]">Value</td><td class="px-4 py-2 border-b border-[#2a2e39]">Purpose</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Scalping/Day</td><td class="px-4 py-2 border-b border-[#2a2e39]">9, 20</td><td class="px-4 py-2 border-b border-[#2a2e39]">Fast reaction for intraday</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Swing Trading</td><td class="px-4 py-2 border-b border-[#2a2e39]">20, 50</td><td class="px-4 py-2 border-b border-[#2a2e39]">Balance of speed/smoothness</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Long-Term Trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">50, 200</td><td class="px-4 py-2 border-b border-[#2a2e39]">Golden/Death Cross standard</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Haurlan's Original</td><td class="px-4 py-2 border-b border-[#2a2e39]">19</td><td class="px-4 py-2 border-b border-[#2a2e39]">Approximates 10% decay rate</td></tr>
</table></div>

<p class="mb-4">Timeframe Compatibility:</p>
<p class="mb-4">- Daily: Most common (50/200 EMA for institutional signals)</p>
<p class="mb-4">- Intraday: 9/20 EMA for scalping</p>
<p class="mb-4">- Weekly: 12/26 EMA (MACD basis)</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="4-market-context">4. Market Context</h2>

<p class="mb-4">Best: Strong trending markets with clear directional moves  </p>
<p class="mb-4">Good: Markets with defined pullbacks to the EMA  </p>
<p class="mb-4">Worst: Choppy/sideways markets (causes whipsaw crossovers burning capital)</p>

<p class="mb-4">Multi-Asset Applicability:</p>
<p class="mb-4">- Stocks, Forex, Crypto, Commodities</p>
<p class="mb-4">- Less effective on mean-reverting instruments</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="5-entry-signals">5. Entry Signals</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Signal Type</td><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Direction</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strength</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Golden Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short EMA > Long EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Death Cross</td><td class="px-4 py-2 border-b border-[#2a2e39]">Short EMA < Long EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Cross Up</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close > EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price Cross Down</td><td class="px-4 py-2 border-b border-[#2a2e39]">Close < EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bearish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA Pullback Buy</td><td class="px-4 py-2 border-b border-[#2a2e39]">Uptrend + Price touches EMA + Bounce</td><td class="px-4 py-2 border-b border-[#2a2e39]">Bullish</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong</td></tr>
</table></div>

<h3 id="primary-buy-signal-golden-cross">Primary Buy Signal (Golden Cross)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF EMA(50) crosses above EMA(200)
AND EMA(200) slope &gt; 0               // Long EMA also rising
THEN → BUY (Institutional trend reversal)
</code></pre>

<h3 id="pullback-entry-advanced">Pullback Entry (Advanced)</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF EMA(50) slope &gt; 0                 // Trend is up
AND Price retraces to touch EMA(50)
AND Bullish reversal candle forms
THEN → BUY (Buy the dip in trend)
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="6-filter-usage">6. Filter Usage</h2>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Partner</td><td class="px-4 py-2 border-b border-[#2a2e39]">Synergy</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Stochastic</td><td class="px-4 py-2 border-b border-[#2a2e39]">EMA defines trend; Stochastic times pullback entries</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">ADX</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trade EMA signals only if ADX > 20 (trending)</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">RSI</td><td class="px-4 py-2 border-b border-[#2a2e39]">Ignore overbought RSI in strong EMA uptrend</td></tr>
</table></div>

<h3 id="filter-rule-example">Filter Rule Example</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
FILTER = EMA(50) slope &gt; 0 AND Price &gt; EMA(200)
// Only take long signals when dual EMA alignment confirms uptrend
</code></pre>

<hr class="border-[#2a2e39] my-8">

<h2 id="7-practical-cautions">7. Practical Cautions</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">The "Starting Problem": The first EMA value uses SMA as seed. Early EMA values are distorted—wait for 3× Period bars for convergence.</blockquote>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Gap Sensitivity: Massive price gaps distort EMA for duration proportional to the smoothing factor. Don't trade immediately after major gaps.</blockquote>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">Flat EMA = No Trade: If the long-term EMA is horizontal, crossovers are unreliable. Require EMA slope confirmation.</blockquote>

<hr class="border-[#2a2e39] my-8">

<h2 id="8-pro-insights">8. Pro Insights</h2>

<p class="mb-4">The "EMA Ribbon": Plot multiple EMAs (20, 25, 30, 35, 40, 45, 50) instead of a single line.</p>
<p class="mb-4">- Expansion: Lines fan out → Trend is accelerating (green light)</p>
<p class="mb-4">- Contraction: Lines bunch together → Trend is ending (yellow light)</p>
<p class="mb-4">- Twist: Lines cross each other → Trend reversal in progress (red light)</p>

<p class="mb-4">Dynamic Support/Resistance: In strong trends, the 20-EMA often acts as a "floor" for pullbacks. Professional traders call this the "Holy Grail" setup—buying when price touches the rising 20-EMA with a bullish bounce candle.</p>

<p class="mb-4">MACD Foundation: The famous MACD indicator is simply the difference between 12-EMA and 26-EMA. Understanding EMA is the key to understanding MACD.</p>

<hr class="border-[#2a2e39] my-8">

<h2 id="9-summary">9. Summary</h2>

<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4 bg-gray-50 py-2 pr-2 rounded-r">"The EMA is your trend-following radar that prioritizes the present over the past—it turns corners before the SMA does, giving you a head start on trend reversals."</blockquote>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 2: SUPPLEMENTARY GUIDE</h2></p>

<h2 id="1-core-concept">1. Core Concept</h2>

<p class="mb-4">The EMA answers: "What is the weighted-recent value consensus?"</p>

<p class="mb-4">While an SMA treats all prices equally (data from 200 days ago = yesterday), the EMA applies exponentially decaying weights. Yesterday's price has maximum impact; older prices fade rapidly. This eliminates the "drop-off effect" seen in SMAs—where the average jumps unnaturally when old volatile data leaves the window.</p>

<h2 id="2-statistical-edge">2. Statistical Edge</h2>

<p class="mb-4">The EMA's reduced lag provides earlier signals:</p>
<p class="mb-4">- 50-EMA typically turns 3-5 bars before 50-SMA</p>
<p class="mb-4">- Backtests show 10-15% improvement in entry timing vs SMA</p>
<p class="mb-4">- The 50/200 Golden Cross has an 80%+ win rate over 12-month horizons in S&P 500 history</p>

<h2 id="3-actionable-strategy:-"trend-pullback-entry"">3. Actionable Strategy: "Trend Pullback Entry"</h2>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
STRATEGY: EMA Bounce Trade
SETUP: EMA(50) slope positive for 10+ bars
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Price separates significantly from EMA, then retraces
TRIGGER: Price touches EMA(50) zone
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stochastic(14,3,3) crosses up from &lt; 20
ENTRY: Buy on Stochastic cross
STOP: 1.5× ATR below EMA
EXIT: When Stochastic crosses down from &gt; 80
</code></pre>

<h2 id="4-risks-&-limitations">4. Risks & Limitations</h2>

<p class="mb-4">- Whipsaws in ranges: Avoid using in ADX < 20 environments</p>
<p class="mb-4">- Seed dependency: First EMA values unreliable</p>
<p class="mb-4">- Gap distortion: Post-gap EMAs take time to normalize</p>
<p class="mb-4">- Overfitting: Too many EMA lines create analysis paralysis</p>

<h2 id="5-further-study">5. Further Study</h2>

<p class="mb-4">Creator: Pete Haurlan applied exponential smoothing (used in JPL rocket tracking) to financial markets in the 1960s  </p>
<p class="mb-4">Related: SMA, WMA, DEMA, TEMA, MACD, EMA Ribbon, Ichimoku Tenkan-sen</p>

<h3 id="55-related-indicators-comparison">5.5 Related Indicators Comparison</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Feature</td><td class="px-4 py-2 border-b border-[#2a2e39]">EMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">SMA</td><td class="px-4 py-2 border-b border-[#2a2e39]">WMA</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Weighting</td><td class="px-4 py-2 border-b border-[#2a2e39]">Exponential decay</td><td class="px-4 py-2 border-b border-[#2a2e39]">Equal</td><td class="px-4 py-2 border-b border-[#2a2e39]">Linear decay</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Lag</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Sensitivity</td><td class="px-4 py-2 border-b border-[#2a2e39]">High</td><td class="px-4 py-2 border-b border-[#2a2e39]">Low</td><td class="px-4 py-2 border-b border-[#2a2e39]">Medium</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Calculation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Recursive</td><td class="px-4 py-2 border-b border-[#2a2e39]">Full buffer</td><td class="px-4 py-2 border-b border-[#2a2e39]">Weighted sum</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Best For</td><td class="px-4 py-2 border-b border-[#2a2e39]">Trend detection</td><td class="px-4 py-2 border-b border-[#2a2e39]">Long-term analysis</td><td class="px-4 py-2 border-b border-[#2a2e39]">Moderate smoothing</td></tr>
</table></div>

<p class="mb-4"><h2 class="text-2xl font-bold mt-12 mb-6 border-b pb-2">PART 3: ADVANCED SIGNAL REFERENCE</h2></p>

<h3 id="threshold-matrix">Threshold Matrix</h3>

<div class="overflow-x-auto my-4"><table class="min-w-full divide-y divide-[#2a2e39] text-sm text-left">
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Condition</td><td class="px-4 py-2 border-b border-[#2a2e39]">Interpretation</td><td class="px-4 py-2 border-b border-[#2a2e39]">Action</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price > EMA(20) > EMA(50) > EMA(200)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong uptrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Buy/Hold long</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price < EMA(20) < EMA(50) < EMA(200)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Strong downtrend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Sell/Hold short</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMA(50) crosses EMA(200)</td><td class="px-4 py-2 border-b border-[#2a2e39]">Major trend change</td><td class="px-4 py-2 border-b border-[#2a2e39]">Enter direction of cross</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">Price touching EMA in trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Pullback opportunity</td><td class="px-4 py-2 border-b border-[#2a2e39]">Enter with trend</td></tr>
<tr><td class="px-4 py-2 border-b border-[#2a2e39]">EMAs tangled/flat</td><td class="px-4 py-2 border-b border-[#2a2e39]">No trend</td><td class="px-4 py-2 border-b border-[#2a2e39]">Avoid trading</td></tr>
</table></div>

<h3 id="signal-patterns">Signal Patterns</h3>

<h4 id="golden-cross-with-slope-confirmation">Golden Cross with Slope Confirmation</h4>

<p class="mb-4">The Golden Cross occurs when the short-term EMA crosses above the long-term EMA, signaling a major trend reversal. Adding slope confirmation ensures the long-term EMA is also rising, filtering out false signals during consolidation phases. This institutional-grade signal has historically shown an 80%+ win rate over 12-month horizons in major indices.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def ema_golden_cross(ema_short, ema_short_prev, ema_long, ema_long_prev):
&nbsp;&nbsp;&nbsp;&nbsp;crossed = ema_short &gt; ema_long and ema_short_prev &lt;= ema_long_prev
&nbsp;&nbsp;&nbsp;&nbsp;slope_confirm = ema_long &gt; ema_long_prev
&nbsp;&nbsp;&nbsp;&nbsp;return crossed and slope_confirm
</code></pre>

<h4 id="pullback-buy-at-ema-support">Pullback Buy at EMA Support</h4>

<p class="mb-4">This signal identifies buying opportunities when price retraces to a rising EMA and finds support. The Stochastic cross from oversold territory provides timing confirmation, ensuring the pullback has momentum to reverse. Known as the "Holy Grail" setup among professional traders, it offers high reward-to-risk entries within established trends.</p>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-python">
def ema_pullback_buy(price, ema, ema_slope, stoch_k, stoch_k_prev):
&nbsp;&nbsp;&nbsp;&nbsp;trend_up = ema_slope &gt; 0
&nbsp;&nbsp;&nbsp;&nbsp;at_ema = abs(price - ema) / ema &lt; 0.01  # Within 1%
&nbsp;&nbsp;&nbsp;&nbsp;stoch_cross = stoch_k &gt; 20 and stoch_k_prev &lt;= 20
&nbsp;&nbsp;&nbsp;&nbsp;return trend_up and at_ema and stoch_cross
</code></pre>

<h3 id="screening-filters">Screening Filters</h3>

<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
// Golden Cross with Slope Confirmation
SET ShortEMA = EMA(Close, 50)
SET LongEMA = EMA(Close, 200)

FILTER =
&nbsp;&nbsp;(ShortEMA crosses above LongEMA) AND
&nbsp;&nbsp;(ShortEMA &gt; ShortEMA[1]) AND        // Short EMA rising
&nbsp;&nbsp;(LongEMA &gt; LongEMA[1])              // Long EMA also rising
</code></pre>

<h3 id="combination-strategies">Combination Strategies</h3>

<p class="mb-4">EMA + Stochastic Pullback:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
IF Price &gt; EMA(50)                    // Uptrend filter
AND EMA(50) &gt; EMA(50)[5]              // Slope confirmation
AND Stochastic(14,3,3) crosses above 20
THEN BUY

STOP = EMA(50) - 1.5 * ATR(14)
TARGET = Entry + 2 * (Entry - Stop)
</code></pre>

<p class="mb-4">Triple EMA Screen:</p>
<pre class="whitespace-pre overflow-x-auto bg-slate-800 text-slate-100 p-4 rounded"><code class="language-">
SCREEN 1: Weekly EMA(50) &gt; Weekly EMA(200)   // Long-term trend
SCREEN 2: Daily Price &gt; Daily EMA(50)        // Intermediate alignment
SCREEN 3: Hourly EMA(9) crosses EMA(20)      // Entry timing
</code></pre>






                    </div>
                </article>
                <!-- Right: Sticky TOC -->
                <aside class="lg:block w-64 flex-shrink-0">
                    <div class="sticky top-24">
                        <h3 class="font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100 text-sm uppercase tracking-wider">
                            On this page
                        </h3>
                        <nav id="toc-nav" class="space-y-1 text-sm text-slate-600">
                            <a href="#1-identity" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Identity</a>
<a href="#2-calculation-logic" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Calculation Logic</a>
<a href="#formula" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Formula</a>
<a href="#real-world-analogy" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Real-World Analogy</a>
<a href="#3-market-standards" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Market Standards</a>
<a href="#4-market-context" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Market Context</a>
<a href="#5-entry-signals" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Entry Signals</a>
<a href="#primary-buy-signal-golden-cross" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Primary Buy Signal (Golden Cross)</a>
<a href="#pullback-entry-advanced" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Pullback Entry (Advanced)</a>
<a href="#6-filter-usage" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">6. Filter Usage</a>
<a href="#filter-rule-example" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Filter Rule Example</a>
<a href="#7-practical-cautions" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">7. Practical Cautions</a>
<a href="#8-pro-insights" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">8. Pro Insights</a>
<a href="#9-summary" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">9. Summary</a>
<a href="#1-core-concept" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">1. Core Concept</a>
<a href="#2-statistical-edge" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">2. Statistical Edge</a>
<a href="#3-actionable-strategy:-"trend-pullback-entry"" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">3. Actionable Strategy: "Trend Pullback Entry"</a>
<a href="#4-risks-&-limitations" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">4. Risks & Limitations</a>
<a href="#5-further-study" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors ">5. Further Study</a>
<a href="#55-related-indicators-comparison" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">5.5 Related Indicators Comparison</a>
<a href="#threshold-matrix" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Threshold Matrix</a>
<a href="#signal-patterns" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Signal Patterns</a>
<a href="#screening-filters" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Screening Filters</a>
<a href="#combination-strategies" class="toc-link block py-1 px-2 rounded hover:bg-slate-50 transition-colors pl-4">Combination Strategies</a>

                        </nav>
                        <div class="mt-8 pt-4 border-t border-slate-100">
                            <a href="#" class="text-xs text-slate-400 hover:text-indigo-600 flex items-center transition-colors">
                                Back to Top
                            </a>
                        </div>
                    </div>
                </aside>
            </div>
        </section>


    </div>


        <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-slate-400 text-sm">
                &copy; 2023-2025 I ant I Investigates. All rights reserved.
            </p>
        </div>
    </footer>
        <!-- ========================================== -->
    <!-- 1. DATA & LOGIC INJECTION                  -->
    <!-- ========================================== -->
    <script>
        window.IndicatorLogic = {
            name: "ExponentialMovingAverage",
            params: [],
            calculate: null
        };
        (function() {
            try {
                const injectedCode = `
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 10;
                const result = ExponentialMovingAverage.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
        `;
                const isTemplatePlaceholder = injectedCode.includes('{{') && injectedCode.includes('CODE_INDICATOR_LOGIC');
                if (injectedCode && injectedCode.trim().length > 0 && !isTemplatePlaceholder) {
                    new Function(injectedCode)();
                } else {
                    console.warn("Playground Logic: Running in Preview/Fallback mode.");
                    window.IndicatorLogic.calculate = () => []; 
                }
            } catch (e) {
                console.error("Critical Error in Logic Injection:", e);
                window.IndicatorLogic.calculate = () => [];
            }
        })();
    </script>

    <!-- ========================================== -->
    <!-- 2. VISUALIZATION ENGINE                    -->
    <!-- ========================================== -->
    <script>
        mermaid.initialize({ startOnLoad: false, theme: 'neutral', securityLevel: 'loose' });
    </script>
    <!-- ========================================== -->
    <!-- 3. UI CONTROLLERS & APP INITIALIZATION     -->
    <!-- ========================================== -->
    <!-- INLINE UI CONTROLLERS (PORTED FROM 0117) -->
    <script src="../assets/js/ExponentialMovingAverage.js"></script>
    <!-- JSON Data Containers (XSS-safe) -->
    <script id="data-indicator-config" type="application/json">
[{"id": "period", "label": "Period (10)", "type": "number", "value": 10, "min": 2, "max": 100}]
    </script>
    <script id="data-indicator-display" type="application/json">
{"isOverlay": true, "plots": {"main": {"label": "ExponentialMovingAverage", "color": "#4f46e5", "type": "line"}}}
    </script>
    <script>
        // --- 0. Indicator Data Injection ---
        // Use existing IndicatorLogic (set in earlier script block), only set if not exists
        var IndicatorLogic = window.IndicatorLogic || { calculate: null };
        var IndicatorConfig = [];
        var IndicatorDisplay = { isOverlay: false, plots: {} };

        // 1. Library Code - loaded externally before this block

        // 2. Configuration (XSS-safe via script type="application/json")
        try {
            var configEl = document.getElementById('data-indicator-config');
            if(configEl && configEl.textContent.trim()) {
                IndicatorConfig = JSON.parse(configEl.textContent);
            }
        } catch(e){ console.warn('Config parse error', e); }

        try {
            var displayEl = document.getElementById('data-indicator-display');
            if(displayEl && displayEl.textContent.trim()) {
                IndicatorDisplay = JSON.parse(displayEl.textContent);
            }
        } catch(e){ console.warn('Display parse error', e); }

        // 3. Logic Adapter
        window.IndicatorLogic = {
            calculate: (data, params) => {
                const period = params.period || 10;
                const result = ExponentialMovingAverage.calculate(data, period);
                // Handle both array and object returns
                if (Array.isArray(result)) {
                    return { main: result };
                }
                return result;
            }
        };
    </script>

    <!-- UI Controllers: indicator.js loads first to define PlaygroundController -->
    <script src="../assets/js/indicator.js" defer></script>
    <!-- script.js loads second, skips PlaygroundController if already defined -->
    <script src="../assets/js/script.js" defer></script>

</body>
</html>