{"csharp_simple":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"k\">using</span> System;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"k\">using</span> System.Collections.Generic;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"k\">namespace</span> TechnicalIndicators</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span>{</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span>    <span class=\"c1\">/// &lt;summary&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span>    <span class=\"c1\">/// Aroon Indicator</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span>    <span class=\"c1\">/// &lt;/summary&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span>    <span class=\"c1\">/// &lt;remarks&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span>    <span class=\"c1\">/// Determines whether a stock is trending and the strength of its trend.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span>    <span class=\"c1\">/// &lt;list type=&quot;bullet&quot;&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Aroon Up: Time since N-period High.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Aroon Down: Time since N-period Low.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Aroon Oscillator: Aroon Up - Aroon Down.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span>    <span class=\"c1\">/// &lt;/list&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span>    <span class=\"c1\">/// &lt;/remarks&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span>    <span class=\"k\">public</span> <span class=\"k\">class</span> <span class=\"nc\">Aroon</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span>    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span>        <span class=\"k\">public</span> <span class=\"kt\">int</span> Period { <span class=\"k\">get</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonUp { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonDown { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonOscillator { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span>        <span class=\"k\">public</span> Aroon(<span class=\"kt\">int</span> period = 25)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span>            <span class=\"k\">if</span> (period &lt;= 0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span>                <span class=\"k\">throw</span> <span class=\"k\">new</span> ArgumentOutOfRangeException(<span class=\"s\">&quot;Period must be greater than 0&quot;</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span>            Period = period;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span>        <span class=\"k\">public</span> <span class=\"k\">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span>            AroonUp.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span>            AroonDown.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span>            AroonOscillator.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span>            <span class=\"kt\">var</span> candleList = <span class=\"k\">new</span> List&lt;CandleData&gt;(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span>            <span class=\"k\">if</span> (candleList.Count == 0) <span class=\"k\">return</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; candleList.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span>                <span class=\"c1\">// We need &#x27;Period&#x27; past days. </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span>                <span class=\"c1\">// Unlike most indicators, Aroon looks at the window [i-Period ... i].</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span>                <span class=\"c1\">// So size is Period+1 points? Standard def: &quot;since last high in x periods&quot;.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span>                <span class=\"c1\">// Usually requires Period history.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span>                <span class=\"k\">if</span> (i &lt; Period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>                    AroonUp.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span>                    AroonDown.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span>                    AroonOscillator.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>                    <span class=\"k\">continue</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>                <span class=\"c1\">// Lookback window: [i - Period ... i]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>                <span class=\"c1\">// Find distance to Highest High and Lowest Low.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>                <span class=\"kt\">int</span> highestIndicesAgo = 0;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>                <span class=\"kt\">int</span> lowestIndicesAgo = 0;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>                <span class=\"kt\">decimal</span> highest = <span class=\"kt\">decimal</span>.MinValue;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>                <span class=\"kt\">decimal</span> lowest = <span class=\"kt\">decimal</span>.MaxValue;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>                <span class=\"k\">for</span> (<span class=\"kt\">int</span> j = 0; j &lt;= Period; j++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>                    <span class=\"c1\">// Scan from oldest (j=0, index = i-Period) to newest (j=Period, index=i)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>                    <span class=\"kt\">int</span> idx = i - Period + j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>                    </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>                    <span class=\"c1\">// We need &quot;Days Since&quot;. </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>                    <span class=\"c1\">// If current day (j=Period) is High, days since = 0.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>                    <span class=\"c1\">// If oldest day (j=0) is High, days since = Period.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>                    </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>                    <span class=\"k\">if</span> (candleList[idx].High &gt;= highest) </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>                    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>                        highest = candleList[idx].High;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>                        <span class=\"c1\">// Updating allows &quot;Most Recent&quot; high to take precedence if equal?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>                        <span class=\"c1\">// Standard: &quot;Number of periods since the highest high&quot;. </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>                        <span class=\"c1\">// If equal highs, usually the most recent one counts (distance is smaller).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>                        <span class=\"c1\">// So &gt;= is correct.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span>                        highestIndicesAgo = Period - j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>                    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>                    <span class=\"k\">if</span> (candleList[idx].Low &lt;= lowest)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span>                    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span>                        lowest = candleList[idx].Low;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span>                        lowestIndicesAgo = Period - j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span>                    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span>                <span class=\"c1\">// Formula: ((Period - DaysSince) / Period) * 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>                <span class=\"kt\">decimal</span> upVal = ((<span class=\"kt\">decimal</span>)(Period - highestIndicesAgo) / Period) * 100;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span>                <span class=\"kt\">decimal</span> downVal = ((<span class=\"kt\">decimal</span>)(Period - lowestIndicesAgo) / Period) * 100;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>                AroonUp.Add(upVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span>                AroonDown.Add(downVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>                AroonOscillator.Add(upVal - downVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>        <span class=\"k\">public</span> static (List&lt;<span class=\"kt\">decimal?</span>&gt; up, List&lt;<span class=\"kt\">decimal?</span>&gt; down, List&lt;<span class=\"kt\">decimal?</span>&gt; oscillator) Calculate(IEnumerable&lt;CandleData&gt; candles, <span class=\"kt\">int</span> period = 25)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>            <span class=\"kt\">var</span> aroon = <span class=\"k\">new</span> Aroon(period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>            aroon.Calculate(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">101</span>            <span class=\"k\">return</span> (aroon.AroonUp, aroon.AroonDown, aroon.AroonOscillator);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">102</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">103</span>    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">104</span>}</div></div>","csharp_detailed":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"c1\">// Logic Breakdown (Aroon Indicator)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span><span class=\"c1\">// This document provides a &quot;Deep Dive&quot; into the internal logic of the</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span><span class=\"c1\">// Aroon indicator. We explain *why* code is written this way and *how*</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span><span class=\"c1\">// data transforms line-by-line, targeting programming beginners.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span><span class=\"c1\">// [Core Concepts]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span><span class=\"c1\">// 1. Aroon Theory (Tushar Chande, 1995)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span><span class=\"c1\">//    &quot;Aroon&quot; means &quot;Dawn&#x27;s Early Light&quot; in Hindi.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span><span class=\"c1\">//    [Why] Designed to detect the beginning of new trends before they mature.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span><span class=\"c1\">// 2. Three Components</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span><span class=\"c1\">//    - AroonUp: Measures how recently the highest high occurred</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span><span class=\"c1\">//    - AroonDown: Measures how recently the lowest low occurred</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span><span class=\"c1\">//    - Oscillator: AroonUp - AroonDown (trend direction strength)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span><span class=\"c1\">// 3. Formula</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span><span class=\"c1\">//    AroonUp = ((Period - bars since highest high) / Period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span><span class=\"c1\">//    AroonDown = ((Period - bars since lowest low) / Period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span><span class=\"c1\">//    [Why] Recent high = AroonUp near 100 = strong uptrend.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span><span class=\"c1\">//          Recent low = AroonDown near 100 = strong downtrend.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span><span class=\"c1\">// [Visual] Aroon Calculation Example:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span><span class=\"c1\">// Period = 5, Current bar i = 10</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span><span class=\"c1\">// Window: bars [6, 7, 8, 9, 10]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span><span class=\"c1\">// Bar:     6     7     8     9    10</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span><span class=\"c1\">// High:  [105] [108] [106] [107] [104]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span><span class=\"c1\">//              ↑ Highest = 108 at bar 7 (j=1 in window)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span><span class=\"c1\">// Low:   [100] [102] [98]  [101] [103]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span><span class=\"c1\">//                    ↑ Lowest = 98 at bar 8 (j=2 in window)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span><span class=\"c1\">// AroonUp = (1 / 5) × 100 = 20% (high was 4 bars ago = weak)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span><span class=\"c1\">// AroonDown = (2 / 5) × 100 = 40% (low was 3 bars ago)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span><span class=\"c1\">// Oscillator = 20 - 40 = -20 (slightly bearish)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span><span class=\"c1\">// [Trading Signals]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span><span class=\"c1\">// - AroonUp &gt; 70 + AroonDown &lt; 30 → Strong uptrend</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span><span class=\"c1\">// - AroonDown &gt; 70 + AroonUp &lt; 30 → Strong downtrend</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span><span class=\"c1\">// - Both &lt; 50 → Range-bound market</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span><span class=\"c1\">// - Oscillator &gt; 0 → Bullish bias</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span><span class=\"c1\">// - Oscillator &lt; 0 → Bearish bias</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span><span class=\"k\">using</span> System;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span><span class=\"k\">using</span> System.Collections.Generic;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span><span class=\"k\">namespace</span> TechnicalIndicators</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>{</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>    <span class=\"c1\">// Logic Explanation: OHLCV Data Container (CandleData)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>    <span class=\"c1\">// [Why]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>    <span class=\"c1\">// Standardized price data. Aroon uses High and Low prices specifically.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>    <span class=\"c1\">// [Where]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>    <span class=\"c1\">// Stack allocation (readonly record struct) for GC efficiency.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>    <span class=\"c1\">// -------------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>    <span class=\"k\">public</span> <span class=\"k\">readonly</span> <span class=\"k\">record</span> <span class=\"k\">struct</span> CandleData(</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>        DateTime Timestamp,</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>        <span class=\"kt\">decimal</span> Open,</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>        <span class=\"kt\">decimal</span> High,</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>        <span class=\"kt\">decimal</span> Low,</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>        <span class=\"kt\">decimal</span> Close,</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>        <span class=\"kt\">long</span> Volume</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>    );</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>    <span class=\"c1\">// Logic Explanation: Aroon Trend Indicator</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>    <span class=\"c1\">// [Why]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>    <span class=\"c1\">// Tushar Chande designed Aroon to identify trend strength and potential</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>    <span class=\"c1\">// reversals by measuring time since recent highs and lows.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span>    <span class=\"c1\">// [What]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span>    <span class=\"c1\">// Three outputs:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span>    <span class=\"c1\">// - AroonUp: Recency of highest high (0-100)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span>    <span class=\"c1\">// - AroonDown: Recency of lowest low (0-100)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span>    <span class=\"c1\">// - Oscillator: Difference (range -100 to +100)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>    <span class=\"c1\">// [Who]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span>    <span class=\"c1\">// - Trend traders: Identify trend direction and strength</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span>    <span class=\"c1\">// - Swing traders: Spot trend reversals early</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>    <span class=\"c1\">// - Range traders: Confirm consolidation periods</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>    <span class=\"c1\">// [Where]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>    <span class=\"c1\">// Heap allocation (class) for multiple output collections.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>    <span class=\"c1\">// -------------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>    <span class=\"k\">public</span> <span class=\"k\">class</span> <span class=\"nc\">Aroon</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>        <span class=\"c1\">// Logic Explanation: Indicator Configuration</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">101</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">102</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">103</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">104</span>        <span class=\"c1\">// Variable Definition: Period</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">105</span>        <span class=\"c1\">// [Role] Lookback window for finding highest/lowest</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">106</span>        <span class=\"c1\">// [Default] 25 bars (about one trading month)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">107</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">108</span>        <span class=\"k\">public</span> <span class=\"kt\">int</span> Period { <span class=\"k\">get</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">109</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">110</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">111</span>        <span class=\"c1\">// Variable Definition: AroonUp Output</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">112</span>        <span class=\"c1\">// [Role] Measures recency of highest high (0 = old, 100 = just now)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">113</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">114</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonUp { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">115</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">116</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">117</span>        <span class=\"c1\">// Variable Definition: AroonDown Output</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">118</span>        <span class=\"c1\">// [Role] Measures recency of lowest low (0 = old, 100 = just now)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">119</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">120</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonDown { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">121</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">122</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">123</span>        <span class=\"c1\">// Variable Definition: AroonOscillator Output</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">124</span>        <span class=\"c1\">// [Role] AroonUp - AroonDown (positive = bullish, negative = bearish)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">125</span>        <span class=\"c1\">// ---------------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">126</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; AroonOscillator { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">127</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">128</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">129</span>        <span class=\"c1\">// Logic Explanation: Constructor</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">130</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">131</span>        <span class=\"k\">public</span> Aroon(<span class=\"kt\">int</span> period = 25)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">132</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">133</span>            <span class=\"k\">if</span> (period &lt;= 0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">134</span>                <span class=\"k\">throw</span> <span class=\"k\">new</span> ArgumentOutOfRangeException(<span class=\"k\">nameof</span>(period), <span class=\"s\">&quot;Period must be greater than 0&quot;</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">135</span>            Period = period;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">136</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">137</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">138</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">139</span>        <span class=\"c1\">// IPO: Calculate</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">140</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">141</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">142</span>        <span class=\"c1\">// [Input]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">143</span>        <span class=\"c1\">// - candles: IEnumerable&lt;CandleData&gt; - OHLCV price bars</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">144</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">145</span>        <span class=\"c1\">// [Process]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">146</span>        <span class=\"c1\">// 1. For each bar with enough history:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">147</span>        <span class=\"c1\">//    a. Scan window for highest high and its position</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">148</span>        <span class=\"c1\">//    b. Scan window for lowest low and its position</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">149</span>        <span class=\"c1\">//    c. Calculate AroonUp from high position</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">150</span>        <span class=\"c1\">//    d. Calculate AroonDown from low position</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">151</span>        <span class=\"c1\">//    e. Calculate Oscillator as difference</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">152</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">153</span>        <span class=\"c1\">// [Output]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">154</span>        <span class=\"c1\">// - Populates AroonUp, AroonDown, and AroonOscillator lists</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">155</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">156</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">157</span>        <span class=\"k\">public</span> <span class=\"k\">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">158</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">159</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">160</span>            <span class=\"c1\">// Logic Step 1: Clear All Output Lists</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">161</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">162</span>            AroonUp.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">163</span>            AroonDown.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">164</span>            AroonOscillator.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">165</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">166</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">167</span>            <span class=\"c1\">// Logic Step 2: Materialize and Guard</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">168</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">169</span>            <span class=\"kt\">var</span> candleList = <span class=\"k\">new</span> List&lt;CandleData&gt;(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">170</span>            <span class=\"k\">if</span> (candleList.Count == 0) <span class=\"k\">return</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">171</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">172</span>            <span class=\"c1\">// =================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">173</span>            <span class=\"c1\">// Logic Step 3: Calculate Aroon for Each Bar</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">174</span>            <span class=\"c1\">// =================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">175</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; candleList.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">176</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">177</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">178</span>                <span class=\"c1\">// Logic Step 3.1: Warm-up Period Check</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">179</span>                <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">180</span>                <span class=\"c1\">// [Decision] Do we have enough bars for full window?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">181</span>                <span class=\"c1\">// [Why] Need Period+1 bars for complete calculation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">182</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">183</span>                <span class=\"k\">if</span> (i &lt; Period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">184</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">185</span>                    AroonUp.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">186</span>                    AroonDown.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">187</span>                    AroonOscillator.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">188</span>                    <span class=\"k\">continue</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">189</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">190</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">191</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">192</span>                <span class=\"c1\">// Logic Step 3.2: Find Highest High and Lowest Low</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">193</span>                <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">194</span>                <span class=\"c1\">// [Visual] Window Scanning:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">195</span>                <span class=\"c1\">// Period=5, i=10</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">196</span>                <span class=\"c1\">// j:     0     1     2     3     4     5</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">197</span>                <span class=\"c1\">// idx:   5     6     7     8     9    10</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">198</span>                <span class=\"c1\">// High: 102   105   108   106   107   104</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">199</span>                <span class=\"c1\">//                   ↑ highest at j=2</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">200</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">201</span>                <span class=\"kt\">int</span> highestIdx = 0;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">202</span>                <span class=\"kt\">int</span> lowestIdx = 0;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">203</span>                <span class=\"kt\">decimal</span> highest = <span class=\"kt\">decimal</span>.MinValue;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">204</span>                <span class=\"kt\">decimal</span> lowest = <span class=\"kt\">decimal</span>.MaxValue;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">205</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">206</span>                <span class=\"k\">for</span> (<span class=\"kt\">int</span> j = 0; j &lt;= Period; j++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">207</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">208</span>                    <span class=\"kt\">int</span> idx = i - Period + j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">209</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">210</span>                    <span class=\"c1\">// Update highest if current is higher</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">211</span>                    <span class=\"k\">if</span> (candleList[idx].High &gt; highest)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">212</span>                    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">213</span>                        highest = candleList[idx].High;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">214</span>                        highestIdx = j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">215</span>                    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">216</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">217</span>                    <span class=\"c1\">// Update lowest if current is lower</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">218</span>                    <span class=\"k\">if</span> (candleList[idx].Low &lt; lowest)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">219</span>                    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">220</span>                        lowest = candleList[idx].Low;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">221</span>                        lowestIdx = j;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">222</span>                    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">223</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">224</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">225</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">226</span>                <span class=\"c1\">// Logic Step 3.3: Calculate Aroon Values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">227</span>                <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">228</span>                <span class=\"c1\">// [How]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">229</span>                <span class=\"c1\">// AroonUp = (highestIdx / Period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">230</span>                <span class=\"c1\">// AroonDown = (lowestIdx / Period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">231</span>                <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">232</span>                <span class=\"c1\">// [Why j instead of bars-since?]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">233</span>                <span class=\"c1\">// j represents position from oldest (j=0) to newest (j=Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">234</span>                <span class=\"c1\">// Higher j = more recent = higher Aroon value</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">235</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">236</span>                <span class=\"kt\">decimal</span> aroonUpVal = ((<span class=\"kt\">decimal</span>)highestIdx / Period) * 100;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">237</span>                <span class=\"kt\">decimal</span> aroonDownVal = ((<span class=\"kt\">decimal</span>)lowestIdx / Period) * 100;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">238</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">239</span>                AroonUp.Add(aroonUpVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">240</span>                AroonDown.Add(aroonDownVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">241</span>                AroonOscillator.Add(aroonUpVal - aroonDownVal);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">242</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">243</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">244</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">245</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">246</span>        <span class=\"c1\">// Static Convenience Wrapper (3-Step Pattern)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">247</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">248</span>        <span class=\"k\">public</span> static (List&lt;<span class=\"kt\">decimal?</span>&gt; up, List&lt;<span class=\"kt\">decimal?</span>&gt; down, List&lt;<span class=\"kt\">decimal?</span>&gt; oscillator) Calculate(IEnumerable&lt;CandleData&gt; candles, <span class=\"kt\">int</span> period = 25)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">249</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">250</span>            <span class=\"kt\">var</span> aroon = <span class=\"k\">new</span> Aroon(period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">251</span>            aroon.Calculate(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">252</span>            <span class=\"k\">return</span> (aroon.AroonUp, aroon.AroonDown, aroon.AroonOscillator);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">253</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">254</span>    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">255</span>}</div></div>","python_simple":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"k\">class</span> <span class=\"nc\">Aroon</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span>    <span class=\"sd\">&quot;&quot;&quot;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"sd\">    Aroon Indicator</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"sd\">    Measures time since last highest high and lowest low.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span><span class=\"sd\">    &quot;&quot;&quot;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span>    <span class=\"k\">def</span> __init__(self, period=25):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span>        <span class=\"k\">if</span> period &lt;= 0: <span class=\"k\">raise</span> ValueError(<span class=\"s2\">&quot;</span><span class=\"s2\">Period &gt; 0</span><span class=\"s2\">&quot;</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span>        self.period = period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span>        self.up = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span>        self.down = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span>        self.oscillator = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span>    <span class=\"k\">def</span> calculate(self, candles):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span>        self.up.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span>        self.down.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span>        self.oscillator.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span>        <span class=\"k\">if</span> len(candles) == 0: <span class=\"k\">return</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(candles)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span>            <span class=\"k\">if</span> i &lt; self.period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span>                self.up.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span>                self.down.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span>                self.oscillator.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span>            <span class=\"c1\"># Window [i-Period ... i]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span>            <span class=\"c1\"># Indices relative to window start</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span>            highest_idx = 0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span>            lowest_idx = 0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span>            highest_val = -float(<span class=\"s1\">&#x27;</span><span class=\"s1\">inf</span><span class=\"s1\">&#x27;</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span>            lowest_val = float(<span class=\"s1\">&#x27;</span><span class=\"s1\">inf</span><span class=\"s1\">&#x27;</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span>            <span class=\"c1\"># Scan lookback</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span>            <span class=\"k\">for</span> j <span class=\"ow\">in</span> range(self.period + 1):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span>                idx = i - self.period + j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span>                <span class=\"c1\"># Check High</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span>                <span class=\"k\">if</span> candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">high</span><span class=\"s1\">&#x27;</span>] &gt;= highest_val:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span>                    highest_val = candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">high</span><span class=\"s1\">&#x27;</span>]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span>                    <span class=\"c1\"># Store relative index (0 to Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span>                    highest_idx = j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span>                <span class=\"c1\"># Check Low</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span>                <span class=\"k\">if</span> candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">low</span><span class=\"s1\">&#x27;</span>] &lt;= lowest_val:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span>                    lowest_val = candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">low</span><span class=\"s1\">&#x27;</span>]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>                    lowest_idx = j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span>            <span class=\"c1\"># Days since = Period - RelativeIndex</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>            days_since_high = self.period - highest_idx</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span>            days_since_low = self.period - lowest_idx</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>            up_val = ((self.period - days_since_high) / self.period) * 100</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>            down_val = ((self.period - days_since_low) / self.period) * 100</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>            self.up.append(up_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>            self.down.append(down_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>            self.oscillator.append(up_val - down_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span><span class=\"k\">def</span> calculate(candles, period=25):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>    aroon = Aroon(period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>    aroon.calculate(candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>    <span class=\"k\">return</span> aroon.up, aroon.down, aroon.oscillator</div></div>","python_detailed":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"c1\"># Logic Breakdown (Aroon - Aroon Up/Down/Oscillator)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span><span class=\"c1\"># This document provides a &quot;Deep Dive&quot; into the internal logic of the</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span><span class=\"c1\"># Aroon indicator. We explain *why* code is written this way and *how*</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span><span class=\"c1\"># data transforms line-by-line, targeting programming beginners.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span><span class=\"c1\"># [Core Concepts]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span><span class=\"c1\"># 1. Time Since Extreme</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span><span class=\"c1\">#    Aroon measures how many bars have passed since the highest high</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span><span class=\"c1\">#    and lowest low within a lookback period. Unlike most indicators</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span><span class=\"c1\">#    that measure price levels, Aroon measures TIME.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span><span class=\"c1\"># 2. Aroon Up/Down Formula</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span><span class=\"c1\">#    Aroon Up = (bars since highest high / period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span><span class=\"c1\">#    Aroon Down = (bars since lowest low / period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span><span class=\"c1\">#    Range: 0 to 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span><span class=\"c1\"># 3. Aroon Oscillator</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span><span class=\"c1\">#    Aroon Oscillator = Aroon Up - Aroon Down</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span><span class=\"c1\">#    Range: -100 to +100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span><span class=\"c1\">#    Positive = Uptrend, Negative = Downtrend</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span><span class=\"c1\"># [Trading Interpretation]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span><span class=\"c1\"># - Aroon Up &gt; 70: Strong uptrend</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span><span class=\"c1\"># - Aroon Down &gt; 70: Strong downtrend</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span><span class=\"c1\"># - Both &lt; 50: Consolidation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span><span class=\"c1\"># - Crossovers signal trend changes</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span><span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span><span class=\"c1\"># Type-Level Explanation: Aroon (class)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span><span class=\"c1\"># [Why]  Encapsulates the calculation of three related outputs:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span><span class=\"c1\">#        Aroon Up, Aroon Down, and Aroon Oscillator.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span><span class=\"c1\">#        Single calculation produces all three efficiently.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span><span class=\"c1\"># [What] Measures trend strength by analyzing the recency of</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span><span class=\"c1\">#        highs and lows within a lookback window.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span><span class=\"c1\"># [Who]  Trend traders, breakout traders, consolidation detectors.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span><span class=\"c1\"># [Where] Heap allocation - stores three output lists.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span><span class=\"c1\"># Why single period parameter?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span><span class=\"c1\"># All three outputs use the same lookback window.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span><span class=\"c1\"># This ensures consistent comparison between up and down.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span><span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span><span class=\"k\">class</span> <span class=\"nc\">Aroon</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>    <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>    <span class=\"c1\"># Constructor: __init__</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>    <span class=\"c1\"># [Why]  Validate period and initialize output containers.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>    <span class=\"c1\"># [What] period: Lookback window for finding highs/lows (default 25)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>    <span class=\"c1\">#        aroon_up: Output list for Aroon Up values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>    <span class=\"c1\">#        aroon_down: Output list for Aroon Down values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>    <span class=\"c1\">#        aroon_oscillator: Output list for Up - Down</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>    <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>    <span class=\"k\">def</span> __init__(self, period=25):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>        <span class=\"c1\"># Logic Step 1: Parameter Validation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>        <span class=\"c1\"># [Decision]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>        <span class=\"c1\"># Is period valid (&gt; 0)?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>        <span class=\"c1\"># [True Branch: Invalid]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>        <span class=\"c1\"># Raise ValueError - division by period would fail.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>        <span class=\"c1\"># [False Branch: Valid]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>        <span class=\"c1\"># Continue to initialization.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>        <span class=\"k\">if</span> period &lt;= 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>            <span class=\"k\">raise</span> ValueError(<span class=\"s2\">&quot;</span><span class=\"s2\">period</span><span class=\"s2\">&quot;</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span>        <span class=\"c1\"># Variable Definition: period</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span>        <span class=\"c1\"># self.period = period</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span>        <span class=\"c1\"># [Role]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span>        <span class=\"c1\"># Number of bars to look back for highest high and lowest low.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span>        <span class=\"c1\"># Standard value is 25 (roughly one trading month).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span>        <span class=\"c1\"># [Type Choice]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span>        <span class=\"c1\"># int - Discrete bar count.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span>        self.period = period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>        <span class=\"c1\"># Variable Definition: aroon_up</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>        <span class=\"c1\"># self.aroon_up = []</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>        <span class=\"c1\"># [Role]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>        <span class=\"c1\"># Measures how recently the highest high occurred.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>        <span class=\"c1\"># 100 = highest high is at current bar (strong uptrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">101</span>        <span class=\"c1\"># 0 = highest high was &#x27;period&#x27; bars ago (weak uptrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">102</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">103</span>        <span class=\"c1\"># [Type Choice]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">104</span>        <span class=\"c1\"># list[float|None] - None for insufficient data.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">105</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">106</span>        self.aroon_up = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">107</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">108</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">109</span>        <span class=\"c1\"># Variable Definition: aroon_down</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">110</span>        <span class=\"c1\"># self.aroon_down = []</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">111</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">112</span>        <span class=\"c1\"># [Role]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">113</span>        <span class=\"c1\"># Measures how recently the lowest low occurred.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">114</span>        <span class=\"c1\"># 100 = lowest low is at current bar (strong downtrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">115</span>        <span class=\"c1\"># 0 = lowest low was &#x27;period&#x27; bars ago (weak downtrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">116</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">117</span>        <span class=\"c1\"># [Type Choice]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">118</span>        <span class=\"c1\"># list[float|None] - None for insufficient data.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">119</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">120</span>        self.aroon_down = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">121</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">122</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">123</span>        <span class=\"c1\"># Variable Definition: aroon_oscillator</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">124</span>        <span class=\"c1\"># self.aroon_oscillator = []</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">125</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">126</span>        <span class=\"c1\"># [Role]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">127</span>        <span class=\"c1\"># Aroon Up - Aroon Down.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">128</span>        <span class=\"c1\"># Positive = uptrend dominates, Negative = downtrend dominates.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">129</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">130</span>        <span class=\"c1\"># [Type Choice]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">131</span>        <span class=\"c1\"># list[float|None] - None for insufficient data.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">132</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">133</span>        self.aroon_oscillator = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">134</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">135</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">136</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">137</span>    <span class=\"c1\"># IPO: calculate</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">138</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">139</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">140</span>    <span class=\"c1\"># [Input]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">141</span>    <span class=\"c1\"># - candles: list[dict] - Each dict has &#x27;high&#x27;, &#x27;low&#x27; keys.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">142</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">143</span>    <span class=\"c1\"># [Process]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">144</span>    <span class=\"c1\"># 1. For each bar with sufficient history:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">145</span>    <span class=\"c1\">#    a. Scan lookback window for highest high and lowest low</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">146</span>    <span class=\"c1\">#    b. Record the index (position) where each extreme occurred</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">147</span>    <span class=\"c1\">#    c. Convert position to percentage: (position / period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">148</span>    <span class=\"c1\">#    d. Calculate oscillator as difference</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">149</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">150</span>    <span class=\"c1\"># [Output]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">151</span>    <span class=\"c1\"># - None (results stored in aroon_up, aroon_down, aroon_oscillator)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">152</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">153</span>    <span class=\"k\">def</span> calculate(self, candles):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">154</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">155</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">156</span>        <span class=\"c1\"># Logic Step 1: State Reset</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">157</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">158</span>        <span class=\"c1\"># [Why] (Intent)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">159</span>        <span class=\"c1\"># Clear all three output lists for instance reuse.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">160</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">161</span>        self.aroon_up.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">162</span>        self.aroon_down.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">163</span>        self.aroon_oscillator.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">164</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">165</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">166</span>        <span class=\"c1\"># Logic Step 2: Empty Input Guard</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">167</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">168</span>        <span class=\"c1\"># [Decision]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">169</span>        <span class=\"c1\"># Is there any data to process?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">170</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">171</span>        <span class=\"k\">if</span> len(candles) == 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">172</span>            <span class=\"k\">return</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">173</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">174</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">175</span>        <span class=\"c1\"># Logic Step 3: Main Calculation Loop</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">176</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">177</span>        <span class=\"c1\"># [Why] (Intent)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">178</span>        <span class=\"c1\"># Process each bar, finding extremes in its lookback window.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">179</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">180</span>        <span class=\"c1\"># [Visual]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">181</span>        <span class=\"c1\"># period=5, at bar i=7:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">182</span>        <span class=\"c1\"># </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">183</span>        <span class=\"c1\"># Lookback window: bars 3,4,5,6,7 (indices relative to window: 0,1,2,3,4)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">184</span>        <span class=\"c1\"># </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">185</span>        <span class=\"c1\"># Bar:   [3]  [4]  [5]  [6]  [7]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">186</span>        <span class=\"c1\"># High:   95  100   98   97   99</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">187</span>        <span class=\"c1\"># Low:    90   92   91   88   93</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">188</span>        <span class=\"c1\">#            ↑              ↑</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">189</span>        <span class=\"c1\">#       highest=100     lowest=88</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">190</span>        <span class=\"c1\">#       at j=1          at j=3</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">191</span>        <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">192</span>        <span class=\"c1\"># Aroon Up = (1 / 5) × 100 = 20 (high was 4 bars ago)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">193</span>        <span class=\"c1\"># Aroon Down = (3 / 5) × 100 = 60 (low was 2 bars ago)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">194</span>        <span class=\"c1\"># Oscillator = 20 - 60 = -40 (downtrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">195</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">196</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(candles)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">197</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">198</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">199</span>            <span class=\"c1\"># Logic Step 3.1: Insufficient History Check</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">200</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">201</span>            <span class=\"c1\"># [Decision]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">202</span>            <span class=\"c1\"># Do we have enough bars for a full lookback window?</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">203</span>            <span class=\"c1\"># We need (period + 1) bars: current bar + period lookback.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">204</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">205</span>            <span class=\"c1\"># [True Branch: Not Enough]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">206</span>            <span class=\"c1\"># Append None to all three outputs.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">207</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">208</span>            <span class=\"c1\"># [False Branch: Enough]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">209</span>            <span class=\"c1\"># Proceed with extreme-finding.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">210</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">211</span>            <span class=\"k\">if</span> i &lt; self.period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">212</span>                self.aroon_up.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">213</span>                self.aroon_down.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">214</span>                self.aroon_oscillator.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">215</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">216</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">217</span>            <span class=\"c1\"># Initialize extreme tracking</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">218</span>            highest_idx = 0       <span class=\"c1\"># Position of highest high in window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">219</span>            lowest_idx = 0        <span class=\"c1\"># Position of lowest low in window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">220</span>            highest = float(<span class=\"s1\">&#x27;</span><span class=\"s1\">-inf</span><span class=\"s1\">&#x27;</span>)  <span class=\"c1\"># Highest value found</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">221</span>            lowest = float(<span class=\"s1\">&#x27;</span><span class=\"s1\">inf</span><span class=\"s1\">&#x27;</span>)    <span class=\"c1\"># Lowest value found</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">222</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">223</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">224</span>            <span class=\"c1\"># Logic Step 3.2: Scan Lookback Window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">225</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">226</span>            <span class=\"c1\"># [Why] (Intent)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">227</span>            <span class=\"c1\"># Find where extremes occurred within the window.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">228</span>            <span class=\"c1\"># Position is crucial - we measure TIME, not price.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">229</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">230</span>            <span class=\"c1\"># [How] (Logic)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">231</span>            <span class=\"c1\"># Iterate through (period + 1) bars.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">232</span>            <span class=\"c1\"># Track both the extreme VALUE and its POSITION.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">233</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">234</span>            <span class=\"c1\"># [Visual]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">235</span>            <span class=\"c1\"># j=0: bar at (i - period + 0) → oldest bar in window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">236</span>            <span class=\"c1\"># j=period: bar at i → current/newest bar</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">237</span>            <span class=\"c1\"># </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">238</span>            <span class=\"c1\"># If highest is at j=period (current bar):</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">239</span>            <span class=\"c1\">#   Aroon Up = 100% (just made new high!)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">240</span>            <span class=\"c1\"># If highest is at j=0 (oldest bar):</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">241</span>            <span class=\"c1\">#   Aroon Up = 0% (high was long ago)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">242</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">243</span>            <span class=\"k\">for</span> j <span class=\"ow\">in</span> range(self.period + 1):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">244</span>                idx = i - self.period + j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">245</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">246</span>                <span class=\"c1\"># Update highest high</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">247</span>                <span class=\"k\">if</span> candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">high</span><span class=\"s1\">&#x27;</span>] &gt; highest:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">248</span>                    highest = candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">high</span><span class=\"s1\">&#x27;</span>]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">249</span>                    highest_idx = j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">250</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">251</span>                <span class=\"c1\"># Update lowest low</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">252</span>                <span class=\"k\">if</span> candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">low</span><span class=\"s1\">&#x27;</span>] &lt; lowest:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">253</span>                    lowest = candles[idx][<span class=\"s1\">&#x27;</span><span class=\"s1\">low</span><span class=\"s1\">&#x27;</span>]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">254</span>                    lowest_idx = j</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">255</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">256</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">257</span>            <span class=\"c1\"># Logic Step 3.3: Calculate Aroon Values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">258</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">259</span>            <span class=\"c1\"># [Why] (Intent)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">260</span>            <span class=\"c1\"># Convert position to percentage.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">261</span>            <span class=\"c1\"># Higher percentage = more recent extreme = stronger trend.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">262</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">263</span>            <span class=\"c1\"># [How] (Logic)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">264</span>            <span class=\"c1\"># Aroon = (position / period) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">265</span>            <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">266</span>            <span class=\"c1\"># [Visual]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">267</span>            <span class=\"c1\"># period = 10, highest at position 8:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">268</span>            <span class=\"c1\"># Aroon Up = (8 / 10) × 100 = 80%</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">269</span>            <span class=\"c1\"># Interpretation: High was 2 bars ago (strong uptrend)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">270</span>            <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">271</span>            aroon_up_val = (highest_idx / self.period) * 100</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">272</span>            aroon_down_val = (lowest_idx / self.period) * 100</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">273</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">274</span>            self.aroon_up.append(aroon_up_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">275</span>            self.aroon_down.append(aroon_down_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">276</span>            self.aroon_oscillator.append(aroon_up_val - aroon_down_val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">277</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">278</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">279</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">280</span><span class=\"c1\"># Static Wrapper Function: calculate</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">281</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">282</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">283</span><span class=\"c1\"># [Why]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">284</span><span class=\"c1\"># Provides functional API returning all three outputs as a tuple.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">285</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">286</span><span class=\"c1\"># [Pattern: 3-Step Static Wrapper]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">287</span><span class=\"c1\"># 1. Instantiation - Create temporary instance</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">288</span><span class=\"c1\"># 2. Execution - Process data</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">289</span><span class=\"c1\"># 3. Extraction - Return all three result lists</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">290</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">291</span><span class=\"k\">def</span> calculate(candles, period=25):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">292</span>    <span class=\"c1\"># 1. Instantiation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">293</span>    aroon = Aroon(period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">294</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">295</span>    <span class=\"c1\"># 2. Execution</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">296</span>    aroon.calculate(candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">297</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">298</span>    <span class=\"c1\"># 3. Extraction</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">299</span>    <span class=\"k\">return</span> aroon.aroon_up, aroon.aroon_down, aroon.aroon_oscillator</div></div>"}