{"csharp_simple":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"k\">using</span> System;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"k\">using</span> System.Collections.Generic;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"k\">namespace</span> TechnicalIndicators</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span>{</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span>    <span class=\"c1\">/// &lt;summary&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span>    <span class=\"c1\">/// TRIX (Triple Exponential Average)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span>    <span class=\"c1\">/// &lt;/summary&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span>    <span class=\"c1\">/// &lt;remarks&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span>    <span class=\"c1\">/// An oscillator showing the Rate of Change of a Triple EMA.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span>    <span class=\"c1\">/// &lt;list type=&quot;bullet&quot;&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Triple Smoothing filters out almost all insignificant price movements.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Calculates % change of EMA3.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span>    <span class=\"c1\">/// &lt;item&gt;&lt;description&gt;Zero Line Crossover: Trend change signal.&lt;/description&gt;&lt;/item&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span>    <span class=\"c1\">/// &lt;/list&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span>    <span class=\"c1\">/// &lt;/remarks&gt;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span>    <span class=\"k\">public</span> <span class=\"k\">class</span> <span class=\"nc\">Trix</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span>    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span>        <span class=\"k\">public</span> <span class=\"kt\">int</span> Period { <span class=\"k\">get</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; Values { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span>        <span class=\"k\">public</span> Trix(<span class=\"kt\">int</span> period = 15)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span>            <span class=\"k\">if</span> (period &lt;= 0) <span class=\"k\">throw</span> <span class=\"k\">new</span> ArgumentOutOfRangeException(<span class=\"k\">nameof</span>(period));</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span>            Period = period;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span>        <span class=\"k\">public</span> <span class=\"k\">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span>            Values.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span>            <span class=\"kt\">var</span> candleList = <span class=\"k\">new</span> List&lt;CandleData&gt;(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span>            <span class=\"k\">if</span> (candleList.Count == 0) <span class=\"k\">return</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span>            <span class=\"kt\">var</span> closes = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span>            <span class=\"k\">foreach</span> (<span class=\"kt\">var</span> c <span class=\"k\">in</span> candleList) closes.Add(c.Close);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span>            <span class=\"c1\">// 1. EMA1 of Close</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span>            <span class=\"kt\">var</span> ema1 = CalculateEma(closes, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span>            <span class=\"c1\">// 2. EMA2 of EMA1</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span>            <span class=\"kt\">var</span> ema2 = CalculateEmaFromNullable(ema1, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span>            <span class=\"c1\">// 3. EMA3 of EMA2</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span>            <span class=\"kt\">var</span> ema3 = CalculateEmaFromNullable(ema2, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span>            <span class=\"c1\">// 4. ROC of EMA3 (1-period percent change)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; candleList.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span>                <span class=\"k\">if</span> (i == 0 || ema3[i] == <span class=\"k\">null</span> || ema3[i - 1] == <span class=\"k\">null</span> || ema3[i - 1] == 0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>                { </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span>                    Values.Add(<span class=\"k\">null</span>); </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span>                    <span class=\"k\">continue</span>; </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span>                Values.Add(((ema3[i]!.Value - ema3[i - 1]!.Value) / ema3[i - 1]!.Value) * 100m);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>        <span class=\"k\">private</span> List&lt;<span class=\"kt\">decimal?</span>&gt; CalculateEma(List&lt;<span class=\"kt\">decimal</span>&gt; source, <span class=\"kt\">int</span> period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>            <span class=\"kt\">var</span> results = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal?</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>            <span class=\"kt\">decimal</span> k = 2.0m / (period + 1);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; source.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>                <span class=\"k\">if</span> (i &lt; period - 1) { results.Add(<span class=\"k\">null</span>); <span class=\"k\">continue</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>                <span class=\"k\">if</span> (i == period - 1)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>                    <span class=\"kt\">decimal</span> sum = 0; <span class=\"k\">for</span> (<span class=\"kt\">int</span> j = 0; j &lt; period; j++) sum += source[i - j];</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>                    results.Add(sum / period); <span class=\"k\">continue</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>                <span class=\"kt\">decimal?</span> prev = results[i - 1];</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>                <span class=\"k\">if</span> (prev.HasValue) results.Add((source[i] - prev.Value) * k + prev.Value);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>                <span class=\"k\">else</span> results.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>            <span class=\"k\">return</span> results;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>        <span class=\"k\">private</span> List&lt;<span class=\"kt\">decimal?</span>&gt; CalculateEmaFromNullable(List&lt;<span class=\"kt\">decimal?</span>&gt; source, <span class=\"kt\">int</span> period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span>            <span class=\"kt\">var</span> results = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal?</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>            <span class=\"kt\">decimal</span> k = 2.0m / (period + 1);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>            <span class=\"kt\">decimal</span> sum = 0; <span class=\"kt\">int</span> validCount = 0; <span class=\"kt\">decimal?</span> prev = <span class=\"k\">null</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; source.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span>                <span class=\"k\">if</span> (source[i] == <span class=\"k\">null</span>) { results.Add(<span class=\"k\">null</span>); <span class=\"k\">continue</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span>                <span class=\"k\">if</span> (prev == <span class=\"k\">null</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span>                    sum += source[i].Value; validCount++;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span>                    <span class=\"k\">if</span> (validCount == period) { prev = sum / period; results.Add(prev); } <span class=\"k\">else</span> results.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>                <span class=\"k\">else</span> { <span class=\"kt\">decimal</span> ema = (source[i]!.Value - prev.Value) * k + prev.Value; results.Add(ema); prev = ema; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span>            <span class=\"k\">return</span> results;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>        <span class=\"k\">public</span> <span class=\"k\">static</span> List&lt;<span class=\"kt\">decimal?</span>&gt; Calculate(IEnumerable&lt;CandleData&gt; candles, <span class=\"kt\">int</span> period = 15)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>            <span class=\"kt\">var</span> t = <span class=\"k\">new</span> Trix(period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>            t.Calculate(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>            <span class=\"k\">return</span> t.Values;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>}</div></div>","csharp_detailed":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"c1\">// TRIX (Triple Exponential Average Rate-of-Change) - ETM WebCode Tutorial</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span><span class=\"c1\">// [What] TRIX is a momentum oscillator that shows the rate-of-change of a </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span><span class=\"c1\">//        triple-smoothed exponential moving average. It filters out market noise</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span><span class=\"c1\">//        while highlighting significant trend changes.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span><span class=\"c1\">// [Why]  Standard momentum indicators react to even tiny price fluctuations,</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span><span class=\"c1\">//        generating many false signals. By applying EMA smoothing THREE times,</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span><span class=\"c1\">//        TRIX eliminates short-term volatility and reveals the &quot;true&quot; trend.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span><span class=\"c1\">// [How]  Step 1: Calculate EMA1 = EMA(Close, Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span><span class=\"c1\">//        Step 2: Calculate EMA2 = EMA(EMA1, Period)  -- smoothing the smooth</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span><span class=\"c1\">//        Step 3: Calculate EMA3 = EMA(EMA2, Period)  -- smoothing again!</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span><span class=\"c1\">//        Step 4: TRIX = ((EMA3[today] - EMA3[yesterday]) / EMA3[yesterday]) × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span><span class=\"c1\">// [Visual] Triple Smoothing Pipeline</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span><span class=\"c1\">//   Raw Close Prices (Noisy)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span><span class=\"c1\">//         │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span><span class=\"c1\">//         ▼</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span><span class=\"c1\">//   ┌─────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span><span class=\"c1\">//   │   EMA #1    │  [How] First pass: removes daily noise</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span><span class=\"c1\">//   └──────┬──────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span><span class=\"c1\">//          │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span><span class=\"c1\">//          ▼</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span><span class=\"c1\">//   ┌─────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span><span class=\"c1\">//   │   EMA #2    │  [How] Second pass: removes weekly noise</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span><span class=\"c1\">//   └──────┬──────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span><span class=\"c1\">//          │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span><span class=\"c1\">//          ▼</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span><span class=\"c1\">//   ┌─────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span><span class=\"c1\">//   │   EMA #3    │  [How] Third pass: ultra-smooth trend line</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span><span class=\"c1\">//   └──────┬──────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span><span class=\"c1\">//          │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span><span class=\"c1\">//          ▼</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span><span class=\"c1\">//   ┌─────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span><span class=\"c1\">//   │ Rate-of-    │  [How] Percent change from yesterday&#x27;s EMA3</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span><span class=\"c1\">//   │ Change (%)  │        Positive = rising trend, Negative = falling</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span><span class=\"c1\">//   └─────────────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span><span class=\"c1\">// [Visual] Warm-Up Period Requirements</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span><span class=\"c1\">//   Period = 15 (default)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span><span class=\"c1\">//   Bar Index:  0   1   2  ...  13  14  ...  27  28  ...  41  42  43</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span><span class=\"c1\">//               │              │    │         │   │        │   │   │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span><span class=\"c1\">//               └── EMA1: needs bars 0-14 ────┘   │        │   │   │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span><span class=\"c1\">//                              └── EMA2: needs EMA1[14-28] ┘   │   │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span><span class=\"c1\">//                                                 └── EMA3: needs EMA2[28-42]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span><span class=\"c1\">//                                                              └── First TRIX at bar 43!</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span><span class=\"c1\">//   [Why] Each EMA layer needs (Period) values before producing output.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span><span class=\"c1\">//         Total warm-up ≈ 3 × (Period - 1) + 1 bars before rate-of-change.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span><span class=\"c1\">// [Visual] Trading Signal Interpretation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span><span class=\"c1\">//   TRIX Value</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span><span class=\"c1\">//        │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span><span class=\"c1\">//    +2% ┼ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ Strong Bullish Momentum</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span><span class=\"c1\">//        │          /\\</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span><span class=\"c1\">//    +1% ┼         /  \\</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span><span class=\"c1\">//        │        /    \\     /\\</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span><span class=\"c1\">//   ──0%─┼───────/──────\\───/──\\──────────  Zero Line (Trend Change)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span><span class=\"c1\">//        │     /          \\/</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span><span class=\"c1\">//    -1% ┼    /</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span><span class=\"c1\">//        │   /</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span><span class=\"c1\">//    -2% ┼ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ Strong Bearish Momentum</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span><span class=\"c1\">//        └──────────────────────────────────────────────────────</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span><span class=\"c1\">//                                                     Time →</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span><span class=\"c1\">//   [How] Zero-Line Crossover:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span><span class=\"c1\">//         • Crosses ABOVE zero = Buy Signal (trend turning bullish)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span><span class=\"c1\">//         • Crosses BELOW zero = Sell Signal (trend turning bearish)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span><span class=\"c1\">//   [Why] Divergence Detection:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span><span class=\"c1\">//         • Price makes new high BUT TRIX does not = Bearish Divergence</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span><span class=\"c1\">//         • Price makes new low BUT TRIX does not = Bullish Divergence</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span><span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span><span class=\"c1\">// =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span><span class=\"k\">using</span> System;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span><span class=\"k\">using</span> System.Collections.Generic;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span><span class=\"k\">namespace</span> TechnicalIndicators</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>{</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>    <span class=\"c1\">// [What] OHLCV Data Structure</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>    <span class=\"c1\">// [Why]  Every technical indicator needs standardized price data input.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>    <span class=\"c1\">//        This record struct holds one bar&#x27;s worth of market data.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">101</span>    <span class=\"c1\">// [How]  readonly record struct = immutable, value-type, auto-equality</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">102</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">103</span>    <span class=\"k\">public</span> <span class=\"k\">readonly</span> <span class=\"k\">record</span> <span class=\"k\">struct</span> CandleData(DateTime Timestamp, <span class=\"kt\">decimal</span> Open, <span class=\"kt\">decimal</span> High, <span class=\"kt\">decimal</span> Low, <span class=\"kt\">decimal</span> Close, <span class=\"kt\">long</span> Volume);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">104</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">105</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">106</span>    <span class=\"c1\">// [What] TRIX Indicator Class</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">107</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">108</span>    <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">109</span>    <span class=\"c1\">// [Why]  Encapsulates the complete TRIX calculation logic with </span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">110</span>    <span class=\"c1\">//        configurable period and reusable output storage.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">111</span>    <span class=\"c1\">// =========================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">112</span>    <span class=\"k\">public</span> <span class=\"k\">class</span> <span class=\"nc\">Trix</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">113</span>    {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">114</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">115</span>        <span class=\"c1\">// [What] Class Properties</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">116</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">117</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">118</span>        <span class=\"c1\">// [Why]  Period: User-configurable smoothing window (default: 15)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">119</span>        <span class=\"c1\">//        Values: Output list storing TRIX percentages for each bar</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">120</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">121</span>        <span class=\"c1\">// [How]  Shorter period = more responsive but noisier</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">122</span>        <span class=\"c1\">//        Longer period = smoother but more lag</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">123</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">124</span>        <span class=\"k\">public</span> <span class=\"kt\">int</span> Period { <span class=\"k\">get</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">125</span>        <span class=\"k\">public</span> List&lt;<span class=\"kt\">decimal?</span>&gt; Values { <span class=\"k\">get</span>; } = <span class=\"k\">new</span>();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">126</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">127</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">128</span>        <span class=\"c1\">// [What] Constructor with Validation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">129</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">130</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">131</span>        <span class=\"c1\">// IPO Block:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">132</span>        <span class=\"c1\">//   Input  : period (int) - The EMA smoothing window size</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">133</span>        <span class=\"c1\">//   Process: Validate period &gt; 0, store configuration</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">134</span>        <span class=\"c1\">//   Output : Fully initialized Trix instance</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">135</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">136</span>        <span class=\"c1\">// [Why]  Period must be positive for any meaningful average calculation.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">137</span>        <span class=\"c1\">//        Zero or negative would cause division-by-zero or nonsense.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">138</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">139</span>        <span class=\"k\">public</span> Trix(<span class=\"kt\">int</span> period = 15)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">140</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">141</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">142</span>            <span class=\"c1\">// [What] Parameter Validation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">143</span>            <span class=\"c1\">// [Why]  Defensive programming: catch errors early with clear message</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">144</span>            <span class=\"c1\">// [How]  Throw exception if period &lt;= 0</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">145</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">146</span>            <span class=\"k\">if</span> (period &lt;= 0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">147</span>                <span class=\"k\">throw</span> <span class=\"k\">new</span> ArgumentOutOfRangeException(<span class=\"k\">nameof</span>(period));</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">148</span>            Period = period;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">149</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">150</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">151</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">152</span>        <span class=\"c1\">// [What] Main Calculation Method</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">153</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">154</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">155</span>        <span class=\"c1\">// IPO Block:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">156</span>        <span class=\"c1\">//   Input  : candles (IEnumerable&lt;CandleData&gt;) - Price history</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">157</span>        <span class=\"c1\">//   Process: 1. Extract closes</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">158</span>        <span class=\"c1\">//            2. Apply triple EMA smoothing</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">159</span>        <span class=\"c1\">//            3. Calculate rate-of-change</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">160</span>        <span class=\"c1\">//   Output : Populates Values list with TRIX percentages</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">161</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">162</span>        <span class=\"k\">public</span> <span class=\"k\">void</span> Calculate(IEnumerable&lt;CandleData&gt; candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">163</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">164</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">165</span>            <span class=\"c1\">// [What] Clear Previous Results</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">166</span>            <span class=\"c1\">// [Why]  Allow reuse of same instance for different datasets</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">167</span>            <span class=\"c1\">// [How]  Reset Values list to empty state</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">168</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">169</span>            Values.Clear();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">170</span>            <span class=\"kt\">var</span> candleList = <span class=\"k\">new</span> List&lt;CandleData&gt;(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">171</span>            <span class=\"k\">if</span> (candleList.Count == 0) <span class=\"k\">return</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">172</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">173</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">174</span>            <span class=\"c1\">// [What] Extract Close Prices</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">175</span>            <span class=\"c1\">// [Why]  TRIX traditionally uses closing prices only</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">176</span>            <span class=\"c1\">// [How]  Loop through candles, collect Close values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">177</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">178</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">179</span>            <span class=\"c1\">// [Visual] Close Price Extraction</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">180</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">181</span>            <span class=\"c1\">//   candleList:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">182</span>            <span class=\"c1\">//   ┌──────────────────────────────────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">183</span>            <span class=\"c1\">//   │ [0] O:100 H:105 L:99  C:102 V:1000       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">184</span>            <span class=\"c1\">//   │ [1] O:102 H:108 L:101 C:107 V:1500       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">185</span>            <span class=\"c1\">//   │ [2] O:107 H:110 L:104 C:105 V:1200       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">186</span>            <span class=\"c1\">//   └──────────────────────────────────────────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">187</span>            <span class=\"c1\">//                       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">188</span>            <span class=\"c1\">//                       ▼  foreach → closes.Add(c.Close)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">189</span>            <span class=\"c1\">//   closes:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">190</span>            <span class=\"c1\">//   ┌─────┬─────┬─────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">191</span>            <span class=\"c1\">//   │ 102 │ 107 │ 105 │  [Pure close prices]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">192</span>            <span class=\"c1\">//   └─────┴─────┴─────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">193</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">194</span>            <span class=\"kt\">var</span> closes = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">195</span>            <span class=\"k\">foreach</span> (<span class=\"kt\">var</span> c <span class=\"k\">in</span> candleList) closes.Add(c.Close);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">196</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">197</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">198</span>            <span class=\"c1\">// [What] Triple EMA Calculation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">199</span>            <span class=\"c1\">// [Why]  Each layer removes more noise from the data</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">200</span>            <span class=\"c1\">// [How]  Chain three EMA calculations sequentially</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">201</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">202</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">203</span>            <span class=\"c1\">// [Visual] EMA Cascade</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">204</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">205</span>            <span class=\"c1\">//   closes:  [102, 107, 105, 110, 108, ...]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">206</span>            <span class=\"c1\">//              │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">207</span>            <span class=\"c1\">//              ▼  CalculateEma(closes, Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">208</span>            <span class=\"c1\">//   ema1:    [null, null, ..., 104.5, 105.2, ...]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">209</span>            <span class=\"c1\">//              │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">210</span>            <span class=\"c1\">//              ▼  CalculateEmaFromNullable(ema1, Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">211</span>            <span class=\"c1\">//   ema2:    [null, null, ..., null, 104.8, ...]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">212</span>            <span class=\"c1\">//              │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">213</span>            <span class=\"c1\">//              ▼  CalculateEmaFromNullable(ema2, Period)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">214</span>            <span class=\"c1\">//   ema3:    [null, null, ..., null, null, 104.6, ...]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">215</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">216</span>            <span class=\"c1\">// [Why] Each layer has MORE leading nulls because it depends on</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">217</span>            <span class=\"c1\">//       having enough valid values from the previous layer.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">218</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">219</span>            <span class=\"kt\">var</span> ema1 = CalculateEma(closes, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">220</span>            <span class=\"kt\">var</span> ema2 = CalculateEmaFromNullable(ema1, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">221</span>            <span class=\"kt\">var</span> ema3 = CalculateEmaFromNullable(ema2, Period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">222</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">223</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">224</span>            <span class=\"c1\">// [What] Rate-of-Change Calculation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">225</span>            <span class=\"c1\">// [Why]  TRIX is the PERCENT CHANGE in the triple-smoothed average</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">226</span>            <span class=\"c1\">// [How]  For each bar: (EMA3[i] - EMA3[i-1]) / EMA3[i-1] × 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">227</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">228</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">229</span>            <span class=\"c1\">// [Visual] TRIX Loop</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">230</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">231</span>            <span class=\"c1\">//   for i = 0 to Count-1:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">232</span>            <span class=\"c1\">//   ┌─────────────────────────────────────────────────────────────┐</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">233</span>            <span class=\"c1\">//   │ if i == 0 OR ema3[i] is null OR ema3[i-1] is null/zero:    │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">234</span>            <span class=\"c1\">//   │     → Values.Add(null)  // Cannot compute rate-of-change   │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">235</span>            <span class=\"c1\">//   │ else:                                                       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">236</span>            <span class=\"c1\">//   │     TRIX = (ema3[i] - ema3[i-1]) / ema3[i-1] × 100%        │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">237</span>            <span class=\"c1\">//   │     → Values.Add(TRIX)                                      │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">238</span>            <span class=\"c1\">//   └─────────────────────────────────────────────────────────────┘</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">239</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">240</span>            <span class=\"c1\">//   [Example]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">241</span>            <span class=\"c1\">//   ema3[42] = 105.50,  ema3[43] = 106.03</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">242</span>            <span class=\"c1\">//   TRIX = (106.03 - 105.50) / 105.50 × 100 = 0.53 / 105.50 × 100 = 0.50%</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">243</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">244</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; candleList.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">245</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">246</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">247</span>                <span class=\"c1\">// [What] Guard Conditions</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">248</span>                <span class=\"c1\">// [Why]  - i == 0: No previous bar to compare</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">249</span>                <span class=\"c1\">//        - ema3[i] null: Not enough data yet</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">250</span>                <span class=\"c1\">//        - ema3[i-1] null or 0: Division impossible/undefined</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">251</span>                <span class=\"c1\">// [How]  Check all conditions, output null if any fail</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">252</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">253</span>                <span class=\"k\">if</span> (i == 0 || ema3[i] == <span class=\"k\">null</span> || ema3[i - 1] == <span class=\"k\">null</span> || ema3[i - 1] == 0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">254</span>                { Values.Add(<span class=\"k\">null</span>); <span class=\"k\">continue</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">255</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">256</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">257</span>                <span class=\"c1\">// [What] TRIX Formula</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">258</span>                <span class=\"c1\">// [Why]  Percentage change normalizes across different price levels</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">259</span>                <span class=\"c1\">// [How]  ((today - yesterday) / yesterday) * 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">260</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">261</span>                Values.Add(((ema3[i]!.Value - ema3[i - 1]!.Value) / ema3[i - 1]!.Value) * 100m);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">262</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">263</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">264</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">265</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">266</span>        <span class=\"c1\">// [What] Helper Method: Calculate EMA from decimal list</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">267</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">268</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">269</span>        <span class=\"c1\">// IPO Block:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">270</span>        <span class=\"c1\">//   Input  : source (List&lt;decimal&gt;) - Raw price data</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">271</span>        <span class=\"c1\">//            period (int) - Smoothing window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">272</span>        <span class=\"c1\">//   Process: Apply standard EMA formula with SMA seed</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">273</span>        <span class=\"c1\">//   Output : List&lt;decimal?&gt; with nulls for warm-up period</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">274</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">275</span>        <span class=\"c1\">// [Why]  Separates EMA logic for reusability and clarity.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">276</span>        <span class=\"c1\">//        This version handles non-nullable input (raw prices).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">277</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">278</span>        <span class=\"k\">private</span> List&lt;<span class=\"kt\">decimal?</span>&gt; CalculateEma(List&lt;<span class=\"kt\">decimal</span>&gt; source, <span class=\"kt\">int</span> period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">279</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">280</span>            <span class=\"kt\">var</span> results = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal?</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">281</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">282</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">283</span>            <span class=\"c1\">// [What] EMA Multiplier (Smoothing Constant)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">284</span>            <span class=\"c1\">// [Why]  k determines how much weight goes to the newest price</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">285</span>            <span class=\"c1\">// [How]  Formula: k = 2 / (period + 1)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">286</span>            <span class=\"c1\">//        Higher k = faster response, lower k = more smoothing</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">287</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">288</span>            <span class=\"kt\">decimal</span> k = 2.0m / (period + 1);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">289</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">290</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">291</span>            <span class=\"c1\">// [What] Main EMA Loop</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">292</span>            <span class=\"c1\">// [Why]  Process each data point sequentially</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">293</span>            <span class=\"c1\">// [How]  Three phases: warm-up, seed, recursive</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">294</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">295</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">296</span>            <span class=\"c1\">// [Visual] EMA Calculation Phases (Period = 3)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">297</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">298</span>            <span class=\"c1\">//   Index:    0       1       2       3       4</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">299</span>            <span class=\"c1\">//             │       │       │       │       │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">300</span>            <span class=\"c1\">//   Phase:  [Warm] [Warm]  [Seed] [Recurse] [Recurse]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">301</span>            <span class=\"c1\">//             │       │       │       │        │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">302</span>            <span class=\"c1\">//   Output: null   null    SMA    EMA      EMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">303</span>            <span class=\"c1\">//                          ↓</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">304</span>            <span class=\"c1\">//                    (sum of 0,1,2)/3</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">305</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">306</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; source.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">307</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">308</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">309</span>                <span class=\"c1\">// Phase 1: Warm-Up (Not Enough Data Yet)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">310</span>                <span class=\"c1\">// [Why]  Need &#x27;period&#x27; values to calculate first average</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">311</span>                <span class=\"c1\">// [How]  Output null for indices 0 to period-2</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">312</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">313</span>                <span class=\"k\">if</span> (i &lt; period - 1) { results.Add(<span class=\"k\">null</span>); <span class=\"k\">continue</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">314</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">315</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">316</span>                <span class=\"c1\">// Phase 2: Seed (First Real EMA Value)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">317</span>                <span class=\"c1\">// [Why]  EMA is recursive but needs a starting point</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">318</span>                <span class=\"c1\">// [How]  Use Simple Moving Average of first &#x27;period&#x27; values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">319</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">320</span>                <span class=\"k\">if</span> (i == period - 1)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">321</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">322</span>                    <span class=\"kt\">decimal</span> sum = 0; <span class=\"k\">for</span> (<span class=\"kt\">int</span> j = 0; j &lt; period; j++) sum += source[i - j];</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">323</span>                    results.Add(sum / period); <span class=\"k\">continue</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">324</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">325</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">326</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">327</span>                <span class=\"c1\">// Phase 3: Recursive EMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">328</span>                <span class=\"c1\">// [Why]  Standard EMA formula uses yesterday&#x27;s EMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">329</span>                <span class=\"c1\">// [How]  EMA = (Price - PrevEMA) × k + PrevEMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">330</span>                <span class=\"c1\">// -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">331</span>                <span class=\"kt\">decimal?</span> prev = results[i - 1];</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">332</span>                <span class=\"k\">if</span> (prev.HasValue) results.Add((source[i] - prev.Value) * k + prev.Value);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">333</span>                <span class=\"k\">else</span> results.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">334</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">335</span>            <span class=\"k\">return</span> results;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">336</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">337</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">338</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">339</span>        <span class=\"c1\">// [What] Helper Method: Calculate EMA from nullable list</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">340</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">341</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">342</span>        <span class=\"c1\">// IPO Block:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">343</span>        <span class=\"c1\">//   Input  : source (List&lt;decimal?&gt;) - EMA output (may contain nulls)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">344</span>        <span class=\"c1\">//            period (int) - Smoothing window</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">345</span>        <span class=\"c1\">//   Process: Skip nulls, accumulate valid values, apply EMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">346</span>        <span class=\"c1\">//   Output : List&lt;decimal?&gt; with extended null prefix</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">347</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">348</span>        <span class=\"c1\">// [Why]  When chaining EMAs, the input already has leading nulls.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">349</span>        <span class=\"c1\">//        This method handles nulls gracefully and counts only valid data.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">350</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">351</span>        <span class=\"k\">private</span> List&lt;<span class=\"kt\">decimal?</span>&gt; CalculateEmaFromNullable(List&lt;<span class=\"kt\">decimal?</span>&gt; source, <span class=\"kt\">int</span> period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">352</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">353</span>            <span class=\"kt\">var</span> results = <span class=\"k\">new</span> List&lt;<span class=\"kt\">decimal?</span>&gt;();</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">354</span>            <span class=\"kt\">decimal</span> k = 2.0m / (period + 1);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">355</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">356</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">357</span>            <span class=\"c1\">// [What] State Variables</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">358</span>            <span class=\"c1\">// [Why]  sum + validCount: Track values for SMA seed</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">359</span>            <span class=\"c1\">//        prev: Store previous EMA for recursive calculation</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">360</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">361</span>            <span class=\"kt\">decimal</span> sum = 0; <span class=\"kt\">int</span> validCount = 0; <span class=\"kt\">decimal?</span> prev = <span class=\"k\">null</span>;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">362</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">363</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">364</span>            <span class=\"c1\">// [What] Processing Loop for Nullable Source</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">365</span>            <span class=\"c1\">// [Why]  Must handle gaps (nulls) in input data</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">366</span>            <span class=\"c1\">// [How]  Count only non-null values toward warm-up threshold</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">367</span>            <span class=\"c1\">// -----------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">368</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">369</span>            <span class=\"c1\">// [Visual] Nullable EMA Flow</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">370</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">371</span>            <span class=\"c1\">//   source:  [null, null, null, 100, 102, 105, 101, ...]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">372</span>            <span class=\"c1\">//                                │    │    │    │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">373</span>            <span class=\"c1\">//   validCount after:            1    2    3    4</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">374</span>            <span class=\"c1\">//                                │    │    │    │</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">375</span>            <span class=\"c1\">//   Output:                    null null  SMA  EMA</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">376</span>            <span class=\"c1\">//                                          ↑</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">377</span>            <span class=\"c1\">//                                   (100+102+105)/3 = 102.33</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">378</span>            <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">379</span>            <span class=\"k\">for</span> (<span class=\"kt\">int</span> i = 0; i &lt; source.Count; i++)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">380</span>            {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">381</span>                <span class=\"c1\">// Skip nulls in source - maintain alignment</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">382</span>                <span class=\"k\">if</span> (source[i] == <span class=\"k\">null</span>) { results.Add(<span class=\"k\">null</span>); <span class=\"k\">continue</span>; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">383</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">384</span>                <span class=\"c1\">// First time we have an EMA seed (after collecting &#x27;period&#x27; valid values)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">385</span>                <span class=\"k\">if</span> (prev == <span class=\"k\">null</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">386</span>                {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">387</span>                    sum += source[i].Value; validCount++;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">388</span>                    <span class=\"k\">if</span> (validCount == period) { prev = sum / period; results.Add(prev); } <span class=\"k\">else</span> results.Add(<span class=\"k\">null</span>);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">389</span>                }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">390</span>                <span class=\"k\">else</span> { <span class=\"kt\">decimal</span> ema = (source[i]!.Value - prev.Value) * k + prev.Value; results.Add(ema); prev = ema; }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">391</span>            }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">392</span>            <span class=\"k\">return</span> results;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">393</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">394</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">395</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">396</span>        <span class=\"c1\">// [What] Static Convenience Method</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">397</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">398</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">399</span>        <span class=\"c1\">// IPO Block:</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">400</span>        <span class=\"c1\">//   Input  : candles, period</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">401</span>        <span class=\"c1\">//   Process: Instantiate Trix, call Calculate, return Values</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">402</span>        <span class=\"c1\">//   Output : List&lt;decimal?&gt; of TRIX percentages</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">403</span>        <span class=\"c1\">//</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">404</span>        <span class=\"c1\">// [Why]  One-liner for simple use cases without instance management.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">405</span>        <span class=\"c1\">// =====================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">406</span>        <span class=\"k\">public</span> <span class=\"k\">static</span> List&lt;<span class=\"kt\">decimal?</span>&gt; Calculate(IEnumerable&lt;CandleData&gt; candles, <span class=\"kt\">int</span> period = 15)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">407</span>        {</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">408</span>            <span class=\"kt\">var</span> t = <span class=\"k\">new</span> Trix(period);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">409</span>            t.Calculate(candles);</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">410</span>            <span class=\"k\">return</span> t.Values;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">411</span>        }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">412</span>    }</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">413</span>}</div></div>","python_simple":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"k\">class</span> <span class=\"nc\">Trix</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span>    <span class=\"sd\">&quot;&quot;&quot;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"sd\">    TRIX</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"sd\">    &quot;&quot;&quot;</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span>    <span class=\"k\">def</span> __init__(self, period=15):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span>        self.period = period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span>        self.values = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span>    <span class=\"k\">def</span> calculate(self, candles):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span>        self.values.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span>        <span class=\"k\">if</span> <span class=\"ow\">not</span> candles: <span class=\"k\">return</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span>        <span class=\"c1\"># 1. EMA of Close</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span>        ema1 = self._calc_ema(candles, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span>        <span class=\"c1\"># 2. EMA of EMA1</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span>        ema2 = self._calc_ema_values(ema1, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span>        <span class=\"c1\"># 3. EMA of EMA2</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span>        ema3 = self._calc_ema_values(ema2, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span>        <span class=\"c1\"># 4. ROC of EMA3</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(candles)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span>            <span class=\"k\">if</span> i == 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span>                self.values.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span>            curr = ema3[i]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span>            prev = ema3[i-1]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span>            <span class=\"k\">if</span> curr <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"ow\">and</span> prev <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"ow\">and</span> prev != 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span>                roc = (curr - prev) / prev * 100.0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span>                self.values.append(roc)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span>            <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span>                self.values.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span>    <span class=\"k\">def</span> _calc_ema(self, candles, period):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span>        res = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span>        k = 2.0 / (period + 1)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span>        prev = <span class=\"kc\">None</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(candles)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span>            c = float(candles[i][<span class=\"s1\">&#x27;</span><span class=\"s1\">close</span><span class=\"s1\">&#x27;</span>])</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span>            <span class=\"k\">if</span> i &lt; period - 1:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span>                res.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span>            <span class=\"k\">elif</span> i == period - 1:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span>                subset = [float(candles[x][<span class=\"s1\">&#x27;</span><span class=\"s1\">close</span><span class=\"s1\">&#x27;</span>]) <span class=\"k\">for</span> x <span class=\"ow\">in</span> range(i-period+1, i+1)]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span>                prev = sum(subset) / period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span>                res.append(prev)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span>            <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span>                val = (c - prev) * k + prev</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>                res.append(val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span>                prev = val</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span>        <span class=\"k\">return</span> res</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span>    <span class=\"k\">def</span> _calc_ema_values(self, source, period):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>        res = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>        k = 2.0 / (period + 1)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>        prev = <span class=\"kc\">None</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>        valid_cnt = 0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(source)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>            <span class=\"k\">if</span> source[i] <span class=\"ow\">is</span> <span class=\"kc\">None</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>                res.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>            valid_cnt += 1</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>            <span class=\"k\">if</span> valid_cnt &lt; period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>                res.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>            <span class=\"k\">elif</span> valid_cnt == period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>                subset = [x <span class=\"k\">for</span> x <span class=\"ow\">in</span> source[i-period+1 : i+1] <span class=\"k\">if</span> x <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span>]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>                <span class=\"k\">if</span> len(subset) == period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>                    prev = sum(subset) / period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>                    res.append(prev)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>                <span class=\"k\">else</span>: res.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>            <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>                val = (source[i] - prev) * k + prev</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>                res.append(val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>                prev = val</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>        <span class=\"k\">return</span> res</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span><span class=\"k\">def</span> calculate(candles, period=15):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>    obj = Trix(period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>    obj.calculate(candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>    <span class=\"k\">return</span> obj.values</div></div>","python_detailed":"<div class=\"highlight\"><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">1</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">2</span><span class=\"c1\"># Logic Breakdown (Trix)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">3</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">4</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">5</span><span class=\"c1\"># This document provides a &quot;Deep Dive&quot; into the internal logic of the</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">6</span><span class=\"c1\"># Trix indicator.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">7</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">8</span><span class=\"c1\"># [Core Concepts]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">9</span><span class=\"c1\"># 1. Triple Smoothing</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">10</span><span class=\"c1\">#    - Filters out insignificant cycles + minor cycles.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">11</span><span class=\"c1\">#    - Unlike TEMA (which cancels lag), Trix accepts the lag to get an extremely</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">12</span><span class=\"c1\">#      smooth trend curve.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">13</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">14</span><span class=\"c1\"># 2. Rate of Change (ROC)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">15</span><span class=\"c1\">#    - Trix is the 1-period Percentage Change of the Triple Smoothed EMA.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">16</span><span class=\"c1\">#    - It is a Momentum Oscillator centered around 0.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">17</span><span class=\"c1\">#    - Positive = Uptrend gaining momentum.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">18</span><span class=\"c1\">#    - Negative = Downtrend gaining momentum.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">19</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">20</span><span class=\"c1\"># [Formula]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">21</span><span class=\"c1\"># EMA1 = EMA(Price)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">22</span><span class=\"c1\"># EMA2 = EMA(EMA1)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">23</span><span class=\"c1\"># EMA3 = EMA(EMA2)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">24</span><span class=\"c1\"># TRIX = (EMA3_current - EMA3_prev) / EMA3_prev * 100</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">25</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">26</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">27</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">28</span><span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">29</span><span class=\"c1\"># Type-Level Explanation: Trix (class)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">30</span><span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">31</span><span class=\"c1\"># [Why]  Long-term trend momentum without the noise.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">32</span><span class=\"c1\"># [What] ROC of Triple Smoothed EMA.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">33</span><span class=\"c1\"># [How]  Calculates the 1-period Rate of Change of the Triple Exponentially Smoothed Moving Average.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">34</span><span class=\"c1\"># [Who]  Jack Hutson (1980s).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">35</span><span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">36</span><span class=\"k\">class</span> <span class=\"nc\">Trix</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">37</span>    </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">38</span>    <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">39</span>    <span class=\"c1\"># Constructor: __init__</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">40</span>    <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">41</span>    <span class=\"k\">def</span> __init__(self, period=15):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">42</span>        <span class=\"k\">if</span> period &lt;= 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">43</span>            <span class=\"k\">raise</span> ValueError(<span class=\"s2\">&quot;</span><span class=\"s2\">period must be &gt; 0</span><span class=\"s2\">&quot;</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">44</span>        self.period = period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">45</span>        self.values = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">46</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">47</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">48</span>    <span class=\"c1\"># IPO: calculate</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">49</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">50</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">51</span>    <span class=\"c1\"># [Input]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">52</span>    <span class=\"c1\"># - candles: List[dict]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">53</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">54</span>    <span class=\"c1\"># [Process]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">55</span>    <span class=\"c1\"># 1. Calculate EMA1 (Price).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">56</span>    <span class=\"c1\"># 2. Calculate EMA2 (EMA1).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">57</span>    <span class=\"c1\"># 3. Calculate EMA3 (EMA2).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">58</span>    <span class=\"c1\"># 4. Calculate ROC of EMA3.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">59</span>    <span class=\"c1\">#</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">60</span>    <span class=\"c1\"># [Output]</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">61</span>    <span class=\"c1\"># - None.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">62</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">63</span>    <span class=\"k\">def</span> calculate(self, candles):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">64</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">65</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">66</span>        <span class=\"c1\"># Logic Step 1: Reset</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">67</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">68</span>        self.values.clear()</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">69</span>        <span class=\"k\">if</span> len(candles) == 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">70</span>            <span class=\"k\">return</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">71</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">72</span>        closes = [c[<span class=\"s1\">&#x27;</span><span class=\"s1\">close</span><span class=\"s1\">&#x27;</span>] <span class=\"k\">for</span> c <span class=\"ow\">in</span> candles]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">73</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">74</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">75</span>        <span class=\"c1\"># Logic Step 2-4: The Triple Smoothing Chain</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">76</span>        <span class=\"c1\"># [Why] Isolate the Very Low Frequency (Major Trend) components.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">77</span>        <span class=\"c1\"># [How] EMA(EMA(EMA(Price))).</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">78</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">79</span>        ema1 = self._calc_ema(closes, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">80</span>        ema2 = self._calc_ema_nullable(ema1, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">81</span>        ema3 = self._calc_ema_nullable(ema2, self.period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">82</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">83</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">84</span>        <span class=\"c1\"># Logic Step 5: Rate of Change (ROC)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">85</span>        <span class=\"c1\"># [Why] Convert the smooth absolute number into a momentum oscillator.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">86</span>        <span class=\"c1\"># [How] (Current - Prev) / Prev * 100.</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">87</span>        <span class=\"c1\"># -------------------------------------------------------------</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">88</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(candles)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">89</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">90</span>            <span class=\"c1\"># Need current and previous EMA3</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">91</span>            val_curr = ema3[i]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">92</span>            val_prev = ema3[i - 1] <span class=\"k\">if</span> i &gt; 0 <span class=\"k\">else</span> <span class=\"kc\">None</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">93</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">94</span>            <span class=\"k\">if</span> val_curr <span class=\"ow\">is</span> <span class=\"kc\">None</span> <span class=\"ow\">or</span> val_prev <span class=\"ow\">is</span> <span class=\"kc\">None</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">95</span>                self.values.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">96</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">97</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">98</span>            <span class=\"c1\"># [Fail Safe] Division by Zero</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">99</span>            <span class=\"k\">if</span> val_prev == 0:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">100</span>                self.values.append(0.0) <span class=\"c1\"># No change from 0 is undefined, assume 0</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">101</span>            <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">102</span>                <span class=\"c1\"># Percentage Change Formula</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">103</span>                roc = ((val_curr - val_prev) / val_prev) * 100.0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">104</span>                self.values.append(roc)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">105</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">106</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">107</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">108</span>    <span class=\"c1\"># IPO: _calc_ema (Standard)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">109</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">110</span>    <span class=\"k\">def</span> _calc_ema(self, source, period):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">111</span>        results = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">112</span>        alpha = 2.0 / (period + 1.0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">113</span>        ema = <span class=\"kc\">None</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">114</span>        seed_sum = 0.0</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">115</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">116</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(source)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">117</span>            val = source[i]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">118</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">119</span>            <span class=\"k\">if</span> i &lt; period - 1:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">120</span>                seed_sum += val</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">121</span>                results.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">122</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">123</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">124</span>            <span class=\"k\">if</span> i == period - 1:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">125</span>                seed_sum += val</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">126</span>                ema = seed_sum / period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">127</span>                results.append(ema)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">128</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">129</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">130</span>            ema = (val - ema) * alpha + ema</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">131</span>            results.append(ema)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">132</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">133</span>        <span class=\"k\">return</span> results</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">134</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">135</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">136</span>    <span class=\"c1\"># IPO: _calc_ema_nullable (Chainable)</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">137</span>    <span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">138</span>    <span class=\"k\">def</span> _calc_ema_nullable(self, source, period):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">139</span>        results = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">140</span>        alpha = 2.0 / (period + 1.0)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">141</span>        ema = <span class=\"kc\">None</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">142</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">143</span>        valid_buffer = []</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">144</span>        </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">145</span>        <span class=\"k\">for</span> i <span class=\"ow\">in</span> range(len(source)):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">146</span>            val = source[i]</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">147</span>            </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">148</span>            <span class=\"k\">if</span> val <span class=\"ow\">is</span> <span class=\"kc\">None</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">149</span>                results.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">150</span>                <span class=\"k\">continue</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">151</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">152</span>            <span class=\"k\">if</span> ema <span class=\"ow\">is</span> <span class=\"kc\">None</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">153</span>                valid_buffer.append(val)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">154</span>                <span class=\"k\">if</span> len(valid_buffer) &lt; period:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">155</span>                    results.append(<span class=\"kc\">None</span>)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">156</span>                <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">157</span>                    ema = sum(valid_buffer) / period</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">158</span>                    results.append(ema)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">159</span>            <span class=\"k\">else</span>:</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">160</span>                ema = (val - ema) * alpha + ema</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">161</span>                results.append(ema)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">162</span>                </div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">163</span>        <span class=\"k\">return</span> results</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">164</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">165</span>&#8203;</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">166</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">167</span><span class=\"c1\"># Static Wrapper Function</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">168</span><span class=\"c1\"># =============================================================================</span></div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">169</span><span class=\"k\">def</span> calculate(candles, period=15):</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">170</span>    t = Trix(period)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">171</span>    t.calculate(candles)</div><div class=\"code-line\" style=\"white-space: pre;\"><span style=\"display:inline-block; width:2em; text-align:right; margin-right:1em; color:#9ca3af; user-select:none;\">172</span>    <span class=\"k\">return</span> t.values</div></div>"}